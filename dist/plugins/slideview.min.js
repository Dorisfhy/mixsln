(function(e,t){var n,o,i,l,s=e.document,a=t.module.Transition,r=t.module.Scroll,d=t.module.Navigation.instance,p=d.getStack(),u=t.config,c=[];t.extendView({name:"slideview",slideIn:function(){var e=this,d=document.createElement("div"),p=c[c.length-1];if(d.style.cssText="z-index:"+(c.length+1e3)+";position:absolute;width:100%;height:100%;left:0;top:0;background:#FFF;",d.appendChild(this.el),o.appendChild(d),0===c.length){var h=0,g=s.body.getBoundingClientRect().height;u.enableNavbar&&(h=u.enableNavbar.wrapEl.getBoundingClientRect().height),u.enableScroll&&(g=window.innerHeight),o.style.height=g-h+"px",o.style.top=h+window.scrollY+"px",o.style.display="";var v=o.getBoundingClientRect();i=v.width,l=v.height}c.push({lastHeader:{title:n.pageMeta.title,buttons:n.pageMeta.buttons},wrap:d,view:this}),t.navigation.resetNavbar(),a.slide(d,"RI",i,function(){p&&(p.wrap.style.display="none"),t.navigation.setButton({type:"back",text:"返回",handler:function(){e.slideOut()}}),e.el.getBoundingClientRect().height>l&&r.enable(e.el),e.show&&e.show()})},slideOut:function(){var e=this,n=c.pop(),l=n.wrap,s=n.lastHeader,d=c[c.length-1];d&&(d.wrap.style.display=""),a.slide(l,"RO",i,function(){r.disable(n.view.el),o.removeChild(l),e.hide&&e.hide(),t.navigation.resetNavbar(),t.navigation.setTitle(s.title),t.navigation.setButton(s.buttons),0===c.length&&(o.style.display="none")})},close:function(){var e=c.pop(),n=e.wrap;a.slide(n,"RO",i,function(){for(;c.length;)e=c.pop(),e.view.hide&&e.view.hide();var n=e.lastHeader;t.navigation.resetNavbar(),t.navigation.setTitle(n.title),t.navigation.setButton(n.buttons),o.innerHTML="",o.style.display="none"})}}),t.plugin.slideview={onAppStart:function(){o=document.createElement("div"),o.style.cssText="z-index:999;display:none;position:absolute;left:0;top:0;width:100%;height:100%;background:rgba(0,0,0,0);overflow:hidden;",s.body.appendChild(o)},onNavigationSwitch:function(){if(c.length&&n){var e=c.shift();n.pageMeta.title=e.lastHeader.title,n.pageMeta.buttons=e.lastHeader.buttons,o.innerHTML="",o.style.display="none"}n=p.getState()}}})(window,window.app);