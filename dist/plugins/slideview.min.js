(function(e,t){var n,o,i,l=e.document,s=t.module.Transition,a=t.module.Scroll,r=t.module.Navigation.instance,d=r.getStack(),p=t.config,u=[];t.extendView({name:"slideview",slideIn:function(){var e=this,r=document.createElement("div"),d=u[u.length-1];if(r.style.cssText="z-index:"+(u.length+10)+";position:absolute;width:100%;height:100%;left:0;top:0;background:#FFF;",r.appendChild(this.el),o.appendChild(r),0===u.length){var c=0,h=0,g=l.body.getBoundingClientRect().height;p.enableNavbar&&(c=p.enableNavbar.wrapEl.getBoundingClientRect().height),p.enableToolbar&&(h=p.enableToolbar.wrapEl.getBoundingClientRect().height),p.enableScroll&&(g=window.innerHeight),o.style.height=g-c-h+"px",o.style.top=c+window.scrollY+"px",o.style.display="",i=o.getBoundingClientRect().width}u.push({lastHeader:{title:n.pageMeta.title,buttons:n.pageMeta.buttons},wrap:r,view:this}),t.navigation.resetNavbar(),s.slide(r,"RI",i,function(){d&&(d.wrap.style.display="none"),t.navigation.setButton({type:"back",text:"返回",handler:function(){e.slideOut()}}),p.enableScroll&&a.enable(e.el),e.show&&e.show()})},slideOut:function(){var e=this,n=u.pop(),l=n.wrap,a=n.lastHeader,r=u[u.length-1];r&&(r.wrap.style.display=""),s.slide(l,"RO",i,function(){o.removeChild(l),e.hide&&e.hide(),t.navigation.resetNavbar(),t.navigation.setTitle(a.title),t.navigation.setButton(a.buttons),0===u.length&&(o.style.display="none")})},close:function(){var e=u.pop(),n=e.wrap;s.slide(n,"RO",i,function(){for(;u.length;)e=u.pop(),e.view.hide&&e.view.hide();var n=e.lastHeader;t.navigation.resetNavbar(),t.navigation.setTitle(n.title),t.navigation.setButton(n.buttons),o.innerHTML="",o.style.display="none"})}}),t.plugin.slideview={onAppStart:function(){o=document.createElement("div"),o.style.cssText="z-index:9;display:none;position:absolute;left:0;top:0;width:100%;height:100%;background:rgba(0,0,0,0);overflow:hidden;",l.body.appendChild(o)},onNavigationSwitch:function(){if(u.length&&n){var e=u.shift();n.pageMeta.title=e.lastHeader.title,n.pageMeta.buttons=e.lastHeader.buttons,o.innerHTML="",o.style.display="none"}n=d.getState()}}})(window,window.app);