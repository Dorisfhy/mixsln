(function(e,t){var n=e.document,a=n.createElement("a"),o={};t.plugin.dynamic={loadResource:function(e,i,r){function s(){return"resource-"+Date.now()+"-"+Object.keys(o).length}function l(e){return 0===e.indexOf("http")?e:t.config.resourceBase+e}function c(e,t){if(!e)return t();a.href=l(e);var r=o[a.href]||(o[a.href]=s());if("js"===i||e.match(/\.js$/)){var c=document.createElement("script"),u=!1;c.id=r,c.async=!0,c.onload=c.onreadystatechange=function(){u||(u=!0,t&&t(e))},c.src=e,n.body.appendChild(c)}else if("css"===i||e.match(/\.css$/)){var p=document.createElement("link");p.id=r,p.type="text/css",p.rel="stylesheet",p.href=e,n.body.appendChild(p),t()}}2===arguments.length&&"function"==typeof arguments[1]&&(r=arguments[1],i=null),"string"==typeof e&&(e=[e]);var u=[];return e.forEach(function(e){a.href=l(e),o[a.href]||(o[a.href]=s(),u.push(e))}),this.combo&&(u=this.combo(u),"string"==typeof u&&(u=[u])),c(u.shift(),function(){u.length?c(u.shift(),arguments.callee):r&&r()}),!0},_wrap:function(e,t){var n=this;return function(){var a=this,o=arguments;return 0===Object.keys(e).length?t(a,o):(e.css&&e.css&&n.loadResource(e.css,"css"),e.js?n.loadResource(e.js,"js",function(){t(a,o)}):t(a,o),void 0)}},onPageDefine:function(e){var t=e.resources;if(t){var n=e.startup,a=e.show;e.startup=this._wrap(t,function(t,o){(e.startup=n).apply(t,o),(e.show=a).apply(t,o)}),e.show=function(){}}},onViewExtend:function(e){var t=e.prototype,n=t.resources;if(n){var a=t.render;t.render=this._wrap(n,function(e,n){(t.render=a).apply(e,n)})}}}})(window,window.app);