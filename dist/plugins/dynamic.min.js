(function(e,n){var t=e.document,s=t.createElement("a"),o={};n.plugin.dynamic={loadResource:function(e,r,a){function i(){return"resource-"+Date.now()+"-"+Object.keys(o).length}function u(e){return 0===e.indexOf("http")?e:n.config.resourceBase+e}function c(e,n){if(!e)return n();s.href=u(e);var a=o[s.href]||(o[s.href]=i());if("js"===r||e.match(/\.js$/)){var c=document.createElement("script"),f=!1;c.id=a,c.async=!0,c.onload=c.onreadystatechange=function(){f||(f=!0,n&&n(e))},c.src=e,t.body.appendChild(c)}else if("css"===r||e.match(/\.css$/)){var l=document.createElement("link");l.id=a,l.type="text/css",l.rel="stylesheet",l.href=e,t.body.appendChild(l),n()}}2===arguments.length&&"function"==typeof arguments[1]&&(a=arguments[1],r=null),"string"==typeof e&&(e=[e]);var f=[];return e.forEach(function(e){s.href=u(e),o[s.href]||(o[s.href]=i(),f.push(e))}),this.combo&&(f=this.combo(f),"string"==typeof f&&(f=[f])),c(f.shift(),function(){f.length?c(f.shift(),arguments.callee):a&&a()}),!0},_wrap:function(e,n){var t=this;return function(){var s=this,o=arguments;return 0===Object.keys(e).length?n(s,o):(e.css&&e.css&&t.loadResource(e.css,"css"),e.js?t.loadResource(e.js,"js",function(){n(s,o)}):n(s,o),void 0)}},onPageDefine:function(e){var n=e.resources;if(n){var t=e.startup,s=e.show;e.startup=this._wrap(n,function(n,o){(e.startup=t).apply(n,o),(e.show=s).apply(n,o)}),e.show=function(){}}},onViewExtend:function(e){var n=e.resources;if(n){var t=e.render;e.render=this._wrap(n,function(n,s){(e.render=t).apply(n,s)})}}}})(window,window.app);