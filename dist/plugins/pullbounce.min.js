(function(e,n){var t=e.document,o=(n.config,50);n.plugin.pullbounce={_options:null,_page:null,_pullType:!1,_onPullStart:function(){var e=this._page,n=this._options,t=e.el.parentNode;n.onPullDown&&(t.querySelector("#J_pullRefresh").style.visibility="visible"),n.onPullUp&&(t.querySelector("#J_pullUpdate").style.visibility="visible")},_onPullDown:function(e){var n=this._page,t=n.el.parentNode.querySelector("#J_pullRefresh span"),o=t.innerText;e>50&&"松开即刷新"!==o?t.innerText="松开即刷新":50>e&&"下拉可刷新"!==o&&(t.innerText="下拉可刷新")},_onPullUp:function(e){var n=this._page,t=n.el.parentNode.querySelector("#J_pullUpdate span"),o=t.innerText;e>50&&"松开即加载更多"!==o?t.innerText="松开即加载更多":50>e&&"上拉可加载更多"!==o&&(t.innerText="上拉可加载更多")},_onPullEnd:function(){n.scroll.refresh(),n.scroll.resumeBounce()},handleEvent:function(e){var t=this,l=this._page,i=this._options,s=n.scroll.getBoundaryOffset();"panstart"===e.type?this._onPullStart():"pulldown"===e.type?(this._pullType=s>o?"PullDown":!1,this._onPullDown(s)):"pullup"===e.type?(this._pullType=s>o?"PullUp":!1,this._onPullUp(s)):"panend"===e.type&&s&&this._pullType&&(n.scroll.stopBounce(),setTimeout(function(){var e=i["on"+t._pullType];"string"==typeof e&&(e=l[e]),e?e.call(l,t._onPullEnd):t._onPullEnd()},400))},onAppStart:function(){var e=t.styleSheets[0];e.addRule("#J_pullRefresh, #J_pullUpdate",["visibility: hidden;","width: 100%;","padding: 10px;","height: "+o+"px;","line-height: 30px;","box-sizing: border-box;","background-color: #FFF;","font-size: 12px;","color: #999;"].join(""))},onPageDefine:function(e,n){e.scroll={bounceTop:n.onPullDown?o:0,bounceBottom:n.onPullUp?o:0}},onPageStartup:function(e,n){e.el.innerHTML=(n.onPullDown?'<section id="J_pullRefresh"><span>下拉可刷新</span></section>':"")+'<section id="J_pullContent"></section>'+(n.onPullUp?'<section id="J_pullUpdate"><span>上拉可加载更多</span></section>':""),e.el=e.el.querySelector("#J_pullContent")},onPageShow:function(e,t){"J_pullContent"!==e.el.getAttribute("id")&&(e.el=e.el.querySelector("#J_pullContent")),this._page=e,this._options=t,this._pullType=!1,t.onPullDown&&n.scroll.addEventListener("pulldown",this,!1),t.onPullUp&&n.scroll.addEventListener("pullup",this,!1),n.scroll.addEventListener("panstart",this,!1),n.scroll.addEventListener("panend",this,!1)},onPageHide:function(e,t){t.onPullDown&&n.scroll.removeEventListener("pulldown",this,!1),t.onPullUp&&n.scroll.removeEventListener("pullup",this,!1),n.scroll.removeEventListener("panstart",this,!1),n.scroll.removeEventListener("panend",this,!1)}}})(window,window.app);