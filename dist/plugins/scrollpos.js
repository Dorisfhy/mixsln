(function(a,b){function e(){return d?d.fn.getScrollTop():c.body.scrollTop}function g(a){d?d.fn.scrollTo(a):scrollTo(0,a)}var d,c=a.document;b.plugin.scrollpos={_options:null,_setPos:function(a){this._options.state.pos="number"==typeof a?a:e()},_transitonEnd:function(){this._options.page.transitonEnd=!0},reset:function(a){function e(){g(c.state.pos)}var c=this._options,d=b.navigation.getState().move;null!=a?(this._setPos(a),e()):c.page.transitonEnd?e():b.component.once(d+"TransitionEnd",e)},on:function(a,e){d=b.component.get("scroll"),this._options=e,this._options.page.transitonEnd=!1,this._setPos=this._setPos.bind(this),b.component.on("forwardTransitionEnd backwardTransitionEnd",this._transitonEnd,this),d?b.component.on("scrollEnd",this._setPos):c.addEventListener("touchend",this._setPos)},off:function(){b.component.off("forwardTransitionEnd backwardTransitionEnd",this._transitonEnd,this),d?b.component.off("scrollEnd",this._setPos):c.removeEventListener("touchend",this._setPos)}}})(window,window.app);