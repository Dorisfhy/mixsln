(function(e,t){function n(){return t.scroll?t.scroll.getScrollTop():s.body.scrollTop}function o(){return t.scroll?t.scroll.getViewHeight():s.body.clientHeight}function l(e){return e.offsetParent||e.parentNode}function i(e){var n,o=getComputedStyle(e),i=parseFloat(e.getAttribute("height")||e.offsetHeight||o.height),s=parseFloat(e.offsetTop),r=0;for(n=l(e);n&&n!=t.scroll;)s+=parseFloat(n.offsetTop||0),n=l(n);return{top:s+r,bottom:s+i+r}}var s=e.document,r=e.navigator,c=r.appVersion,a=(/android/gi.test(c),/iphone|ipad/gi.test(c));t.plugin.lazyload={_el:null,_options:null,_startScrollTime:0,_endScrollTime:0,_scrollFlickTime:200,handleEvent:function(e){"scrollend"===e.type||"scroll"===e.type?this.check():"touchstart"===e.type?this._checkStart():"touchend"===e.type&&this._checkEnd()},_checkStart:function(){this._startScrollTime=Date.now()},_checkEnd:function(){var e=this;if(this._endScrollTime=Date.now(),this._endScrollTime-this._startScrollTime<this._scrollFlickTime)if(a)window.addEventListener("scroll",this,!1);else var t=s.body.scrollTop,n=setInterval(function(){t===s.body.scrollTop?(clearInterval(n),e.check()):t=s.body.scrollTop},50);else this.check()},check:function(){for(var e=this._options,l=e.dataAttr||"data-src",s=t.scroll.querySelectorAll("img["+l+"]"),r=n(),c=n()+o(),a=0;s.length>a;a++){var d,u=s[a],h=i(u);(h.top>r&&c>h.top||h.bottom>r&&c>h.bottom)&&(d=u.getAttribute(l),d&&(u.setAttribute("src",d),u.removeAttribute(l)))}},onPageStartup:function(e,n){e.el,this._options=n,t.scroll?t.scroll.addEventListener("scrollend",this,!1):(s.addEventListener("touchstart",this,!1),s.addEventListener("touchend",this,!1))},onPageTeardown:function(e){e.el,t.scroll?t.scroll.removeEventListener("scrollend",this):(s.removeEventListener("touchstart",this),s.removeEventListener("touchend",this))}}})(window,window.app);