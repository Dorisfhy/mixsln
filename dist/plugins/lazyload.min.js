(function(e,t){function n(e){return e&&e.getScrollTop?e.getScrollTop():s.body.scrollTop}function o(e){return e&&e.refresh?e.parentNode.offsetHeight:s.body.clientHeight}function i(e){return e.offsetParent||e.parentNode}function r(e,t){var n,o=getComputedStyle(e),r=parseFloat(e.getAttribute("height")||e.offsetHeight||o.height),l=parseFloat(e.offsetTop),a=0;if(!t.refresh)for(n=i(t);n&&n!=s.body;)a+=parseFloat(n.offsetTop||0),n=i(n);for(n=i(e);n&&n!=t;)l+=parseFloat(n.offsetTop||0),n=i(n);return{top:l+a,bottom:l+r+a}}var s=e.document,l=e.navigator,a=l.appVersion,c=(/android/gi.test(a),/iphone|ipad/gi.test(a));t.plugin.lazyload={_el:null,_options:null,_startScrollTime:0,_endScrollTime:0,_scrollFlickTime:200,handleEvent:function(e){"scrollend"===e.type||"scroll"===e.type?this.check():"touchstart"===e.type?this._checkStart():"touchend"===e.type&&this._checkEnd()},_checkStart:function(){this._startScrollTime=Date.now()},_checkEnd:function(){var e=this;if(this._endScrollTime=Date.now(),this._endScrollTime-this._startScrollTime<this._scrollFlickTime)if(c)window.addEventListener("scroll",this,!1);else var t=s.body.scrollTop,n=setInterval(function(){t===s.body.scrollTop?(clearInterval(n),e.check()):t=s.body.scrollTop},50);else this.check()},check:function(){for(var e=this._el,t=this._options,i=t.dataAttr||"data-src",s=e.querySelectorAll("img["+i+"]"),l=n(e),a=n(e)+o(e),c=0;s.length>c;c++){var d,h=s[c],u=r(h,e);(u.top>l&&a>u.top||u.bottom>l&&a>u.bottom)&&(d=h.getAttribute(i),d&&(h.setAttribute("src",d),h.removeAttribute(i)))}},onPageStartup:function(e,t){var n=this._el=e.el;this._options=t,n.refresh?n.addEventListener("scrollend",this,!1):(s.addEventListener("touchstart",this,!1),s.addEventListener("touchend",this,!1))},onPageTeardown:function(){var e=this._el;e.refresh?e.removeEventListener("scrollend",this):(s.removeEventListener("touchstart",this),s.removeEventListener("touchend",this))}}})(window,window.app);