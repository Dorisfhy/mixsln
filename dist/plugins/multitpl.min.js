(function(t,e){var n=e.util,i=t.document;e.view.fn.parseMultiTemplate=function(t){var e,a=i.createElement("div"),o={};return a.innerHTML=t,e=a.querySelectorAll('script[type="text/template"]'),0===e.length?o.main=t:n.each(e,function(t){var e=t.getAttribute("id");o[e]=t.innerHTML}),o},e.view.fn.compileMultiTemplate=function(t,e){var i=this,a={};return n.each(t,function(t,e){i.compileTemplate(t,function(t){a[e]=t})}),e?(e(a),void 0):a},e.view.fn.loadTemplate=function(t,e){var i=this;1===arguments.length&&(e=arguments[0],t=i.template||i.templates),n.isTypeof(t,"string")?n.loadFile(t,function(t,e){var n=i.parseMultiTemplate(t);i.compileMultiTemplate(n,e)}):t?i.compileMultiTemplate(t,e):e()},e.view.fn.renderTemplate=function(){return this.renderMultiTemplate.apply(this,arguments)},e.view.fn.renderMultiTemplate=function(t,a){var o,r=this,c=e.config.templateEngine,s=r.compiledTemplate,l={};return n.each(t,function(t,e){var n=s[e];n&&(l[e]=c&&c.render?c.render(n,t):n)}),l.main&&(o=i.createElement("div"),o.innerHTML=l.main,n.each(l,function(t,e){if("main"!==e){var n=o.querySelector("#"+e);n&&(n.innerHTML=t)}}),l=o.innerHTML),a?(a(l),void 0):l},e.view.fn.renderSingleTemplate=function(t,e,n){var i=this,a={};return a[t]=e,n?(i.renderMultiTemplate(a,function(e){n(e[t])}),void 0):i.renderMultiTemplate(a)[t]},e.plugin.multiTemplate=!0})(window,window.app);