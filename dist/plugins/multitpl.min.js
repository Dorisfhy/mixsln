(function(e,t){var n=t.util,i=e.document;t.view.fn.parseMultiTemplate=function(e){var t,o=i.createElement("div"),r={};return o.innerHTML=e,t=o.querySelectorAll('script[type="text/template"]'),0===t.length?r.main=e:n.each(t,function(e){var t=e.getAttribute("id");r[t]=e.innerHTML}),r},t.view.fn.compileMultiTemplate=function(e,t){var i=this,o={};return n.each(e,function(e,t){i.compileTemplate(e,function(e){o[t]=e})}),t?(t(o),void 0):o},t.view.fn.loadTemplate=function(e,t){var i=this;1===arguments.length&&(t=arguments[0],e=i.template||i.templates),n.isTypeof(e,"string")?n.loadFile(e,function(e,t){var n=i.parseMultiTemplate(e);i.compileMultiTemplate(n,t)}):e?i.compileMultiTemplate(e,t):t()},t.view.fn.renderTemplate=function(){return this.renderMultiTemplate.apply(this,arguments)},t.view.fn.renderMultiTemplate=function(e,o){var r,l=this,a=t.config.templateEngine,s=l.compiledTemplate,c={};return n.each(e,function(e,t){var n=s[t];n&&(c[t]=a&&a.render?a.render(n,e):n)}),c.main&&(r=i.createElement("div"),r.innerHTML=c.main,n.each(c,function(e,t){if("main"!==t){var n=r.querySelector("#"+t);n&&(n.innerHTML=e)}}),c=r.innerHTML),o?(o(c),void 0):c},t.view.fn.renderSingleTemplate=function(e,t,n){var i=this,o={};return o[e]=t,n?(i.renderMultiTemplate(o,function(t){n(t[e])}),void 0):i.renderMultiTemplate(o)[e]},t.plugin.multiTemplate=!0})(window,window.app);