(function(e,t){var n=t.util,i=e.document;t.view.fn.parseMultiTemplate=function(e){var t,l=i.createElement("div"),o={};return l.innerHTML=e,t=l.querySelectorAll('script[type="text/template"]'),0===t.length?o.main=e:n.each(t,function(e){var t=e.getAttribute("id");o[t]=e.innerHTML}),o},t.view.fn.compileMultiTemplate=function(e,t){var i=this,l={};return n.each(e,function(e,t){i.compileTemplate(e,function(e){l[t]=e})}),t?(t(l),void 0):l},t.view.fn.loadTemplate=function(e,t){var i=this;1===arguments.length&&(t=arguments[0],e=i.template||i.templates),n.isTypeof(e,"string")?n.loadFile(e,function(e,t){var n=i.parseMultiTemplate(e);i.compileMultiTemplate(n,t)}):e?i.compileMultiTemplate(e,t):t()},t.view.fn.renderTemplate=function(){return this.renderMultiTemplate.apply(this,arguments)},t.view.fn.renderMultiTemplate=function(e,l){var o,r=this,c=t.config.templateEngine,a=r.compiledTemplate,s={};return n.each(e,function(e,t){var n=a[t];n&&(s[t]=c&&c.render?c.render(n,e):n)}),s.main&&(o=i.createElement("div"),o.innerHTML=s.main,n.each(s,function(e,t){if("main"!==t){var n=o.querySelector("#"+t);n&&(n.innerHTML=e)}}),s=o.innerHTML),l?(l(s),void 0):s},t.view.fn.renderSingleTemplate=function(e,t,n){var i=this,l={};return l[e]=t,n?(i.renderMultiTemplate(l,function(t){n(t[e])}),void 0):i.renderMultiTemplate(l)[e]},t.plugin.multiTemplate=!0})(window,window.app);