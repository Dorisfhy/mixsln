(function(t,e){var n=e.util,i=t.document;e.view.fn.parseMultiTemplate=function(t){var e,o=i.createElement("div"),r={};return o.innerHTML=t,e=o.querySelectorAll('script[type="text/template"]'),0===e.length?r.main=t:n.each(e,function(t){var e=t.getAttribute("id");r[e]=t.innerHTML}),r},e.view.fn.compileMultiTemplate=function(t,e){var i=this,o={};return n.each(t,function(t,e){i.compileTemplate(t,function(t){o[e]=t})}),e?(e(o),void 0):o},e.view.fn.loadTemplate=function(t,e){var i=this;1===arguments.length&&(e=arguments[0],t=i.template||i.templates),n.isTypeof(t,"string")?n.loadFile(t,function(t,e){var n=i.parseMultiTemplate(t);i.compileMultiTemplate(n,e)}):t?i.compileMultiTemplate(t,e):e()},e.view.fn.renderTemplate=function(){return this.renderMultiTemplate.apply(this,arguments)},e.view.fn.renderMultiTemplate=function(t,o){var r,c=this,l=e.config.templateEngine,a=c.compiledTemplate,s={};return n.each(t,function(t,e){var n=a[e];n&&(s[e]=l&&l.render?l.render(n,t):n)}),s.main&&(r=i.createElement("div"),r.innerHTML=s.main,n.each(s,function(t,e){if("main"!==e){var n=r.querySelector("#"+e);n&&(n.innerHTML=t)}}),s=r.innerHTML),o?(o(s),void 0):s},e.view.fn.renderSingleTemplate=function(t,e,n){var i=this,o={};return o[t]=e,n?(i.renderMultiTemplate(o,function(e){n(e[t])}),void 0):i.renderMultiTemplate(o)[t]},e.plugin.multiTemplate=!0})(window,window.app);