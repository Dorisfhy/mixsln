(function(e,t){var n=t.util,a=e.document;t.view.fn.parseMultiTemplate=function(e){var t,i=a.createElement("div"),o={};return i.innerHTML=e,t=i.querySelectorAll('script[type="text/template"]'),0===t.length?o.main=e:n.each(t,function(e){var t=e.getAttribute("id");o[t]=e.innerHTML}),o},t.view.fn.compileMultiTemplate=function(e,t){var a=this,i={};return n.each(e,function(e,t){a.compileTemplate(e,function(e){i[t]=e})}),t?(t(i),void 0):i},t.view.fn.loadTemplate=function(e,t){var a=this;1===arguments.length&&(t=arguments[0],e=a.template||a.templates),n.isTypeof(e,"string")?n.loadFile(e,function(e,t){var n=a.parseMultiTemplate(e);a.compileMultiTemplate(n,t)}):e?a.compileMultiTemplate(e,t):t()},t.view.fn.renderTemplate=function(){return this.renderMultiTemplate.apply(this,arguments)},t.view.fn.renderMultiTemplate=function(e,i){var o,r=this,s=t.config.templateEngine,l=r.compiledTemplate,c={};return n.each(e,function(e,t){var n=l[t];n&&(c[t]=s&&s.render?s.render(n,e):n)}),c.main&&(o=a.createElement("div"),o.innerHTML=c.main,n.each(c,function(e,t){if("main"!==t){var n=o.querySelector("#"+t);n&&(n.innerHTML=e)}}),c=o.innerHTML),i?(i(c),void 0):c},t.view.fn.renderSingleTemplate=function(e,t,n){var a=this,i={};return i[e]=t,n?(a.renderMultiTemplate(i,function(t){n(t[e])}),void 0):a.renderMultiTemplate(i)[e]},t.plugin.multiTemplate=!0})(window,window.app);