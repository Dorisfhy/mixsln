define("#mix/sln/0.1.0/modules/scroll",["mix/core/0.3.0/base/reset","mix/core/0.3.0/base/class","mix/sln/0.1.0/modules/gesture","mix/sln/0.1.0/modules/transform"],function(a){function k(a){var b=a.parentNode,c=getComputedStyle(b),d=0-a.scrollHeight+b.offsetHeight-parseInt(c.paddingTop)-parseInt(c.paddingBottom);return d>0&&(d=0),d}a("mix/core/0.3.0/base/reset");var d=window,e=d.document,g=(d.navigator,a("mix/core/0.3.0/base/class")),h=a("mix/sln/0.1.0/modules/gesture"),i=a("mix/sln/0.1.0/modules/transform"),j=!1,l={element:{position:"relative","-webkit-backface-visibility":"hidden","-webkit-transform-style":"preserve-3d"}};Object.each(l,function(a,b){var c="";Object.each(a,function(a,b){c+=b+":"+a+";"}),l[b].cssText=c});var m=g.create({initialize:function(a){var b=this;b._el=a,b._gesture=new h(a),b._originalY=null,b._currentY=null,b._preventBodyTouch=b._preventBodyTouch.bind(b),b._onTouchStart=b._onTouchStart.bind(b),b._onPanStart=b._onPanStart.bind(b),b._onPan=b._onPan.bind(b),b._onPanEnd=b._onPanEnd.bind(b),b._onFlick=b._onFlick.bind(b),a.style.cssText=l.element.cssText,j||(j=!0,e.body.addEventListener("touchmove",b._preventBodyTouch,!1))},getElement:function(){return this._el},enable:function(){var a=this,b=a._el;a._gesture.enable(),b.addEventListener("touchstart",a._onTouchStart,!1),b.addEventListener("panstart",a._onPanStart,!1),b.addEventListener("pan",a._onPan,!1),b.addEventListener("panend",a._onPanEnd,!1),b.addEventListener("flick",a._onFlick,!1)},disable:function(){var a=this,b=a._el;a._gesture.disable(),b.removeEventListener("touchstart",a._onTouchStart),b.removeEventListener("panstart",a._onPanStart),b.removeEventListener("pan",a._onPan),b.removeEventListener("panend",a._onPanEnd),b.removeEventListener("flick",a._onFlick)},_preventBodyTouch:function(a){return a.preventDefault(),!1},_onTouchStart:function(){var b=this,c=b._el;c.style.webkitTransition="none",c.style.webkitTransform=getComputedStyle(c).webkitTransform,c.style.height="auto",c.style.height=c.offsetHeight+"px"},_onPanStart:function(){var b=this,c=b._el;b._originalY=i.getY(c)},_onPan:function(a){var f,b=this,c=b._el,d=k(c),e=b._originalY;f=b._currentY=e+a.displacementY,c.style.webkitTransform=f>0?i.getTranslate(0,f/2):d>f?i.getTranslate(0,(d-f)/2+f):i.getTranslate(0,f)},_onPanEnd:function(){var b=this,c=b._el,d=b._currentY,e=k(c),f=null;d>0&&(f=0),e>d&&(f=e),null!=f&&i.start(c,"0.4s","ease-out","0s",0,f)},_onFlick:function(a){var b=this,c=b._el,d=b._currentY,e=k(c);if(!(e>d||d>0)){var f=i.getY(c),g=a.valocityY;g>1.5&&(g=1.5),-1.5>g&&(g=-1.5);var h=.0015*(g/Math.abs(g)),j=g/h,l=f+j*g/2;if(l>0||e>l){var m=l>0?1:-1,n=l>0?0:e;l=n,j=(m*Math.sqrt(2*h*(l-f)+g*g)-g)/h,v=g-h*j,i.start(c,j.toFixed(0)+"ms","cubic-bezier("+i.getBezier(-g/h,-g/h+j)+")","0s",0,l.toFixed(0),function(){g=v,f=l,h=.0045*(g/Math.abs(g)),j=g/h,l=f+j*g/2,i.start(c,j.toFixed(0)+"ms","cubic-bezier("+i.getBezier(-j,0)+")","0s",0,l.toFixed(0),function(){i.start(c,"0.4s","ease-out","0s",0,n)})})}else i.start(c,j.toFixed(0)+"ms","cubic-bezier("+i.getBezier(-j,0)+")","0s",0,l.toFixed(0))}}});return m});