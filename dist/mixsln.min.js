(function(t,e){function n(t){return t+="",0>t.indexOf("px")&&0>t.indexOf("%")&&"0"!==t&&(t+="px"),t}function a(t){return t+="",0>t.indexOf("deg")&"0"!==t&&(t+="deg"),t}function i(t,e){return e||(e="-"),t.replace(/[a-z][A-Z]/g,"$1"+e+"$2").toLowerCase()}var o=/^matrix3d\(\d+, \d+, \d+, \d+, \d+, \d+, \d+, \d+, \d+, \d+, \d+, \d+, ([-\d.]+), ([-\d.]+), [-\d.]+, \d+\)/,r=/^matrix\(\d+, \d+, \d+, \d+, ([-\d.]+), ([-\d.]+)\)$/,c=/^(translate|rotate|scale)(X|Y|Z|3d)?|(matrix)(3d)?|(perspective)|(skew)(X|Y)?$/i,s=(/android/gi.test(navigator.appVersion),/iphone|ipad/gi.test(navigator.appVersion),"WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix),l={translate:function(t,e,n,a,i,o,r){this.doTransition(t,{translate:[i,o]},{duration:e,timingFunction:n,delay:a,callback:r})},doTransition:function(t,e,o){var r,l=[o.duration,o.timingFunction||"ease",o.delay||"0s"].join(" "),u="",p=[],f={};for(var h in e){var d=e[h];if(r=h.match(c)){d instanceof Array||(d=[d]);var v=r[1]||r[3]||r[5]||r[6],g=r[2]||r[4]||r[7]||"";"translate"===v&&""===g&&s&&(g="3d",d.push(0)),"translate"===v?d=d.map(n):("rotate"===v||"skew"===v)&&(d=d.map(a)),u+=v+g+"("+d.join(",")+")"}else p.push(i(h)+" "+l),f[h]=d;u&&p.push("-webkit-transform "+l)}o.callback&&t.addEventListener("webkitTransitionEnd",function(e){t.removeEventListener("webkitTransitionEnd",arguments.callee,!1),e.srcElement===t&&setTimeout(o.callback,10)},!1),setTimeout(function(){t.style.webkitTransition=p.join(", "),u.length&&(t.style.webkitTransform=u);for(var e in f)t.style[e]=f[e]},10)},genCubicBezier:function(t,e){return[[(t/3+(t+e)/3-t)/(e-t),(t*t/3+2*t*e/3-t*t)/(e*e-t*t)],[(e/3+(t+e)/3-t)/(e-t),(e*e/3+2*t*e/3-t*t)/(e*e-t*t)]]},makeTranslateString:function(t,e){return t=n(t),e=n(e),s?"translate3d("+t+", "+e+", 0)":"translate("+t+", "+e+")"},getTransformOffset:function(t){var e,n,a={x:0,y:0},i=getComputedStyle(t).webkitTransform;return"none"!==i&&(n=i.indexOf("matrix3d")>-1?o:r,(e=i.match(n))&&(a.x=parseInt(e[1])||0,a.y=parseInt(e[2])||0)),a}};e.module.Animation=l})(window,window.app||(window.app={module:{},plugin:{}})),function(t,e){function n(t,e){e||(e={}),this._wrapEl=t,this._cacheLength=Math.max(e.cacheLength,1),this._cacheIndex=0;for(var n="",a=0;this._cacheLength>a;a++)n+='<div class="inactive" index="'+a+'"></div>';this._wrapEl.innerHTML='<div class="wrap">'+n+"</div>",this.setClassName()}var a={setClassName:function(){this.getActive().className="active",this._cacheLength>2?(this.getPrevious().className="inactive prev",this.getNext().className="inactive next"):this._cacheLength>1&&(this.getPrevious().className="inactive")},getActive:function(){var t=this._cacheIndex;return this._wrapEl.querySelector(".wrap > div:nth-child("+(t+1)+")")},getNext:function(){var t=(this._cacheIndex+1)%this._cacheLength;return this._wrapEl.querySelector(".wrap > div:nth-child("+(t+1)+")")},getPrevious:function(){var t=(this._cacheIndex-1+this._cacheLength)%this._cacheLength;return this._wrapEl.querySelector(".wrap > div:nth-child("+(t+1)+")")},next:function(){this._cacheLength>2&&(this.getPrevious().className="inactive"),this._cacheIndex=(this._cacheIndex+1)%this._cacheLength},previous:function(){this._cacheLength>2&&(this.getNext().className="inactive"),this._cacheIndex=(this._cacheIndex-1+this._cacheLength)%this._cacheLength},html:function(t){this.getActive().innerHTML=t}};for(var i in a)n.prototype[i]=a[i];e.module.Content=n}(window,window.app||(window.app={module:{},plugin:{}})),function(t){function e(t,e){for(var n=t;n;){if(n.contains(e)||n==e)return n;n=n.parentNode}return null}function n(t,e,n){var a=s.createEvent("HTMLEvents");if(a.initEvent(e,!1,!0),"object"==typeof n)for(var i in n)a[i]=n[i];for(;a.cancelBubble===!1&&t;)t.dispatchEvent(a),t=t.parentNode}function a(t,e,n,a,i,o,r,c){var s=Math.atan2(c-o,r-i)-Math.atan2(a-e,n-t),l=Math.sqrt((Math.pow(c-o,2)+Math.pow(r-i,2))/(Math.pow(a-e,2)+Math.pow(n-t,2))),u=[i-l*t*Math.cos(s)+l*e*Math.sin(s),o-l*e*Math.cos(s)-l*t*Math.sin(s)];return{rotate:s,scale:l,translate:u,matrix:[[l*Math.cos(s),-l*Math.sin(s),u[0]],[l*Math.sin(s),l*Math.cos(s),u[1]],[0,0,1]]}}function i(t){0===Object.keys(p).length&&(l.addEventListener("touchmove",o,!1),l.addEventListener("touchend",r,!1),l.addEventListener("touchcancel",c,!1));for(var a=0;t.changedTouches.length>a;a++){var i=t.changedTouches[a],s={};for(var f in i)s[f]=i[f];var h={startTouch:s,startTime:Date.now(),status:"tapping",element:t.srcElement,pressingHandler:setTimeout(function(e){return function(){"tapping"===h.status&&(h.status="pressing",n(e,"press",{touchEvent:t})),clearTimeout(h.pressingHandler),h.pressingHandler=null}}(t.srcElement),500)};p[i.identifier]=h}if(2==Object.keys(p).length){var d=[];for(var f in p)d.push(p[f].element);n(e(d[0],d[1]),"dualtouchstart",{touches:u.call(t.touches),touchEvent:t})}}function o(){for(var t=0;event.changedTouches.length>t;t++){var i=event.changedTouches[t],o=p[i.identifier];if(!o)return;var r=i.clientX-o.startTouch.clientX,c=i.clientY-o.startTouch.clientY,s=Math.sqrt(Math.pow(r,2)+Math.pow(c,2));"tapping"===o.status&&s>10&&(o.status="panning",n(o.element,"panstart",{touch:i,touchEvent:event}),Math.abs(r)>Math.abs(c)?(n(o.element,"horizontalpanstart",{touch:i,touchEvent:event}),o.isVertical=!1):(n(o.element,"verticalpanstart",{touch:i,touchEvent:event}),o.isVertical=!0)),"panning"===o.status&&(o.panTime=Date.now(),n(o.element,"pan",{displacementX:r,displacementY:c,touch:i,touchEvent:event}),o.isVertical?n(o.element,"verticalpan",{displacementY:c,touch:i,touchEvent:event}):n(o.element,"horizontalpan",{displacementX:r,touch:i,touchEvent:event}))}if(2==Object.keys(p).length){for(var l,u=[],f=[],h=[],t=0;event.touches.length>t;t++){var i=event.touches[t],o=p[i.identifier];u.push([o.startTouch.clientX,o.startTouch.clientY]),f.push([i.clientX,i.clientY])}for(var d in p)h.push(p[d].element);l=a(u[0][0],u[0][1],u[1][0],u[1][1],f[0][0],f[0][1],f[1][0],f[1][1]),n(e(h[0],h[1]),"dualtouch",{transform:l,touches:event.touches,touchEvent:event})}}function r(){if(2==Object.keys(p).length){var t=[];for(var a in p)t.push(p[a].element);n(e(t[0],t[1]),"dualtouchend",{touches:u.call(event.touches),touchEvent:event})}for(var i=0;event.changedTouches.length>i;i++){var s=event.changedTouches[i],h=s.identifier,d=p[h];if(d){if(d.pressingHandler&&(clearTimeout(d.pressingHandler),d.pressingHandler=null),"tapping"===d.status&&(d.timestamp=Date.now(),n(d.element,"tap",{touch:s,touchEvent:event}),f&&300>d.timestamp-f.timestamp&&n(d.element,"doubletap",{touch:s,touchEvent:event}),this.lastTap=d),"panning"===d.status){n(d.element,"panend",{touch:s,touchEvent:event});var v=Date.now()-d.startTime,g=(s.clientX-d.startTouch.clientX)/v,m=(s.clientY-d.startTouch.clientY)/v,w=s.clientX-d.startTouch.clientX,b=s.clientY-d.startTouch.clientY;300>v&&(n(d.element,"flick",{duration:v,velocityX:g,velocityY:m,displacementX:w,displacementY:b,touch:s,touchEvent:event}),d.isVertical?n(d.element,"verticalflick",{duration:v,velocityY:m,displacementY:b,touch:s,touchEvent:event}):n(d.element,"horizontalflick",{duration:v,velocityX:g,displacementX:w,touch:s,touchEvent:event}))}"pressing"===d.status&&n(d.element,"pressend",{touch:s,touchEvent:event}),delete p[h]}}0===Object.keys(p).length&&(l.removeEventListener("touchmove",o,!1),l.removeEventListener("touchend",r,!1),l.removeEventListener("touchcancel",c,!1))}function c(){if(2==Object.keys(p).length){var t=[];for(var a in p)t.push(p[a].element);n(e(t[0],t[1]),"dualtouchend",{touches:u.call(event.touches),touchEvent:event})}for(var i=0;event.changedTouches.length>i;i++)"panning"===gesture.status&&n(gesture.element,"panend",{touch:touch,touchEvent:event}),"pressing"===gesture.status&&n(gesture.element,"pressend",{touch:touch,touchEvent:event}),delete p[event.changedTouches[i].identifier];0===Object.keys(p).length&&(l.removeEventListener("touchmove",o,!1),l.removeEventListener("touchend",r,!1),l.removeEventListener("touchcancel",c,!1))}var s=t.document,l=s.documentElement,u=Array.prototype.slice,p={},f=null;l.addEventListener("touchstart",i,!1)}(window,window.app||(window.app={module:{},plugin:{}})),function(t,e){function n(){this._handlers={}}function a(t){var e=this;this._scope=t,this._source=new n,this._cache={},this._handler=function(t){for(var n=(t.type,t.args),a=e._cache[event],i=0;a.length>i;i+=2)a[i].apply(a[i+1],n)},r[t]=this}var i={addEventListener:function(t,e){var n,a=this._handlers;n=a[event]||(a[event]=[]),n.push(e)},removeEventListener:function(t,e){var n=this._handlers;n[event]&&(n[event]=n[event].filter(function(t){return t!=e}),n[event].length||delete n[event])},dispatchEvent:function(t){var e=this._handlers,n=t.type;e.hasOwnProperty(n)&&e[n].forEach(function(e){e(t)}),this["on"+n]&&this["on"+n](t)}};for(var o in i)n.prototype[o]=i[o];var r={},c=/\s+/,s={on:function(t,e,n){var a,i=this,o=i._cache,r=i._source;if(!e)return i;for(t=t.split(c);event=t.shift();)a=o[event]||(o[event]=[]),a.length||r.addEventListener(event,this._handler),a.push(e,n);return i},off:function(t,e,n){var a,i=this,o=i._cache,r=i._source;for(t=t?t.split(c):Object.keys(o);event=t.shift();){!(e||n)&&(o[event]=[]),a=o[event];for(var s=a.length-2;s>=0;s-=2)e&&a[s]!==e||n&&a[s+1]!==n||a.splice(s,2);a.length||(delete o[event],r.removeEventListener(event,this._handler))}return i},once:function(t,e,n){function a(){e.apply(this,arguments),i.off(t,a,n)}var i=this;return i.on(t,a,n)},after:function(t,e,n){function a(){for(var t in o)if(!o[t])return;e.apply(n)}var i=this,o={};return e?(t=t.split(c),t.forEach(function(t){o[t]=!1,i.once(t,function(){o[t]=!0,a()})}),void 0):i},trigger:function(t){var e,n=this,a=n._cache,i=n._source;for(t=t.split(c),e=Array.prototype.slice.call(arguments,1);event=t.shift();)n.log(event,e),a[event]&&i.dispatchEvent({type:event,args:e});return n},log:function(t,e){console.log("[Message]",{scope:this._scope,event:t,args:e})}};for(var o in s)a.prototype[o]=s[o];a.mixto=function(t,e){var n;n="string"==typeof e?r[e]||new a(e):e,t.prototype&&(t=t.prototype);for(var i in s)void function(e){t[i]=function(){e.apply(n,arguments)}}(s[i])},a.get=function(t){return r[t]||(r[t]=new a(t))},e.module.EventSource=n,e.module.MessageScope=a}(window,window.app||(window.app={module:{},plugin:{}})),function(t,e){function n(t,e){null!=e.id&&t.setAttribute("id",e.id),null!=e["class"]&&(t.className=e["class"]),null!=e.text&&(t.innerHTML=e.text),null!=e.bg&&(t.style.background=e.bg),null!=e.icon&&(t.innerHTML='<img src="'+e.icon+'" border="0" />'),t.style.display=e.hide===!0?"none":"",e.onChange&&e.onChange.call(t,e),e.handler&&(t.handler&&t.removeEventListener("click",t.handler,!1),t.addEventListener("click",t.handler=e.handler,!1))}function a(t,e){e||(e={}),this._wrapEl=t,this._animWrapEl=e.animWrapEl,this._backWrapEl=e.backWrapEl,this._funcWrapEl=e.funcWrapEl,this._titleWrapEl=e.titleWrapEl}var i=t.document,o={setTitle:function(t){this._titleWrapEl&&(this._titleWrapEl.innerHTML=t)},setButton:function(t){var e,a;"back"===t.type?(e=this._backWrapEl,a=e.querySelector("button")):"func"===t.type?(e=this._funcWrapEl,a=e.querySelector("#"+t.id)):t.id&&(a=this._wrapEl.querySelector("#"+t.id),a&&(e=a.parentNode)),!a&&e&&(a=i.createElement("button"),e.appendChild(a)),n(a,t)},getButton:function(t){return this._funcWrapEl.querySelector("button#"+t)},removeButton:function(t){if(t){if("string"==typeof t)var e=this.getButton(t);else if(t instanceof HTMLElement)var e=t;e&&(e.handler&&e.removeEventListener("click",e.handler),e.parentNode.removeChild(e))}else for(var n=this._funcWrapEl.querySelectorAll("button"),a=0;n.length>a;a++)this.removeButton(n[a])}};for(var r in o)a.prototype[r]=o[r];e.module.Navbar=a}(window,window.app||(window.app={module:{},plugin:{}})),function(t,e){function n(){var t=this;t.move=null,t.transition=null,t.datas=null,t._states=[],t._stateIdx=0,t._stateLimit=100}function a(t){return t.replace(f,"(P<$1>[^\\/]*?)").replace(h,"(P<$1>.*?)")}function i(t){var e=t.match(d),n={};return e&&e.forEach(function(t,e){n[t.replace(d,"$1")]=e}),n}function o(t){var e=t.split("&");return t={},e.forEach(function(e){if(e){var n=e.split("=");t[n[0]]=n[1]}}),t}function r(t){return t=t.replace(d,""),RegExp("^("+t+")("+v+".*?)?$")}function c(){return m.hash.slice(1)||""}function s(t){m.hash=t}function l(){var t=this;t._started=!1,t._routes={},t._stack=new n,w.mixto(this,"navigation")}var u={reset:function(){var t=this;t.move=null,t.transition=null,t.datas=null,t._states=[],t._stateIdx=0,t._stateLimit=100},pushState:function(t,e,a,i){var o=this,r=o._states,c=o._stateIdx,s=o._stateLimit,l=r.length,u=o.move,p=o.transition,f=o.datas,h=r[c-1],d=r[c+1],v={name:t,fragment:e,params:a||{},args:i||{},datas:f||{}};return null==u&&(p=u=!f&&n.isEquals(h,v)?"backward":"forward"),"backward"===u?0===c&&l>0?r.unshift(v):c>0&&(c--,v=h):"forward"===u&&(c===s-1?(r.shift(),r.push(v)):0===c&&0===l?r.push(v):!f&&n.isEquals(d,v)?(c++,v=d):n.isEquals(r[c],v)?v=r[c]:(c++,r.splice(c),r.push(v))),v.move=u,v.transition=p,v.index=c,o.move=null,o.transition=null,o.datas=null,o._stateIdx=c,v},getState:function(){return this._states[this._stateIdx]},getIndex:function(){return this._stateIdx}};for(var p in u)n.prototype[p]=u[p];n.isEquals=function(t,e){return t&&e?t.name!==e.name||t.fragment!==e.fragment?!1:!0:!1};var f=/\:(\w\w*)/g,h=/\*(\w\w*)/g,d=/P\<(\w\w*?)\>/g,v="!",g=t.history,m=t.location,w=e.module.MessageScope,b={getStack:function(){return this._stack},handleEvent:function(){var t,e,n=this,a=n._routes,i=!0;if(n._started){e=c();for(var o in a)if(t=a[o],t.routeReg.test(e)&&(i=!1,t.callback(e),t.last))break;i&&n.trigger("unmatched",e)}},addRoute:function(t,e,n){function c(e,a,i){var o=u._stack.pushState(t,e,a,i);n.callback&&n.callback(o),u.trigger(o.move,o)}var s,l,u=this;1===arguments.length&&(n=arguments[0],t=null,e=null),n||(n={}),n["default"]?this.on("unmatched",c):t&&e&&(e=a(e),s=i(e),l=r(e),u._routes[t]={routeReg:l,callback:function(t){var e=t.match(l).slice(2),n=o(e.pop()||""),a={};for(var i in s)a[i]=e[s[i]];c(t,a,n)},last:!!n.last})},removeRoute:function(t){this._routes[t]&&delete this._routes[t]},start:function(){return this._started?!1:(this._stack.reset(),this._started=!0,t.addEventListener("hashchange",this,!1),this.handleEvent(),!0)},stop:function(){return this._started?(this._routes={},this._started=!1,t.removeEventListener("hashchange",this,!1),!0):!1},push:function(t,e){var n=this,a=n._stack,i=a.getState(),o=[];if(e||(e={}),a.move="forward",a.transition="forward",t){if(!i||i.fragment!==t||e.data){if(e.type||(e.type="GET"),e.data||(e.data={}),"GET"===e.type.toUpperCase())for(var r in e.data)o.push(r+"="+e.data[r]);"POST"===e.type.toUpperCase()&&(a.datas=e.data),"backward"===e.transition&&(a.transition="backward"),s(t+(o.length?v+o.join("&"):""))}}else g.forward()},pop:function(t){var e=this,n=e._stack,a=n.getIndex();0!==a&&(n.move="backward",n.transition="backward",t&&"forward"===t.transition&&(n.transition="forward"),g.back())}};for(var p in b)l.prototype[p]=b[p];l.instance=new l,e.module.StateStack=n,e.module.Navigation=l}(window,window.app||(window.app={module:{},plugin:{}})),function(t,e){function n(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])}function a(t,e){function a(){}a.prototype=e.prototype;var i=new a;n(i,t.prototype),i.constructor=t,t.prototype=i}function i(){}var o=e.module.MessageScope,r=o.get("page"),c={},s={navigation:{push:function(t,e){r.trigger("navigation:push",t,e)},pop:function(){r.trigger("navigation:pop")},getParameter:function(t){var e;return r.once("navigation:getParameter:callback",function(t){e=t}),r.trigger("navigation:getParameter",t),e},getData:function(t){var e;return r.once("navigation:getData:callback",function(t){e=t}),r.trigger("navigation:getData",t),e},setData:function(t,e){r.trigger("navigation:setData",t,e)},setTitle:function(t){r.trigger("navigation:setTitle",t)},setButton:function(t){r.trigger("navigation:setButton",t)}},content:{html:function(t){r.trigger("content:html",t)},el:null,$el:null},startup:function(){},teardown:function(){}};for(var l in s)i.prototype[l]=s[l];i.fn={},i.define=function(t){function e(){i.apply(this,arguments),this.initialize&&this.initialize.apply(this,arguments),n(this,i.fn),n(this,t),o.mixto(this,"page."+this.name)}return a(e,i),c[t.name]=new e},i.get=function(t){return c[t]},e.module.Page=i}(window,window.app||(window.app={module:{},plugin:{}})),function(t,e){function n(t){this.url=t}t.document;var a={load:function(t,n){function a(t){n&&n(t)}var i=this,o=e.config.templateEngine;1===arguments.length?(n=arguments[0],t=i.url):i.url=t,o&&o.load&&"string"==typeof t?o.load(t,a):a(t)},compile:function(t){var n=this,a=e.config.templateEngine;return n.originTemplate=t,n.compiledTemplate=a&&a.compile&&"string"==typeof t?a.compile(t):t,n.compiledTemplate},render:function(t){var n=this,a=e.config.templateEngine,i=n.compiledTemplate;return n.content=a&&a.render&&"object"==typeof t&&i?a.render(i,t):i,n.content}};for(var i in a)n.prototype[i]=a[i];e.module.Template=n}(window,window.app||(window.app={module:{},plugin:{}})),function(t,e){function n(t,e){e||(e={}),this._wrapEl=t,e.html&&(this._wrapEl.innerHTML=e.html),e.height&&(this._wrapEl.style.height=e.height+"px")}t.document;var a={show:function(t,e){return e||(e={}),t&&(this._wrapEl.innerHTML=t),e.height&&(this._wrapEl.style.height=e.height+"px"),this._wrapEl.style.display="",this._wrapEl},hide:function(){return this._wrapEl.style.display="none",this._wrapEl}};for(var i in a)n.prototype[i]=a[i];e.module.Toolbar=n}(window,window.app||(window.app={module:{},plugin:{}})),function(t,e){function n(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])}function a(t,e){function a(){}a.prototype=e.prototype;var i=new a;n(i,t.prototype),i.constructor=t,t.prototype=i}function i(){var e,n,a=t.$;Object.defineProperty(this,"el",{get:function(){return e},set:function(t){var a;"string"==typeof t?e=o.querySelector(t):t instanceof HTMLElement&&(e=t),a&&(n=a(e))}}),Object.defineProperty(this,"$el",{get:function(){return n},set:function(t){n="string"==typeof t&&a?a(t):t,n&&(e=n[0])}})}var o=t.document,r={},c={render:function(){},destory:function(){}};for(var s in c)i.prototype[s]=c[s];i.fn={},i.extend=function(t){function e(){i.apply(this,arguments),this.initialize&&this.initialize.apply(this,arguments),n(this,i.fn),n(this,t)}return a(e,i),r[t.name]=e},i.get=function(t){return r[t]},e.module.View=i}(window,window.app||(window.app={module:{},plugin:{}})),function(t,e){function n(t,e,n,i){var o=(this.TYPE,a.getTransformOffset(t)),r={translate:{x:o.x,y:o.y}},c={translate:{x:o.x,y:o.y}};e=e.split(""),n(r,c,e[0],e[1]);for(var s in r)"translate"===s?(t.style.webkitTransition="",t.style.webkitTransform=a.makeTranslateString(r[s].x,r[s].y)):t.style[s]=r[s];c.translate=[c.translate.x,c.translate.y],t.style.webkitBackfaceVisibility="hidden",t.style.webkitTransformStyle="preserve-3d",a.doTransition(t,c,{duration:"0.4s",timingFunction:"ease",callback:function(){t.style.webkitBackfaceVisibility="initial",t.style.webkitTransformStyle="flat",i&&i()}})}var a=(t.document,e.module.Animation),i={L:"x",R:"x",T:"y",B:"y"},o={L:-1,R:1,T:-1,B:1},r={TYPE:{LEFT_IN:"LI",LEFT_OUT:"LO",RIGHT_IN:"RI",RIGHT_OUT:"RO",TOP_IN:"TI",TOP_OUT:"TO",BOTTOM_IN:"BI",BOTTOM_OUT:"BO"},move:function(t,e,n,i){var o=a.getTransformOffset(t);t.style.webkitBackfaceVisibility="hidden",t.style.webkitTransformStyle="preserve-3d",a.translate(t,"0.4s","ease","0s",o.x+e,o.y+n,function(){t.style.webkitBackfaceVisibility="initial",t.style.webkitTransformStyle="flat",i&&i()})},slide:function(t,e,a,r){n(t,e,function(t,e,n,r){var c=i[n],s=o[n];"I"===r?t.translate[c]+=s*a:e.translate[c]+=s*a},r)},"float":function(t,e,a,r){n(t,e,function(t,e,n,r){var c=i[n],s=o[n];"I"===r?(t.translate[c]+=s*a,t.opacity=0,e.opacity=1):(e.translate[c]+=s*a,t.opacity=1,e.opacity=0)},r)},fadeIn:function(t,e){n(t,"FI",function(t,e,n,a){"I"===a?(t.opacity=0,e.opacity=1):(t.opacity=1,e.opacity=0)},e)},fadeOut:function(t){n(t,"FO",function(t,e,n,a){"I"===a?(t.opacity=0,e.opacity=1):(t.opacity=1,e.opacity=0)},callback)},zoomIn:function(){},zoomOut:function(){}};e.module.Transition=r}(window,window.app||(window.app={module:{},plugin:{}})),function(e,n){function a(t){return 0-(t.bounceTop||0)}function i(t){var e=t.getBoundingClientRect(),n=t.parentNode.getBoundingClientRect(),a=0-e.height+n.height;return a>0&&(a=0),a+(t.bounceBottom||0)}function o(t,e,n){var a=_.createEvent("HTMLEvents");a.initEvent(e,!1,!0);for(var i in n)a[i]=n[i];t.dispatchEvent(a)}function r(t){if(!N){for(var e=t.srcElement;!e.boundScrollEvent;)e=e.parentNode||e.offsetParent;b=e.boundScrollElement,b&&(b.style.webkitTransition="",b.style.webkitTransform=getComputedStyle(b).webkitTransform)}}function c(t){return t.preventDefault(),!1}function l(){}function u(){!N&&b&&(y=x.getTransformOffset(b),E=a(b),T=i(b),S=2.5,N=!1,L=!1)}function p(t){if(!N&&b){var e=y.y+t.displacementY;if(e>E?(e=E+(e-E)/S,S*=1.003,S>4&&(S=4)):T>e&&(e=T-(T-e)/S,S*=1.003,S>4&&(S=4)),h(e)){if(e>E)var n="pulldown";else if(T>e)var n="pullup";o(b,n)}b.style.webkitTransition="",b.style.webkitTransform=x.makeTranslateString(y.x,e)}}function f(){if(!N&&b){var t=x.getTransformOffset(b).y;h(t)?g():w()}}function h(t){return t>E?t-E:T>t?T-t:void 0}function d(t){return t>E?t=E:T>t&&(t=T),t}function v(e){if(!N&&b){var n=x.getTransformOffset(b).y,a=.008*(e/Math.abs(e));t=e/a,s=n+t*e/2,o(b,"bouncestart"),x.translate(b,t.toFixed(0)+"ms","cubic-bezier("+x.genCubicBezier(-t,0)+")","0s",y.x,s.toFixed(0),g)}}function g(){if(!N&&b){var t=x.getTransformOffset(b).y;t=d(t),x.translate(b,"0.4s","ease-in-out","0s",y.x,t,function(){o(b,"bounceend"),w()})}}function m(t){if(!N&&b){var e,n,a,i,o,r,c,s=x.getTransformOffset(b).y;L=!0,s>E||T>s?v(e):(e=t.velocityY,e>1.5&&(e=1.5),-1.5>e&&(e=-1.5),n=.0015*(e/Math.abs(e)),a=e/n,i=s+a*e/2,i>E?(r=E-s,c=(e-Math.sqrt(-2*n*r+e*e))/n,o=e-n*c,x.translate(b,c.toFixed(0)+"ms","cubic-bezier("+x.genCubicBezier(-a,-a+c)+")","0s",y.x,E,function(){v(o)})):T>i?(r=T-s,c=(e+Math.sqrt(-2*n*r+e*e))/n,o=e-n*c,x.translate(b,c.toFixed(0)+"ms","cubic-bezier("+x.genCubicBezier(-a,-a+c)+")","0s",y.x,T,function(){v(o)})):x.translate(b,a.toFixed(0)+"ms","cubic-bezier("+x.genCubicBezier(-a,0)+")","0s",y.x,i.toFixed(0),w))}}function w(){!N&&b&&(L=!1,setTimeout(function(){L||o(b,"scrollend")},10))}var b,y,E,T,_=e.document,k=_.documentElement,x=n.module.Animation,S=2,L=!1,N=!1,O=!1,M={enable:function(t,e){var n=t.parentNode||t.offsetParent;return O||(O=!0,k.addEventListener("touchmove",c,!1)),n.boundScrollEvent||(n.boundScrollEvent=!0,n.addEventListener("touchstart",r,!1),n.addEventListener("touchend",l,!1),n.addEventListener("panstart",u,!1),n.addEventListener("pan",p,!1),n.addEventListener("panend",f,!1),n.addEventListener("flick",m,!1)),n.boundScrollElement=t,t.refresh||(t.getScrollHeight=function(){return t.scrollHeight-(t.bounceTop||0)-(t.bounceBottom||0)},t.getScrollTop=function(){var e=x.getTransformOffset(t);return-(e.y+(t.bounceTop||0))},t.refresh=function(){t.style.height="auto",t.style.height=t.offsetHeight+"px"},t.scrollTo=function(e){var n=x.getTransformOffset(t).x;e=d(-e-(t.bounceTop||0)),t.style.webkitTransition="",t.style.webkitTransform=x.makeTranslateString(n,e)},t.scollToElement=function(){},t.getBoundaryOffset=function(){var e=x.getTransformOffset(t).y;return h(e)},t.getViewHeight=function(){return a(t)-i(t)},t.stopBounce=function(){N=!0;var e,n=x.getTransformOffset(t).y,o=a(t),r=i(t);n>o+(t.bounceTop||0)?e=o+(t.bounceTop||0):r-(t.bounceBottom||0)>n&&(e=r-(t.bounceBottom||0)),null!=e&&x.translate(t,"0.4s","ease-in-out","0s",y.x,e)},t.resumeBounce=function(){N=!1;var e,n=x.getTransformOffset(t).y,o=a(t),r=i(t);n>o?e=o:r>n&&(e=r),null!=e&&x.translate(t,"0.4s","ease-in-out","0s",y.x,e)}),e&&(t.bounceTop=e.bounceTop,t.bounceBottom=e.bounceBottom),t.scrollTo(0),t},disable:function(t){var e=t.parentNode||t.offsetParent;e.boundScrollElement===t&&(e.boundScrollElement=null)}};n.module.Scroll=M}(window,window.app||(window.app={module:{},plugin:{}})),function(t,e){function n(t){var e=this,a=!0,r={};i.mixto(e,"model-"+o++),e.addProperty=function(i,o){Object.defineProperty(e,i,{get:function(){return r[i]||t[i]},set:function(o){r[i]&&(r[i].destory(),delete r[i]),null!=o&&(t[i]=o,"object"==typeof o&&(r[i]=new n(o),r[i].on("propertyChange",function(t){e.trigger("propertyChange",{target:t.target,value:t.value,name:t.name,path:i+"."+t.path})}))),!a&&e.trigger("propertyChange",{target:e,value:r[i]||t[i],name:i,path:i})}}),e[i]=o},e.update=function(t){if(t instanceof Array)for(var a=0;t.length>a;a++)t[a]instanceof n||this.addProperty(a,t[a]);else for(var i in t){if(e.hasOwnProperty(i))throw Error('property conflict "'+i+'"');!t.hasOwnProperty(i)||t[i]instanceof n||this.addProperty(i,t[i])}},e.destory=function(){for(var t in r)r[t].destory();e.off()},e.on("propertyChange",function(t){e.trigger("change:"+t.path,t.value)}),e.update(t),a=!1}function a(t){var e=this;!t instanceof Array||(e.length=t.length,e.push=function(n){t.push(n),e.length=t.length,e.addProperty(t.length-1,n)},e.pop=function(){var n=t.pop();return e.length=t.length,e[t.length]=null,n},n.call(e,t))}var i=e.module.MessageScope,o=0;e.module.Model=n,e.module.Collection=a}(window,window.app||(window.app={module:{},plugin:{}})),function(t,e){function n(t,e){return e||(e=a),e.querySelector(t)}var a=t.document,i=t.$,o=(e.module.Message,e.module.Navigation),r=(e.module.Template,e.module.View),c=e.module.Page,s=e.module.Navbar,l=e.module.Toolbar,u=e.module.Content,p=e.module.Scroll,f=e.module.Animation,h=e.module.Transition,d={extendView:[],definePage:[],switchNavigation:[],changeOrientation:[],appStart:[]};e.config={viewport:null,enableNavbar:!1,enableToolbar:!1,enableContent:!0,enableScroll:!1,enableTransition:!1,templateEngine:null},void function(){d.appStart.push(function(){var t=e.config;s||(t.enableNavbar=!1),l||(t.enableToolbar=!1),p||(t.enableScroll=!1),h||(t.enableTransition=!1),t.enableNavbar===!0&&(t.enableNavbar={}),t.enableToolbar===!0&&(t.enableToolbar={}),t.enableScroll===!0&&(t.enableScroll={}),t.enableTransition===!0&&(t.enableTransition={}),"object"!=typeof t.enableContent&&(t.enableContent={})})}(),void function(){d.appStart.push(function(){})}(),void function(){var t=d.definePage,e=d.switchNavigation,n=o.instance;t.push(function(t){name=t.name,route=t.route,route?"string"==typeof route&&(route={name:name,text:route}):route={name:name,"default":!0},n.addRoute(route.name,route.text,{"default":route["default"],callback:route.callback,last:route.last})}),d.appStart.push(function(){n.on("forward backward",function(t){var n=c.get(t.name);e.forEach(function(e){e(t,n)})})})}(),void function(){function t(){var t=e.config;c_navbar=t.enableNavbar,c_toolbar=t.enableToolbar,c_content=t.enableContent;var n=t.viewport.offsetHeight;c_navbar&&(n-=c_navbar.wrapEl.offsetHeight),c_toolbar&&(n-=c_toolbar.wrapEl.offsetHeight),c_content.wrapEl.style.height=n+"px"}var a=d.switchNavigation,i=d.changeOrientation;a.push(function(t,n){var a=e.config,i=a.enableNavbar,o=a.enableToolbar,r=t.transition;if(i){var c=i.instance;c.setTitle(n.title),c.removeButton(),n.buttons&&n.buttons.forEach(function(e){"back"===e.type&&e.autoHide!==!1&&1>=t.index&&(e.hide=!0),c.setButton(e)}),i.titleWrapEl.parentNode===i.backWrapEl.parentNode&&i.titleWrapEl.parentNode===i.funcWrapEl.parentNode&&h.float(i.titleWrapEl.parentNode,"backward"===r?"LI":"RI",50)}if(o){var s=o.instance;n.toolbar?s.show(n.toolbar):s.hide()}}),a.push(t),i.push(t),d.appStart.push(function(){var t=e.config,a=t.enableNavbar,i=t.enableToolbar,o=t.enableContent;t.viewport||(t.viewport=n(".viewport")),a&&(t.viewport.className+=" enableNavbar",a.wrapEl||(a.wrapEl=n("header.navbar",t.viewport)),a.titleWrapEl||(a.titleWrapEl=n("header.navbar > ul > li:first-child",t.viewport)),a.backWrapEl||(a.backWrapEl=n("header.navbar > ul > li:nth-child(2)",t.viewport)),a.funcWrapEl||(a.funcWrapEl=n("header.navbar > ul > li:last-child",t.viewport)),a.instance=new s(a.wrapEl,a)),i&&(t.viewport.className+=" enableToolbar",i.wrapEl||(i.wrapEl=n("footer.toolbar",t.viewport)),i.instance=new l(i.wrapEl,i)),o.wrapEl||(o.wrapEl=n("section.content",t.viewport)),o.cacheLength||(o.cacheLength=5),o.instance=new u(o.wrapEl,{cacheLength:o.cacheLength})})}(),void function(){var t=d.switchNavigation;t.push(function(t,n){var a=e.config,i=a.enableContent.instance,o=a.enableTransition,r=a.enableScroll,c=t.move,s=t.transition;if("backward"===c?i.previous():i.next(),r&&(a.viewport.className+=" enableScroll",p.disable(r.wrapEl),r.wrapEl=i.getActive(),p.enable(r.wrapEl,n.scroll)),o){a.viewport.className+=" enableTransition";var l=o.wrapEl.offsetWidth*("backward"===s?1:-1),u=o.wrapEl.className+=" "+s,d=i.getActive(),v=parseInt(d.getAttribute("index"));"backward"===s&&v===c_content.cacheLength-1?console.log("moveback"):"forward"===s&&0===v&&console.log("movefor"),h.move(o.wrapEl,l,0,function(){o.wrapEl.className=u.replace(" "+s,""),o.wrapEl.style.left=-f.getTransformOffset(o.wrapEl).x+"px",i.setClassName()})}else i.setClassName()}),d.appStart.push(function(){var t=e.config,n=t.enableContent.instance,a=t.enableTransition,i=t.enableScroll;i&&(i.wrapEl=n.getActive()),a&&(a.wrapEl=n.getActive().parentNode)})}(),void function(){d.appStart.push(function(){})}(),void function(){d.appStart.push(function(){})}(),void function(){var t=d.switchNavigation,n=e.config,a=o.instance,r={navigation:{push:function(t,e){a.push(t,e)},pop:function(){a.pop()},getParameter:function(t){var e=a.getStack(),n=e.getState();return n.params[t]||n.args[t]||n.datas[t]},getData:function(t){var e=a.getStack(),n=e.getState();return n.datas[t]},setData:function(t,e){var n=a.getStack(),i=n.getState();i.datas[t]=e},setTitle:function(t){n.enableNavbar&&n.enableNavbar.instance.setTitle(t)},setButton:function(t){n.enableNavbar&&n.enableNavbar.instance.setButton(t)}},content:{html:function(t){n.enableContent.instance.html(t)}}};Object.defineProperty(r.content,"el",{get:function(){return i_content.getActive()}}),i&&Object.defineProperty(r.content,"$el",{get:function(){return i(i_content.getActive())}});for(var s in r)c.prototype[s]=r[s];t.push(function(t,e){e.startup()}),d.appStart.push(function(){})}(),void function(){d.appStart.push(function(){})}(),e.start=function(){d.appStart.forEach(function(t){t()}),o.instance.start()},e.extendView=function(t){var e=r.extend(t);return d.extendView.forEach(function(t){t(e)}),e},e.definePage=function(t){var e=c.define(t);return d.definePage.forEach(function(t){t(e)}),e}}(window,window.app||(window.app={module:{},plugin:{}}));