(function(t,n){var e=Object.prototype.toString,a=Object.prototype.hasOwnProperty,i=Array.prototype.slice,r=Array.prototype.forEach,o=function(){},s=/^\[object\s\s*(\w\w*)\s*\]$/,c={isTypeof:function(t,n){var a,i=e.call(t).toLowerCase(),r=s.exec(i);if(r)return a=r[1],n?a===n.toLowerCase():a},each:function(t,n,e){if(null!=t)if(a.call(t,"length"))r.call(t,n,e);else if("object"==typeof t)for(var i in t)a.call(t,i)&&n.call(e,t[i],i,t)},extend:function(t){var n=c.makeArray(arguments),t=n.shift();return c.each(n,function(n){c.each(n,function(n,e){t[e]=n})}),t},makeArray:function(t){return a.call(t,"length")?i.call(t):void 0},bindContext:function(t,n){var e,a=c.makeArray(arguments);if(!c.isTypeof(t,"function"))throw new TypeError;return a=a.slice(2),e=function(){var i,r,s=c.makeArray(arguments);return this instanceof e?(o.prototype=t.prototype,i=new o,r=t.apply(i,a.concat(s)),Object(r)===r?r:i):t.apply(n,a.concat(s))}},inherit:function(t,n){function e(){}e.prototype=n.prototype;var a=new e;c.extend(a,t.prototype),a.constructor=t,t.prototype=a},mix:function(t,n,e){c.each(n,function(n,a){c.isTypeof(n,"function")&&(t[a]=e?function(){n.apply(e,arguments)}:n)})},loadFile:function(n,e){var a=new t.XMLHttpRequest;a.onreadystatechange=function(){4===a.readyState&&(a.status>=200&&300>a.status||304===a.status)&&e(a.responseText)},a.open("GET",n,!0),a.send()}};n.util=n._module.util=c})(window,window.app||(window.app={_module:{},plugin:{}})),function(t,n){function e(t,n){var e,a,r;return(a=n.match(o))&&"*"===a[1]?(e=[],r=RegExp("^(@[^\\:]+\\:)?"+n+"$"),i.each(t,function(t,n){r.test(n)&&(e=e.concat(t))})):e=t[n],e}function a(t,n,e){var a=this;a._name=t||"anonymous",a._id=n||c++,a._cache={},a._defaultContext=e||a}var i=n.util,r=/\s+/,o=/^\@([^:]+)\:/,s=":",c=0,u={on:function(t,n,e){var a,i,c,u=this,l=u._cache,d=u._defaultContext;if(!n)return u;for(t&&(a=t.match(o))?t=t.split(s)[1]:a=[""],t=t.split(r);i=t.shift();)i=a[0]+i,c=l[i]||(l[i]=[]),c.push(n,e||d);return u},off:function(t,n,e){var a,i,c,u=this,l=u._cache,d="";if(!(t||n||e))return delete u._cache,u._cache={},u;for(t&&(d=t.match(o))?t=t.split(s)[1].split(r):(t=t?t.split(r):Object.keys(l),d=[""]);a=t.shift();)if(a=d[0]+a,i=l[a])if(n||e)for(c=i.length-2;c>=0;c-=2)n&&i[c]!==n||e&&i[c+1]!==e||i.splice(c,2);else delete l[a];return u},has:function(t,n,a){var i,r=this,o=r._cache,s=e(o,t);if(!s)return!1;if(!n&&!a)return!0;for(i=s.length-2;i>=0;i-=2)if(!(n&&s[i]!==n||a&&s[i+1]!==a))return!0;return!1},once:function(t,n,e){function a(){n.apply(this,arguments),i.off(t,a,e)}var i=this;i.on(t,a,e)},trigger:function(t){var n,a,i,o,s,c,u=this,l=u._cache,d=u._defaultContext,f=[];for(t=t.split(r),o=1,s=arguments.length;s>o;o++)f[o-1]=arguments[o];for(;n=t.shift();){if(u.log(n+":("+f.join(",")+")"),(a=l.all)&&(a=a.slice()),(i=e(l,n))&&(i=i.slice()),i)for(o=0,s=i.length;s>o;o+=2)i[o].apply(i[o+1]||d,f);if(a)for(c=[n].concat(f),o=0,s=a.length;s>o;o+=2)a[o].apply(a[o+1]||d,c)}return u},log:function(t){var n=this;console.log("[("+n._id+")"+n._name+"]",{id:n._id,name:n._name,msg:t})}};i.extend(a.prototype,u),a.mixto=function(t,n){t.prototype&&(t=t.prototype),i.mix(t,u,n)},a.instance=new a("global"),n._module.message=a}(window,window.app||(window.app={_module:{},plugin:{}})),function(t,n){function e(){var t=this,n=new i("router");i.mixto(this,n),t._handlers=[],t._options={},t._changeHanlder=a.bindContext(t._changeHanlder,t)}var a=n.util,i=n._module.message,r=t.location,o={_getHash:function(){return r.hash.slice(1)||""},_setHash:function(t){r.hash=t},_resetHandler:function(){var t=this,n=t._handlers;a.each(n,function(t){t.matched=!1})},_changeHanlder:function(){var t=this;t._resetHandler(),t.match()},start:function(n){var i=this;return e.started?!1:(e.started=!0,t.addEventListener("hashchange",i._changeHanlder,!1),n=a.extend(i._options,n||{}),n.firstMatch!==!1&&i.match(),!0)},stop:function(){var n=this;return e.started?(t.removeEventListener("hashchange",n._changeHanlder,!1),e.started=!1,n._options={},n._handlers=[],n._fragment=null,!0):!1},match:function(){var t,n,a=this,i=(a._options,a._handlers),r=!0;if(e.started){n=a._fragment=a._getHash();for(var o=0;i.length>o&&(t=i[o],t.matched||!t.route.test(n)||(r=!1,t.matched=!0,t.callback(n),!t.last));o++);r&&a.trigger("unmatched",n)}},add:function(t,n,e){var a=this,i=a._handlers;i.push({route:t,callback:n,matched:!1,last:!!e})},remove:function(t,n){for(var e=this,a=e._handlers,i=0;a.length>i;i++){var r=a[i];if(r.route.source===t.source&&(!n||r.callback===n))return a.splice(i,1)}},navigate:function(t){var t,n=this;e.started&&(t||(t=""),n._fragment!==t&&n._setHash(t))}};a.extend(e.prototype,o),e.started=!1,e.instance=new e,n._module.router=e}(window,window.app||(window.app={_module:{},plugin:{}})),function(t,n){function e(t){var n=this,e=new i("navigate");i.mixto(n,e),n._move=null,n._datas=null,n._routes={},n._states=[],n._stateIdx=0,n._stateLimit=t.stateLimit||100,n._router=t.useRouter}var a=n.util,i=n._module.message,r=n._module.router,o=/\:(\w\w*)/g,s=/\*(\w\w*)/g,c=/P\<(\w\w*?)\>/g,u="!",l=t.history,d={_convertParams:function(t){return t.replace(o,"(P<$1>[^\\/]*?)").replace(s,"(P<$1>.*?)")},_extractNames:function(t){var n=t.match(c),e={};return n&&a.each(n,function(t,n){e[t.replace(c,"$1")]=n}),e},_extractArgs:function(t){var n=t.split("&");return t={},a.each(n,function(n){if(n){var e=n.split("=");t[e[0]]=e[1]}}),t},_parseRoute:function(t){return t=t.replace(c,""),RegExp("^("+t+")("+u+".*?)?$")},_stateEquals:function(t,n){return t&&n?t.name!==n.name||t.fragment!==n.fragment?!1:!0:!1},_pushState:function(t,n,e,a){var i=this,r=i._states,o=i._stateIdx,s=i._stateLimit,c=r.length,u=i._move,l=i._transition,d=i._datas,f=r[o-1],p=r[o+1],h={name:t,fragment:n,params:e||{},args:a||{},datas:d||{}};return null==u&&(l=u=!d&&i._stateEquals(f,h)?"backward":"forward"),"backward"===u?0===o&&c>0?r.unshift(h):o>0&&(o--,h=f):"forward"===u&&(o===s-1?(r.shift(),r.push(h)):0===o&&0===c?r.push(h):!d&&i._stateEquals(p,h)?(o++,h=p):i._stateEquals(r[o],h)?h=r[o]:(o++,r.splice(o),r.push(h))),h.move=u,h.transition=l,i._move=null,i._datas=null,i._stateIdx=o,i.trigger(u,h),h},getState:function(){var t=this;return t._states[t._stateIdx]},getStateIndex:function(){var t=this;return t._stateIdx},addRoute:function(t,n,e){var i,r,o=this;1===arguments.length&&(e=arguments[0],t=null,n=null),e||(e={}),e["default"]?o._router.on("unmatched",function(n){var a=o._pushState(t,n);e.callback&&e.callback(a)}):t&&n&&(n=o._convertParams(n),i=o._extractNames(n),r=o._parseRoute(n),o._routes[t]=r,o._router.add(r,function(n){var s,c=n.match(r).slice(2),u=o._extractArgs(c.pop()||""),l={};a.each(i,function(t,n){l[n]=c[t]}),s=o._pushState(t,n,l,u),e.callback&&e.callback(s)},e.last))},removeRoute:function(t){var n=this,e=n._routes[t];e&&n._router.remove(e)},forward:function(t,n){var e=this,i=e._states,r=e._stateIdx,o=i[r]||{},s=[];e._move="forward",e._transition="forward",n||(n={}),t?(n.datas||o.fragment!==t)&&(n.args&&a.each(n.args,function(t,n){s.push(n+"="+t)}),n.datas&&(e._datas=n.datas),"backward"===n.transition&&(e._transition="backward"),e._router.navigate(t+(s.length?u+s.join("&"):""))):l.forward()},backward:function(t){var n=this,e=n._stateIdx;0!==e&&(n._move="backward",n._transition="backward",t||(t={}),"forward"===t.transition&&(n._transition="forward"),l.back())}};a.extend(e.prototype,d),e.instance=new e({useRouter:r.instance}),n._module.navigate=e}(window,window.app||(window.app={_module:{},plugin:{}})),function(t,n){function e(t,n,e,a,i,r,o,s){var c=Math.atan2(s-r,o-i)-Math.atan2(a-n,e-t),u=Math.sqrt((Math.pow(s-r,2)+Math.pow(o-i,2))/(Math.pow(a-n,2)+Math.pow(e-t,2))),l=[i-u*t*Math.cos(c)+u*n*Math.sin(c),r-u*n*Math.cos(c)-u*t*Math.sin(c)];return{rotate:c,scale:u,translate:l,matrix:[[u*Math.cos(c),-u*Math.sin(c),l[0]],[u*Math.sin(c),u*Math.cos(c),l[1]],[0,0,1]]}}function a(t,n,e){var a=document.createEvent("HTMLEvents");return a.initEvent(t,!0,!0),n&&(e?r.each(e,function(t){a[t]=n[t]}):r.extend(a,n)),a}function i(t){var n=this;n._el=t,n._myGestures={},n._lastTapTime=0/0,n._onStart=n._onStart.bind(n),n._onDoing=n._onDoing.bind(n),n._onEnd=n._onEnd.bind(n),n._onTap=n._onTap.bind(n)}var r=n.util,o=["screenX","screenY","clientX","clientY","pageX","pageY"],s=t.document,c={getElement:function(){return that._el},enable:function(){var t=this,n=t._el;n.addEventListener("touchstart",t._onStart,!1),n.addEventListener("tap",t._onTap,!1)},disable:function(){var t=this,n=t._el;n.removeEventListener("touchstart",t._onStart,!1),n.removeEventListener("tap",t._onTap,!1)},_onStart:function(t){var n=this,e=n._el,i=n._myGestures;if(0===Object.keys(i).length&&(s.body.addEventListener("touchmove",n._onDoing,!1),s.body.addEventListener("touchend",n._onEnd,!1)),r.each(t.changedTouches,function(t){var n={};for(var r in t)n[r]=t[r];var o={startTouch:n,startTime:Date.now(),status:"tapping",pressingHandler:setTimeout(function(){if("tapping"===o.status){o.status="pressing";var t=a("press",n);e.dispatchEvent(t)}clearTimeout(o.pressingHandler),o.pressingHandler=null},500)};i[t.identifier]=o}),2==Object.keys(i).length){var o=a("dualtouchstart");o.touches=JSON.parse(JSON.stringify(t.touches)),e.dispatchEvent(o)}},_onDoing:function(t){var n=this,i=n._el,s=n._myGestures;if(r.each(t.changedTouches,function(t){var n,e,r,c,u=s[t.identifier];u&&(n=t.clientX-u.startTouch.clientX,e=t.clientY-u.startTouch.clientY,r=Math.sqrt(Math.pow(n,2)+Math.pow(e,2)),"tapping"==u.status&&r>10&&(u.status="panning",c=a("panstart",t,o),i.dispatchEvent(c)),"panning"==u.status&&(c=a("pan",t,o),c.displacementX=n,c.displacementY=e,i.dispatchEvent(c)))}),2==Object.keys(s).length){var c,u,l=[],d=[];r.each(t.touchs,function(t){var n;(n=s[t.identifier])&&(l.push([n.startTouch.clientX,n.startTouch.clientY]),d.push([t.clientX,t.clientY]))}),c=e(l[0][0],l[0][1],l[1][0],l[1][1],d[0][0],d[0][1],d[1][0],d[1][1]),u=a("dualtouch",c),u.touches=JSON.parse(JSON.stringify(t.touches)),i.dispatchEvent(u)}},_onEnd:function(t){var n,e=this,i=e._el,r=e._myGestures;2==Object.keys(r).length&&(n=a("dualtouchend"),n.touches=JSON.parse(JSON.stringify(t.touches)),i.dispatchEvent(n));for(var c=0;t.changedTouches.length>c;c++){var u=t.changedTouches[c],l=u.identifier,d=r[l];if(d){if(d.pressingHandler&&(clearTimeout(d.pressingHandler),d.pressingHandler=null),"tapping"===d.status&&(n=a("tap",u,o),i.dispatchEvent(n)),"panning"===d.status){n=a("panend",u,o),i.dispatchEvent(n);var f=Date.now()-d.startTime;300>f&&(n=a("flick",u,o),n.duration=f,n.valocityX=(u.clientX-d.startTouch.clientX)/f,n.valocityY=(u.clientY-d.startTouch.clientY)/f,n.displacementX=u.clientX-d.startTouch.clientX,n.displacementY=u.clientY-d.startTouch.clientY,i.dispatchEvent(n))}"pressing"===d.status&&(n=a("pressend",u,o),i.dispatchEvent(n)),delete r[l]}}0==Object.keys(r).length&&(s.body.removeEventListener("touchend",e._onEnd),s.body.removeEventListener("touchmove",e._onDoing))},_onTap:function(t){var n=this,e=n._el,a=n._lastTapTime;if(500>Date.now()-a){var i=document.createEvent("HTMLEvents");i.initEvent("doubletap",!0,!0),r.each(o,function(n){i[n]=t[n]}),e.dispatchEvent(i)}n._lastTapTime=Date.now()}};r.extend(i.prototype,c),n._module.gesture=i}(window,window.app||(window.app={_module:{},plugin:{}})),function(t,n){function e(t,n){return[[(t/3+(t+n)/3-t)/(n-t),(t*t/3+2*t*n/3-t*t)/(n*n-t*t)],[(n/3+(t+n)/3-t)/(n-t),(n*n/3+2*t*n/3-t*t)/(n*n-t*t)]]}function a(t){var n,e;if(n=getComputedStyle(t).webkitTransform,"none"!==n){if(e=n.match(c))return parseInt(e[1])||0;if(e=n.match(u))return parseInt(e[1])||0}return 0}function i(t){var n,e;if(n=getComputedStyle(t).webkitTransform,"none"!==n){if(e=n.match(c))return parseInt(e[2])||0;if(e=n.match(u))return parseInt(e[2])||0}return 0}function r(t,n){return t+="",n+="",0>t.indexOf("%")&&"0"!==t&&(t+="px"),0>n.indexOf("%")&&"0"!==n&&(n+="px"),f?"translate3d("+t+", "+n+",0)":"translate("+t+", "+n+")"}function o(t,n,e){function a(n){i||n&&(n.srcElement!==t||n.propertyName!==l)||(i=!0,t.style.webkitTransition="none",t.removeEventListener("webkitTransitionEnd",a,!1),e&&setTimeout(e,50))}var i=!1;t.addEventListener("webkitTransitionEnd",a,!1)}function s(t,n,e,a,i,s,c){o(t,n,c),t.style.webkitTransition=[l,n,e,a].join(" "),t.style.webkitTransform=r(i,s)}var c=/^matrix3d\(\d+, \d+, \d+, \d+, \d+, \d+, \d+, \d+, \d+, \d+, \d+, \d+, ([\d-]+), ([-\d]+), [\d-]+, \d+\)/,u=/^matrix\(\d+, \d+, \d+, \d+, ([-\d]+), ([-\d]+)\)$/,l="-webkit-transform",d=navigator.appVersion,f=(/android/gi.test(d),/iphone|ipad/gi.test(d),"WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix);n._module.transform={getY:i,getX:a,getTranslate:r,getBezier:e,start:s}}(window,window.app||(window.app={_module:{},plugin:{}})),function(t,n){function e(t){var n=getComputedStyle(t.parentNode),e=0-t.offsetHeight+parseInt(n.height)-parseInt(n.paddingTop)-parseInt(n.paddingBottom);return e>0&&(e=0),e}function a(t){var n=this;n._wrap=t,n._scroller=t.children[0],n._gesture=new r(n._scroller),n._originalX=null,n._originalY=null,n._currentY=null,n._scrollHeight=null,n._scrollEndHandler=null,n._scrollEndCancel=!1,n._refreshed=!1,n._preventBodyTouch=i.bindContext(n._preventBodyTouch,n),n._onTouchStart=i.bindContext(n._onTouchStart,n),n._onPanStart=i.bindContext(n._onPanStart,n),n._onPan=i.bindContext(n._onPan,n),n._onPanEnd=i.bindContext(n._onPanEnd,n),n._onFlick=i.bindContext(n._onFlick,n),n._onScrollEnd=i.bindContext(n._onScrollEnd,n)}var i=n.util,r=n._module.gesture,o=n._module.transform,s=!1,c=t.document,u={enable:function(){var t=this,n=t._scroller;t._gesture.enable(),n.addEventListener("touchstart",t._onTouchStart,!1),n.addEventListener("panstart",t._onPanStart,!1),n.addEventListener("pan",t._onPan,!1),n.addEventListener("panend",t._onPanEnd,!1),n.addEventListener("flick",t._onFlick,!1),s||(s=!0,c.body.addEventListener("touchmove",t._preventBodyTouch,!1))},disable:function(){var t=this,n=t._scroller;t._gesture.disable(),n.removeEventListener("touchstart",t._onTouchStart,!1),n.removeEventListener("panstart",t._onPanStart,!1),n.removeEventListener("pan",t._onPan,!1),n.removeEventListener("panend",t._onPanEnd,!1),n.removeEventListener("flick",t._onFlick,!1),s&&(s=!1,c.body.removeEventListener("touchmove",t._preventBodyTouch,!1))},refresh:function(){this._scroller.style.height="auto",this._refreshed=!0},getHeight:function(){return this._scroller.offsetHeight},getTop:function(){return-o.getY(this._scroller)},to:function(t){var n=this,a=n._scroller,i=o.getX(a),r=e(a);t=-t,r>t?t=r:t>0&&(t=0),a.style.webkitTransform=o.getTranslate(i,t),n._onScrollEnd()},_preventBodyTouch:function(t){return t.preventDefault(),!1},_onTouchStart:function(){var t=this,n=t._scroller;n.style.webkitTransition="none",n.style.webkitTransform=getComputedStyle(n).webkitTransform,t._refreshed&&(t._refreshed=!1,t._scrollHeight=n.offsetHeight,n.style.height=t._scrollHeight+"px")},_onPanStart:function(){var t=this,n=t._scroller;t._originalX=o.getX(n),t._originalY=o.getY(n)},_onPan:function(t){var n=this,a=n._scroller,i=e(a),r=n._originalX,s=n._originalY,c=n._currentY=s+t.displacementY;a.style.webkitTransform=c>0?o.getTranslate(r,c/2):i>c?o.getTranslate(r,(i-c)/2+c):o.getTranslate(r,c)},_onPanEnd:function(){var t=this,n=t._scroller,a=t._originalX,i=t._currentY,r=e(n),s=null;i>0&&(s=0),r>i&&(s=r),null!=s?o.start(n,"0.4s","ease-out","0s",a,s,t._onScrollEnd):t._onScrollEnd()},_onFlick:function(t){var n=this,a=n._scroller,i=n._originalX,r=n._currentY,s=e(a);if(n._scrollEndCancel=!0,!(s>r||r>0)){var c=o.getY(a),u=t.valocityY;u>1.5&&(u=1.5),-1.5>u&&(u=-1.5);var l=.0015*(u/Math.abs(u)),d=u/l,f=c+d*u/2;if(f>0||s>f){var p=f>0?1:-1,h=f>0?0:s;f=(f-h)/2+h,d=(p*Math.sqrt(2*l*(f-c)+u*u)-u)/l,v=u-l*d,o.start(a,d.toFixed(0)+"ms","cubic-bezier("+o.getBezier(-u/l,-u/l+d)+")","0s",i,f.toFixed(0),function(){u=v,c=f,l=.0045*(u/Math.abs(u)),d=-u/l,f=h,o.start(a,(0-d).toFixed(0)+"ms","cubic-bezier("+o.getBezier(-d,0)+")","0s",i,f.toFixed(0),n._onScrollEnd)})}else o.start(a,d.toFixed(0)+"ms","cubic-bezier("+o.getBezier(-d,0)+")","0s",i,f.toFixed(0),n._onScrollEnd)}},_onScrollEnd:function(){var t=this;t._scrollEndCancel=!1,setTimeout(function(){t._scrollEndCancel||t._scrollEndHandler&&t._scrollEndHandler()},10)}};i.extend(a.prototype,u),n._module.scroll=a}(window,window.app||(window.app={_module:{},plugin:{}})),function(t,n){function e(){var t=this,n=new i("component");i.mixto(t,n)}var a=n.util,i=n._module.message,r=n._module.scroll,o=n._module.transform,s={},c=function(t,n){t.fn||(t.fn={}),a.extend(t.fn,n)},u={get:function(t){return s[t]},initViewport:function(t){s.viewport=t,t.getAttribute("id")||t.setAttribute("id","viewport-"+Date.now())},initNavibar:function(t){var n=s.viewport;n.className+=" enableNavibar",s.navibar=t,c(t,{change:function(n,e){function a(){i.className="",i.removeEventListener("webkitTransitionEnd",a)}var i=t.querySelector("ul"),r=i.querySelector("li:first-child");r.innerHTML=n,i.className=e,setTimeout(function(){i.className+=" transition",i.addEventListener("webkitTransitionEnd",a,!1)},1)},set:function(n){var e=t.querySelector("ul"),a=e.querySelector("li:first-child");a.innerHTML=n}})},initBtn:function(t,n){return s[t]=n,c(n,{handler:null,setText:function(t){n.innerText=t},show:function(){n.style.visibility=""},hide:function(){n.style.visibility="hidden"}}),n.addEventListener("click",function(t){return t.preventDefault(),n.fn.handler&&n.fn.handler.apply(this,arguments),!1}),n},initBackBtn:function(t){this.initBtn("backBtn",t)},initFuncBtn:function(t){this.initBtn("funcBtn",t)},initContent:function(t){s.content=t;var n=t.querySelector("div > .active"),e=t.querySelector("div > .inactive");c(t,{getActive:function(){return n},getInactive:function(){return e},switchActive:function(){swap=e,e=n,n=swap},toggleClass:function(){e.className="inactive",n.className="active"}})},getActiveContent:function(){return s.content.fn.getActive()},fillActiveContent:function(t){var n=this.getActiveContent();n&&(n.innerHTML=t),this.trigger("fillContentEnd")},initScroll:function(t){s.scroll=t;var n=this,e=(t.children[0],new r(t)),a=s.viewport;a.className+=" enableScroll",t.className+=" scroll",e._scrollEndHandler=function(){n.trigger("scrollEnd")},e.enable(),c(t,{refresh:function(){e.refresh()},getScrollHeight:function(){return e.getHeight()},getScrollTop:function(){return e.getTop()},scrollTo:function(t){e.to(t)}})},initTransition:function(t){function n(n){var a,r,s,c,u=t.querySelector("div"),l=u.offsetWidth;i.fn.switchActive(),a=i.fn.getActive(),r=i.fn.getInactive(),a.style.display="block",s=o.getX(u),c=o.getY(u),s+="forward"===n?-l:l,o.start(u,"0.4s","ease",0,s,c,function(){i.fn.toggleClass(),a.style.left=-s+"px",u.appendChild(a),r.style.display="none",r.innerHTML="",u.removeChild(r),u.style.webkitTransform=o.getTranslate(s,0),e.trigger(n+"TransitionEnd")})}s.transition=t;var e=this,a=s.viewport,i=s.content;a.className+=" enableTransition",t.className+=" transition",c(t,{forward:function(){n("forward")},backward:function(){n("backward")}})}};a.extend(e.prototype,u),n.component=n._module.component=new e}(window,window.app||(window.app={_module:{},plugin:{}})),function(t,n){function e(){var t=this,n=t.name;t._vid=n+"-"+Date.now()+"-"+r++,t.views||(t.views={})}function a(){c||(c=!0,i.extend(e.prototype,e.fn))}var i=n.util,r=0,o={},s={loadTemplate:function(t,n){var e=this;1===arguments.length&&(n=arguments[0],t=e.template),t?i.loadFile(t,n):n()},compileTemplate:function(t,e){var a=n.config.templateEngine;return a&&a.compile&&i.isTypeof(t,"string")&&(t=a.compile(t)),e?(e(t),void 0):t},renderTemplate:function(t,e){var a=this,r=n.config.templateEngine,o=a.compiledTemplate,s="";return s=r&&r.render&&i.isTypeof(t,"object")&&o?r.render(o,t):o,e?(e(s),void 0):s}};i.extend(e.prototype,s),e.fn={};var c=!1;e.define=function(t){function n(){e.apply(this,arguments),this.initialize&&this.initialize.apply(this,arguments)}return a(),i.inherit(n,e),i.extend(n.prototype,t),o[t.name]=n},e.get=function(t){return o[t]},e.each=function(t){i.each(o,t)},n.view=n._module.view=e}(window,window.app||(window.app={_module:{},plugin:{}})),function(t,n){function e(){var t=this,n=t.name,e=new r("page."+n);r.mixto(this,e),s.apply(t,arguments),t.status=c.DEFINED}function a(){d||(d=!0,i.extend(e.prototype,e.fn))}var i=n.util,r=n._module.message,o=n._module.navigate.instance,s=n.view,c={DEFINED:0,UNLOADED:1,LOADED:2,READY:3},u={},l={getTitle:function(){return this.title},navigation:{push:function(t,e){n.navigation.push(t,e)},pop:function(){n.navigation.pop()},getParameter:function(t){return n.navigation.getParameter(t)},getData:function(t){return n.navigation.getData(t)},setData:function(t,e){return n.navigation.setData(t,e)},setTitle:function(t){n.component.get("navibar").fn.set(t)},setButtons:function(t){var e="back"===t.type?n.component.get("backBtn"):n.component.get("funcBtn");e.fn.setText(t.text),e.fn.handler=t.handler||"back"!==type?t.handler:function(){o.backward()}}},viewport:{el:null,$el:null,fill:function(t){n.component.fillActiveContent(t)}},ready:function(){},unload:function(){}};i.inherit(e,s),i.extend(e.prototype,l),e.STATUS=c,e.global={},e.fn={};var d=!1;e.define=function(t){function n(){e.apply(this,arguments),this.initialize&&this.initialize.apply(this,arguments)}a(),i.inherit(n,e),i.extend(n.prototype,t);var r,s,c=new n;return i.each(e.global,function(t,n){var e=i.isTypeof(t);switch(e){case"array":c[n]=t.slice(0).concat(c[n]||[]);break;case"object":c[n]=i.extend(t,c[n]||{});break;case"string":case"number":null==c[n]&&(c[n]=t)}}),r=c.name,s=c.route,s?i.isTypeof(s,"string")&&(s={name:"anonymous",text:s}):s={name:"default","default":!0},o.addRoute(r+"."+s.name,s.text,s),u[c.name]=c},e.get=function(t){return u[t]},e.each=function(t){i.each(u,t)},n.page=n._module.page=e}(window,window.app||(window.app={_module:{},plugin:{}})),function(t,n){function e(t){var n=this,e=t.name.split(".");n.pageName=e[0],n.routeName=e[1],n.state=t}var a=n.util,i=n._module.navigate.instance,r=n.page,o=r.STATUS,s={initialize:function(t){var n=this,e=t.name.split(".");n.pageName=e[0],n.routeName=e[1],n.state=t},load:function(t){function n(n){s[n]=!0,s.join("").match(/^(true)*$/)&&(i.status=o.LOADED,t())}function e(t){var n=t.views||{};s.push(t),a.each(n,e)}var i=r.get(this.pageName),s=[];i.status<o.LOADED&&(e(i),a.each(s,function(t,e){t.loadTemplate(function(a){t.compileTemplate(a,function(a){t.compiledTemplate=a,n(e)})})}))},ready:function(){var t,e=r.get(this.pageName);e.status===o.LOADED&&e.status<o.READY&&(e.status=o.READY,e.viewport.el=n.component.getActiveContent(),(t=window.$)&&(e.viewport.$el=t(e.viewport.el)),e.trigger("ready"),e.ready())},unload:function(){var t=r.get(this.pageName);t.status>o.UNLOADED&&(t.status=o.UNLOADED,t.trigger("unloaded"),t.unload())}};a.extend(e.prototype,s),a.extend(e,{_cur:null,getParameter:function(t){if(this._cur){var n=this._cur.state;return n.params[t]||n.args[t]||n.datas[t]}},getArgument:function(t){return this._cur?this._cur.state.args[t]:void 0},getData:function(t){return this._cur?this._cur.state.datas[t]:void 0},setData:function(t,n){this._cur&&(this._cur.state.datas[t]=n)},getPageName:function(){return this._cur?this._cur.pageName:void 0},getRouteName:function(){return this._cur?this._cur.routeName:void 0},getState:function(){return this._cur?this._cur.state:void 0},push:function(t,n){i.forward(t,n)},pop:function(){i.backward()}}),n.navigation=n._module.navigation=e}(window,window.app||(window.app={_module:{},plugin:{}})),function(t,n){function e(){var t,e,a,i,r,o=n.config.viewport;o&&(t=o.querySelector("header.navibar"),e=t.querySelector("li:nth-child(2) button"),a=t.querySelector("li:nth-child(3) button"),i=o.querySelector("section.content"),r=o.querySelector("footer.toolbar"),c.initViewport(o),n.config.enableNavibar&&(c.initNavibar(t),c.initBackBtn(e),c.initFuncBtn(a)),c.initContent(i),n.config.enableScroll&&c.initScroll(i),n.config.enableTransition&&c.initTransition(i),n.config.enableToolbar&&c.initToolbar())}function a(){function t(){o.backward()}function e(n){var e=n.pageName,a=s.get(e),r=a.buttons;p.fn.hide(),h.fn.hide(),r&&i.each(r,function(n){var e=n.type;switch(e){case"back":p.fn.setText(n.text),p.fn.handler=n.handler||t,(n.autoHide===!1||o.getStateIndex()>=1)&&p.fn.show();break;case"func":h.fn.setText(n.text),h.fn.handler=n.handler,h.fn.show();break;default:}n.onChange&&n.onChange.call("back"===e?p:h)})}function a(t,n){var e=t.pageName,a=t.state.transition,i=s.get(e),r=i.getTitle()||"";n?f.fn.change(r,a):f.fn.set(r,a)}function r(t,e){n.config.enableTransition?(_.fn[t.state.transition](),c.once("forwardTransitionEnd backwardTransitionEnd",e)):(g&&(g.fn.switchActive(),g.fn.toggleClass()),e())}function l(t){n.navigation._cur&&n.navigation._cur.unload(),n.navigation._cur=t}function d(t){t.load(function(){t.ready()})}var f=c.get("navibar"),p=c.get("backBtn"),h=c.get("funcBtn"),g=c.get("content"),v=c.get("scroll"),_=c.get("transition");c.on("fillContentEnd",function(){v&&v.fn.refresh()}),o.on("forward backward",function(t){var i=new u(t);l(i),r(i,function(){d(i)}),n.config.enableNavibar&&(e(i),a(i,!0))})}var i=n.util,r=n._module.router.instance,o=n._module.navigate.instance,s=n.page,c=n.component,u=n.navigation;i.extend(n,{config:{viewport:null,theme:"iOS",routePrefix:0,routePrefixSep:"/",enableNavibar:!1,enableScroll:!1,enableTransition:!1,enableToolbar:!1,templateEngine:null},plugin:{},start:function(){e(),a(),n.plugin.init&&n.plugin.init(),r.start()}})}(window,window.app||(window.app={}));