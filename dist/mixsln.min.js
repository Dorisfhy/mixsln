(function(t,e){function n(t){return t+="",0>t.indexOf("px")&&0>t.indexOf("%")&&"0"!==t&&(t+="px"),t}function a(t){return t+="",0>t.indexOf("deg")&"0"!==t&&(t+="deg"),t}function i(t,e){return e||(e="-"),t.replace(/[a-z][A-Z]/g,"$1"+e+"$2").toLowerCase()}var r=/^matrix3d\(\d+, \d+, \d+, \d+, \d+, \d+, \d+, \d+, \d+, \d+, \d+, \d+, ([-\d.]+), ([-\d.]+), [-\d.]+, \d+\)/,o=/^matrix\(\d+, \d+, \d+, \d+, ([-\d.]+), ([-\d.]+)\)$/,s=/^(translate|rotate|scale)(X|Y|Z|3d)?|(matrix)(3d)?|(perspective)|(skew)(X|Y)?$/i,c=(/android/gi.test(navigator.appVersion),/iphone|ipad/gi.test(navigator.appVersion),"WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix),l={translate:function(t,e,n,a,i,r,o){this.doTransition(t,{translate:[i,r]},{duration:e,timingFunction:n,delay:a,callback:o})},doTransition:function(t,e,r){var o,l=[r.duration,r.timingFunction||"ease",r.delay||"0s"].join(" "),u="",p=[],f={};for(var d in e){var h=e[d];if(o=d.match(s)){h instanceof Array||(h=[h]);var g=o[1]||o[3]||o[5]||o[6],v=o[2]||o[4]||o[7]||"";"translate"===g&&""===v&&c&&(v="3d",h.push(0)),"translate"===g?h=h.map(n):("rotate"===g||"skew"===g)&&(h=h.map(a)),u+=g+v+"("+h.join(",")+")"}else p.push(i(d)+" "+l),f[d]=h;u&&p.push("-webkit-transform "+l)}r.callback&&t.addEventListener("webkitTransitionEnd",function(e){t.removeEventListener("webkitTransitionEnd",arguments.callee,!1),e.srcElement===t&&setTimeout(r.callback,10)},!1),setTimeout(function(){t.style.webkitTransition=p.join(", "),u.length&&(t.style.webkitTransform=u);for(var e in f)t.style[e]=f[e]},10)},genCubicBezier:function(t,e){return[[(t/3+(t+e)/3-t)/(e-t),(t*t/3+2*t*e/3-t*t)/(e*e-t*t)],[(e/3+(t+e)/3-t)/(e-t),(e*e/3+2*t*e/3-t*t)/(e*e-t*t)]]},makeTranslateString:function(t,e){return t=n(t),e=n(e),c?"translate3d("+t+", "+e+", 0)":"translate("+t+", "+e+")"},getTransformOffset:function(t){var e,n,a={x:0,y:0},i=getComputedStyle(t).webkitTransform;return"none"!==i&&(n=i.indexOf("matrix3d")>-1?r:o,(e=i.match(n))&&(a.x=parseInt(e[1])||0,a.y=parseInt(e[2])||0)),a}};e.module.Animation=l})(window,window.app||(window.app={module:{},plugin:{}})),function(t,e){function n(t,e){e||(e={}),this._wrapEl=t,this._cacheLength=Math.max(e.cacheLength,1),this._cacheIndex=0;for(var n="",a=0;this._cacheLength>a;a++)n+='<div class="inactive" index="'+a+'"></div>';this._wrapEl.innerHTML='<div class="wrap">'+n+"</div>",this.setClassName()}var a={setClassName:function(){this.getActive().className="active",this._cacheLength>2?(this.getPrevious().className="inactive prev",this.getNext().className="inactive next"):this._cacheLength>1&&(this.getPrevious().className="inactive")},getActive:function(){var t=this._cacheIndex;return this._wrapEl.querySelector(".wrap > div:nth-child("+(t+1)+")")},getNext:function(){var t=(this._cacheIndex+1)%this._cacheLength;return this._wrapEl.querySelector(".wrap > div:nth-child("+(t+1)+")")},getPrevious:function(){var t=(this._cacheIndex-1+this._cacheLength)%this._cacheLength;return this._wrapEl.querySelector(".wrap > div:nth-child("+(t+1)+")")},next:function(){this._cacheLength>2&&(this.getPrevious().className="inactive"),this._cacheIndex=(this._cacheIndex+1)%this._cacheLength},previous:function(){this._cacheLength>2&&(this.getNext().className="inactive"),this._cacheIndex=(this._cacheIndex-1+this._cacheLength)%this._cacheLength},html:function(t){this.getActive().innerHTML=t}};for(var i in a)n.prototype[i]=a[i];e.module.Content=n}(window,window.app||(window.app={module:{},plugin:{}})),function(t){function e(t,e){for(var n=t;n;){if(n.contains(e)||n==e)return n;n=n.parentNode}return null}function n(t,e,n){var a=c.createEvent("HTMLEvents");if(a.initEvent(e,!1,!0),"object"==typeof n)for(var i in n)a[i]=n[i];for(;a.cancelBubble===!1&&t;)t.dispatchEvent(a),t=t.parentNode}function a(t,e,n,a,i,r,o,s){var c=Math.atan2(s-r,o-i)-Math.atan2(a-e,n-t),l=Math.sqrt((Math.pow(s-r,2)+Math.pow(o-i,2))/(Math.pow(a-e,2)+Math.pow(n-t,2))),u=[i-l*t*Math.cos(c)+l*e*Math.sin(c),r-l*e*Math.cos(c)-l*t*Math.sin(c)];return{rotate:c,scale:l,translate:u,matrix:[[l*Math.cos(c),-l*Math.sin(c),u[0]],[l*Math.sin(c),l*Math.cos(c),u[1]],[0,0,1]]}}function i(t){0===Object.keys(p).length&&(l.addEventListener("touchmove",r,!1),l.addEventListener("touchend",o,!1),l.addEventListener("touchcancel",s,!1));for(var a=0;t.changedTouches.length>a;a++){var i=t.changedTouches[a],c={};for(var f in i)c[f]=i[f];var d={startTouch:c,startTime:Date.now(),status:"tapping",element:t.srcElement,pressingHandler:setTimeout(function(e){return function(){"tapping"===d.status&&(d.status="pressing",n(e,"press",{touchEvent:t})),clearTimeout(d.pressingHandler),d.pressingHandler=null}}(t.srcElement),500)};p[i.identifier]=d}if(2==Object.keys(p).length){var h=[];for(var f in p)h.push(p[f].element);n(e(h[0],h[1]),"dualtouchstart",{touches:u.call(t.touches),touchEvent:t})}}function r(t){for(var i=0;t.changedTouches.length>i;i++){var r=t.changedTouches[i],o=p[r.identifier];if(!o)return;var s=r.clientX-o.startTouch.clientX,c=r.clientY-o.startTouch.clientY,l=Math.sqrt(Math.pow(s,2)+Math.pow(c,2));"tapping"===o.status&&l>10&&(o.status="panning",n(o.element,"panstart",{touch:r,touchEvent:t}),Math.abs(s)>Math.abs(c)?(n(o.element,"horizontalpanstart",{touch:r,touchEvent:t}),o.isVertical=!1):(n(o.element,"verticalpanstart",{touch:r,touchEvent:t}),o.isVertical=!0)),"panning"===o.status&&(o.panTime=Date.now(),n(o.element,"pan",{displacementX:s,displacementY:c,touch:r,touchEvent:t}),o.isVertical?n(o.element,"verticalpan",{displacementY:c,touch:r,touchEvent:t}):n(o.element,"horizontalpan",{displacementX:s,touch:r,touchEvent:t}))}if(2==Object.keys(p).length){for(var u,f=[],d=[],h=[],i=0;t.touches.length>i;i++){var r=t.touches[i],o=p[r.identifier];f.push([o.startTouch.clientX,o.startTouch.clientY]),d.push([r.clientX,r.clientY])}for(var g in p)h.push(p[g].element);u=a(f[0][0],f[0][1],f[1][0],f[1][1],d[0][0],d[0][1],d[1][0],d[1][1]),n(e(h[0],h[1]),"dualtouch",{transform:u,touches:t.touches,touchEvent:t})}}function o(t){if(2==Object.keys(p).length){var a=[];for(var i in p)a.push(p[i].element);n(e(a[0],a[1]),"dualtouchend",{touches:u.call(t.touches),touchEvent:t})}for(var c=0;t.changedTouches.length>c;c++){var d=t.changedTouches[c],h=d.identifier,g=p[h];if(g){if(g.pressingHandler&&(clearTimeout(g.pressingHandler),g.pressingHandler=null),"tapping"===g.status&&(g.timestamp=Date.now(),n(g.element,"tap",{touch:d,touchEvent:t}),f&&300>g.timestamp-f.timestamp&&n(g.element,"doubletap",{touch:d,touchEvent:t}),this.lastTap=g),"panning"===g.status){n(g.element,"panend",{touch:d,touchEvent:t});var v=Date.now()-g.startTime,m=(d.clientX-g.startTouch.clientX)/v,w=(d.clientY-g.startTouch.clientY)/v,b=d.clientX-g.startTouch.clientX,y=d.clientY-g.startTouch.clientY;300>v&&(n(g.element,"flick",{duration:v,velocityX:m,velocityY:w,displacementX:b,displacementY:y,touch:d,touchEvent:t}),g.isVertical?n(g.element,"verticalflick",{duration:v,velocityY:w,displacementY:y,touch:d,touchEvent:t}):n(g.element,"horizontalflick",{duration:v,velocityX:m,displacementX:b,touch:d,touchEvent:t}))}"pressing"===g.status&&n(g.element,"pressend",{touch:d,touchEvent:t}),delete p[h]}}0===Object.keys(p).length&&(l.removeEventListener("touchmove",r,!1),l.removeEventListener("touchend",o,!1),l.removeEventListener("touchcancel",s,!1))}function s(t){if(2==Object.keys(p).length){var a=[];for(var i in p)a.push(p[i].element);n(e(a[0],a[1]),"dualtouchend",{touches:u.call(t.touches),touchEvent:t})}for(var c=0;t.changedTouches.length>c;c++)"panning"===gesture.status&&n(gesture.element,"panend",{touch:touch,touchEvent:t}),"pressing"===gesture.status&&n(gesture.element,"pressend",{touch:touch,touchEvent:t}),delete p[t.changedTouches[c].identifier];0===Object.keys(p).length&&(l.removeEventListener("touchmove",r,!1),l.removeEventListener("touchend",o,!1),l.removeEventListener("touchcancel",s,!1))}var c=t.document,l=c.documentElement,u=Array.prototype.slice,p={},f=null;l.addEventListener("touchstart",i,!1)}(window,window.app||(window.app={module:{},plugin:{}})),function(t,e){function n(){this._handlers={}}function a(t){var e=this;this._scope=t,this._source=new n,this._cache={},this._handler=function(t){for(var n=t.type,a=t.args,i=e._cache[n],r=0;i.length>r;r+=2)i[r].apply(i[r+1],a)},o[t]=this}var i={addEventListener:function(t,e){var n,a=this._handlers;n=a[t]||(a[t]=[]),n.push(e)},removeEventListener:function(t,e){var n=this._handlers;n[t]&&(n[t]=n[t].filter(function(t){return t!=e}),n[t].length||delete n[t])},dispatchEvent:function(t){var e=this._handlers,n=t.type;e.hasOwnProperty(n)&&e[n].forEach(function(e){e(t)}),this["on"+n]&&this["on"+n](t)}};for(var r in i)n.prototype[r]=i[r];var o={},s=/\s+/,c={on:function(t,e,n){var a,i,r=this,o=r._cache,c=r._source;if(!e)return r;for(t=t.split(s);i=t.shift();)a=o[i]||(o[i]=[]),a.length||c.addEventListener(i,this._handler),a.push(e,n);return r},off:function(t,e,n){var a,i,r=this,o=r._cache,c=r._source;for(t=t?t.split(s):Object.keys(o);i=t.shift();){!(e||n)&&(o[i]=[]),a=o[i];for(var l=a.length-2;l>=0;l-=2)e&&a[l]!==e||n&&a[l+1]!==n||a.splice(l,2);a.length||(delete o[i],c.removeEventListener(i,this._handler))}return r},once:function(t,e,n){function a(){e.apply(this,arguments),i.off(t,a,n)}var i=this;return i.on(t,a,n)},after:function(t,e,n){function a(){for(var t in r)if(!r[t])return;e.apply(n)}var i=this,r={};return e?(t=t.split(s),t.forEach(function(t){r[t]=!1,i.once(t,function(){r[t]=!0,a()})}),void 0):i},trigger:function(t){var e,n,a=this,i=a._cache,r=a._source;for(t=t.split(s),e=Array.prototype.slice.call(arguments,1);n=t.shift();)a.log(n,e),i[n]&&r.dispatchEvent({type:n,args:e});return a},log:function(t,n){e.config&&e.config.enableMessageLog&&console.log("[Message]",{scope:this._scope,event:t,args:n})}};for(var r in c)a.prototype[r]=c[r];a.mixto=function(t,e){var n;n="string"==typeof e?o[e]||new a(e):e,t.prototype&&(t=t.prototype);for(var i in c)void function(e){t[i]=function(){e.apply(n,arguments)}}(c[i])},a.get=function(t){return o[t]||(o[t]=new a(t))},e.module.EventSource=n,e.module.MessageScope=a}(window,window.app||(window.app={module:{},plugin:{}})),function(t,e){function n(t,e){null!=e.id&&t.setAttribute("id",e.id),null!=e["class"]&&(t.className=e["class"]),null!=e.text&&(t.innerHTML=e.text),null!=e.bg&&(t.style.background=e.bg),null!=e.icon&&(t.innerHTML='<img src="'+e.icon+'" border="0" />'),t.style.display=e.hide===!0?"none":"",e.onChange&&e.onChange.call(t,e),e.handler&&(t.handler&&t.removeEventListener("click",t.handler,!1),t.addEventListener("click",t.handler=e.handler,!1))}function a(t,e){e||(e={}),this._wrapEl=t,this._animWrapEl=e.animWrapEl,this._backWrapEl=e.backWrapEl,this._funcWrapEl=e.funcWrapEl,this._titleWrapEl=e.titleWrapEl}var i=t.document,r={setTitle:function(t){this._titleWrapEl&&(this._titleWrapEl.innerHTML=t)},setButton:function(t){var e,a;"back"===t.type?(e=this._backWrapEl,a=e.querySelector("button")):"func"===t.type?(e=this._funcWrapEl,a=e.querySelector("#"+t.id)):t.id&&(a=this._wrapEl.querySelector("#"+t.id),a&&(e=a.parentNode)),!a&&e&&(a=i.createElement("button"),e.appendChild(a)),n(a,t)},getButton:function(t){return this._funcWrapEl.querySelector("button#"+t)},removeButton:function(t){if(t){if("string"==typeof t)var e=this.getButton(t);else if(t instanceof HTMLElement)var e=t;e&&(e.handler&&e.removeEventListener("click",e.handler),e.parentNode.removeChild(e))}else for(var n=this._funcWrapEl.querySelectorAll("button"),a=0;n.length>a;a++)this.removeButton(n[a])}};for(var o in r)a.prototype[o]=r[o];e.module.Navbar=a}(window,window.app||(window.app={module:{},plugin:{}})),function(t,e){function n(){var t=this;t.move=null,t.transition=null,t.datas=null,t._states=[],t._stateIdx=0,t._stateLimit=100}function a(t){return t.replace(f,"(P<$1>[^\\/]*?)").replace(d,"(P<$1>.*?)")}function i(t){var e=t.match(h),n={};return e&&e.forEach(function(t,e){n[t.replace(h,"$1")]=e}),n}function r(t){var e=t.split("&");return t={},e.forEach(function(e){if(e){var n=e.split("=");t[n[0]]=n[1]}}),t}function o(t){return t=t.replace(h,""),RegExp("^("+t+")("+g+".*?)?$")}function s(){return m.hash.slice(1)||""}function c(t){m.hash=t}function l(){var t=this;t._started=!1,t._routes={},t._stack=new n,w.mixto(this,"navigation")}var u={reset:function(){var t=this;t.move=null,t.transition=null,t.datas=null,t._states=[],t._stateIdx=0,t._stateLimit=100},pushState:function(t,e,a,i){var r=this,o=r._states,s=r._stateIdx,c=r._stateLimit,l=o.length,u=r.move,p=r.transition,f=r.datas,d=o[s-1],h=o[s+1],g={name:t,fragment:e,params:a||{},args:i||{},datas:f||{},update:!0};return null==u&&(p=u=!f&&n.isEquals(d,g)?"backward":"forward"),"backward"===u?0===s&&l>0?o.unshift(g):s>0&&(s--,g.update=!1,g=d):"forward"===u&&(s===c-1?(o.shift(),o.push(g)):0===s&&0===l?o.push(g):!f&&n.isEquals(h,g)?(s++,g.update=!1,g=h):n.isEquals(o[s],g)?g=o[s]:(s++,o.splice(s),o.push(g))),g.move=u,g.transition=p,g.index=s,r.move=null,r.transition=null,r.datas=null,r._stateIdx=s,g},getState:function(){return this._states[this._stateIdx]},getIndex:function(){return this._stateIdx}};for(var p in u)n.prototype[p]=u[p];n.isEquals=function(t,e){return t&&e?t.name!==e.name||t.fragment!==e.fragment?!1:!0:!1};var f=/\:(\w\w*)/g,d=/\*(\w\w*)/g,h=/P\<(\w\w*?)\>/g,g="!",v=t.history,m=t.location,w=e.module.MessageScope,b={getStack:function(){return this._stack},handleEvent:function(){var t,e,n=this,a=n._routes,i=!0;if(n._started){e=s();for(var r in a)if(t=a[r],t.routeReg.test(e)&&(i=!1,t.callback(e),t.last))break;i&&n.trigger("unmatched",e)}},addRoute:function(t,e,n){function s(e,a,i){var r=u._stack.pushState(t,e,a,i);n.callback&&n.callback(r),u.trigger(r.move,r)}var c,l,u=this;1===arguments.length&&(n=arguments[0],t=null,e=null),n||(n={}),n["default"]?this.on("unmatched",s):t&&e&&(e=a(e),c=i(e),l=o(e),u._routes[t]={routeReg:l,callback:function(t){var e=t.match(l).slice(2),n=r(e.pop()||""),a={};for(var i in c)a[i]=e[c[i]];s(t,a,n)},last:!!n.last})},removeRoute:function(t){this._routes[t]&&delete this._routes[t]},hasRoute:function(t){return!!this._routes[t]},start:function(){return this._started?!1:(this._started=!0,t.addEventListener("hashchange",this,!1),this.handleEvent(),!0)},stop:function(){return this._started?(this._routes={},this._stack.reset(),this._started=!1,t.removeEventListener("hashchange",this,!1),!0):!1},push:function(t,e){var n=this,a=n._stack,i=a.getState(),r=[];if(e||(e={}),a.move="forward",a.transition="forward",null!=t){if(!i||i.fragment!==t||e.data){if(e.type||(e.type="GET"),e.data||(e.data={}),"GET"===e.type.toUpperCase())for(var o in e.data)r.push(o+"="+e.data[o]);"POST"===e.type.toUpperCase()&&(a.datas=e.data),"backward"===e.transition&&(a.transition="backward"),c(t+(r.length?g+r.join("&"):""))}}else v.forward()},pop:function(t){var e=this,n=e._stack,a=n.getIndex();0!==a&&(n.move="backward",n.transition="backward",t&&"forward"===t.transition&&(n.transition="forward"),v.back())}};for(var p in b)l.prototype[p]=b[p];l.instance=new l,e.module.StateStack=n,e.module.Navigation=l}(window,window.app||(window.app={module:{},plugin:{}})),function(t,e){function n(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])}function a(t,e){function a(){}a.prototype=e.prototype;var i=new a;n(i,t.prototype),i.constructor=t,t.prototype=i}function i(){}var r=e.module.MessageScope,o=(r.get("page"),{}),s={startup:function(){},teardown:function(){}};for(var c in s)i.prototype[c]=s[c];i.fn={},i.define=function(t){function e(){i.apply(this,arguments),this.initialize&&this.initialize.apply(this,arguments),r.mixto(this,"page."+this.name)}return a(e,i),n(e.prototype,i.fn),n(e.prototype,t),o[t.name]=new e},i.get=function(t){return o[t]},e.module.Page=i}(window,window.app||(window.app={module:{},plugin:{}})),function(t,e){function n(){}t.document;var a={load:function(t,n){function a(t){n&&n(t)}var i;e&&e.config&&(i=e.config.templateEngine),i&&i.load&&"string"==typeof t?i.load(t,a):a(t)},compile:function(t){var n,a=this;return e&&e.config&&(n=e.config.templateEngine),a.originTemplate=t,a.compiledTemplate=n&&n.compile&&"string"==typeof t?n.compile(t):t,a.compiledTemplate},render:function(t){var n,a=this,i=a.compiledTemplate;return e&&e.config&&(n=e.config.templateEngine),a.content=n&&n.render&&"object"==typeof t&&i?n.render(i,t):i,a.content}};for(var i in a)n.prototype[i]=a[i];e.module.Template=n}(window,window.app||(window.app={module:{},plugin:{}})),function(t,e){function n(t,e){e||(e={}),this._wrapEl=t,e.html&&(this._wrapEl.innerHTML=e.html),e.height&&(this._wrapEl.style.height=e.height+"px")}t.document;var a={show:function(t,e){return e||(e={}),t&&(this._wrapEl.innerHTML=t),e.height&&(this._wrapEl.style.height=e.height+"px"),this._wrapEl.style.display="",this._wrapEl},hide:function(){return this._wrapEl.style.display="none",this._wrapEl}};for(var i in a)n.prototype[i]=a[i];e.module.Toolbar=n}(window,window.app||(window.app={module:{},plugin:{}})),function(t,e){function n(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])}function a(t,e){function a(){}a.prototype=e.prototype;var i=new a;n(i,t.prototype),i.constructor=t,t.prototype=i}function i(){var e,n=document.createElement("div"),a=t.$;if(this.el){var i=this.el.split(/\s*\>\s*/),r=n;i.forEach(function(t){var e;if(e=t.match(/^(\w+)?(?:\#([^.]+))?(?:\.(.+))?$/i)){var n=document.createElement(e[1]||"div");e[2]&&n.setAttribute("id",e[2]),e[3]&&(n.className=e[3]),r.appendChild(n)}else r.innerHTML=t;r=r.childNodes[0]}),n=n.childNodes[0]}Object.defineProperty(this,"el",{get:function(){return n}}),a&&(e=a(n),Object.defineProperty(this,"$el",{get:function(){return e}}))}var r=(t.document,{}),o={render:function(){},destory:function(){}};for(var s in o)i.prototype[s]=o[s];i.fn={},i.extend=function(t){function e(){i.apply(this,arguments),this.initialize&&this.initialize.apply(this,arguments)}return a(e,i),n(e.prototype,i.fn),n(e.prototype,t),r[t.name]=e},i.get=function(t){return r[t]},e.module.View=i}(window,window.app||(window.app={module:{},plugin:{}})),function(t,e){function n(t,e,n,i){var r=(this.TYPE,a.getTransformOffset(t)),o={translate:{x:r.x,y:r.y}},s={translate:{x:r.x,y:r.y}};e=e.split(""),n(o,s,e[0],e[1]);for(var c in o)"translate"===c?(t.style.webkitTransition="",t.style.webkitTransform=a.makeTranslateString(o[c].x,o[c].y)):t.style[c]=o[c];s.translate=[s.translate.x,s.translate.y],t.style.webkitBackfaceVisibility="hidden",t.style.webkitTransformStyle="preserve-3d",a.doTransition(t,s,{duration:"0.4s",timingFunction:"ease",callback:function(){t.style.webkitBackfaceVisibility="initial",t.style.webkitTransformStyle="flat",i&&i()}})}var a=(t.document,e.module.Animation),i={L:"x",R:"x",T:"y",B:"y"},r={L:-1,R:1,T:-1,B:1},o={TYPE:{LEFT_IN:"LI",LEFT_OUT:"LO",RIGHT_IN:"RI",RIGHT_OUT:"RO",TOP_IN:"TI",TOP_OUT:"TO",BOTTOM_IN:"BI",BOTTOM_OUT:"BO"},move:function(t,e,n,i){var r=a.getTransformOffset(t);t.style.webkitBackfaceVisibility="hidden",t.style.webkitTransformStyle="preserve-3d",a.translate(t,"0.4s","ease","0s",r.x+e,r.y+n,function(){t.style.webkitBackfaceVisibility="initial",t.style.webkitTransformStyle="flat",i&&i()})},slide:function(t,e,a,o){n(t,e,function(t,e,n,o){var s=i[n],c=r[n];"I"===o?t.translate[s]+=c*a:e.translate[s]+=c*a},o)},"float":function(t,e,a,o){n(t,e,function(t,e,n,o){var s=i[n],c=r[n];"I"===o?(t.translate[s]+=c*a,t.opacity=0,e.opacity=1):(e.translate[s]+=c*a,t.opacity=1,e.opacity=0)},o)},fadeIn:function(t,e){n(t,"FI",function(t,e,n,a){"I"===a?(t.opacity=0,e.opacity=1):(t.opacity=1,e.opacity=0)},e)},fadeOut:function(t){n(t,"FO",function(t,e,n,a){"I"===a?(t.opacity=0,e.opacity=1):(t.opacity=1,e.opacity=0)},callback)},zoomIn:function(){},zoomOut:function(){}};e.module.Transition=o}(window,window.app||(window.app={module:{},plugin:{}})),function(e,n){function a(t){return 0-(t.bounceTop||0)}function i(t){var e=t.getBoundingClientRect(),n=t.parentNode.getBoundingClientRect(),a=0-e.height+n.height;return a>0&&(a=0),a+(t.bounceBottom||0)}function r(t,e,n){var a=_.createEvent("HTMLEvents");a.initEvent(e,!1,!0);for(var i in n)a[i]=n[i];t.dispatchEvent(a)}function o(t){if(!N){for(var e=t.srcElement;!e.boundScrollEvent;)e=e.parentNode||e.offsetParent;b=e.boundScrollElement,b&&(b.style.webkitBackfaceVisibility="hidden",b.style.webkitTransformStyle="preserve-3d",b.style.webkitTransition="",b.style.webkitTransform=getComputedStyle(b).webkitTransform)}}function c(t){return t.preventDefault(),!1}function l(){}function u(){!N&&b&&(y=x.getTransformOffset(b),E=a(b),T=i(b),S=2.5,N=!1,L=!1)}function p(t){if(!N&&b){var e=y.y+t.displacementY;if(e>E?(e=E+(e-E)/S,S*=1.003,S>4&&(S=4)):T>e&&(e=T-(T-e)/S,S*=1.003,S>4&&(S=4)),d(e)){if(e>E)var n="pulldown";else if(T>e)var n="pullup";r(b,n)}b.style.webkitTransition="",b.style.webkitTransform=x.makeTranslateString(y.x,e)}}function f(){if(!N&&b){var t=x.getTransformOffset(b).y;d(t)?v():w()}}function d(t){return t>E?t-E:T>t?T-t:void 0}function h(t){return t>E?t=E:T>t&&(t=T),t}function g(e){if(!N&&b){var n=x.getTransformOffset(b).y,a=.008*(e/Math.abs(e));t=e/a,s=n+t*e/2,r(b,"bouncestart"),x.translate(b,t.toFixed(0)+"ms","cubic-bezier("+x.genCubicBezier(-t,0)+")","0s",y.x,s.toFixed(0),v)}}function v(){if(!N&&b){var t=x.getTransformOffset(b).y;t=h(t),x.translate(b,"0.4s","ease-in-out","0s",y.x,t,function(){r(b,"bounceend"),w()})}}function m(t){if(!N&&b){var e,n,a,i,r,o,s,c=x.getTransformOffset(b).y;L=!0,c>E||T>c?g(e):(e=t.velocityY,e>1.5&&(e=1.5),-1.5>e&&(e=-1.5),n=.0015*(e/Math.abs(e)),a=e/n,i=c+a*e/2,i>E?(o=E-c,s=(e-Math.sqrt(-2*n*o+e*e))/n,r=e-n*s,x.translate(b,s.toFixed(0)+"ms","cubic-bezier("+x.genCubicBezier(-a,-a+s)+")","0s",y.x,E,function(){g(r)})):T>i?(o=T-c,s=(e+Math.sqrt(-2*n*o+e*e))/n,r=e-n*s,x.translate(b,s.toFixed(0)+"ms","cubic-bezier("+x.genCubicBezier(-a,-a+s)+")","0s",y.x,T,function(){g(r)})):x.translate(b,a.toFixed(0)+"ms","cubic-bezier("+x.genCubicBezier(-a,0)+")","0s",y.x,i.toFixed(0),w))}}function w(){!N&&b&&(L=!1,setTimeout(function(){L||(b.style.webkitBackfaceVisibility="initial",b.style.webkitTransformStyle="flat",r(b,"scrollend"))},10))}var b,y,E,T,_=e.document,k=_.documentElement,x=n.module.Animation,S=2,L=!1,N=!1,O=!1,M={enable:function(t,e){var n=t.parentNode||t.offsetParent;O||(O=!0,k.addEventListener("touchmove",c,!1)),n.boundScrollEvent||(n.boundScrollEvent=!0,n.addEventListener("touchstart",o,!1),n.addEventListener("touchend",l,!1),n.addEventListener("panstart",u,!1),n.addEventListener("pan",p,!1),n.addEventListener("panend",f,!1),n.addEventListener("flick",m,!1)),n.boundScrollElement=t,t.refresh||(t.getScrollHeight=function(){return t.scrollHeight-(t.bounceTop||0)-(t.bounceBottom||0)},t.getScrollTop=function(){var e=x.getTransformOffset(t);return-(e.y+(t.bounceTop||0))},t.refresh=function(){t.style.height="auto",t.style.height=t.offsetHeight+"px"},t.scrollTo=function(e,n){var i,r,o=x.getTransformOffset(t).x,e=-e-(t.bounceTop||0);n!==!0&&(e>(i=a(t))?e=i:(r=a(t))>e&&(e=r)),t.style.webkitTransition="",t.style.webkitTransform=x.makeTranslateString(o,e)},t.scollToElement=function(){},t.getBoundaryOffset=function(){var e=x.getTransformOffset(t).y;return d(e)},t.getViewHeight=function(){return t.parentNode.getBoundingClientRect().height},t.stopBounce=function(){N=!0;var e,n=x.getTransformOffset(t).y,r=a(t),o=i(t);n>r+(t.bounceTop||0)?e=r+(t.bounceTop||0):o-(t.bounceBottom||0)>n&&(e=o-(t.bounceBottom||0)),null!=e&&x.translate(t,"0.4s","ease-in-out","0s",y.x,e)},t.resumeBounce=function(){N=!1;var e,n=x.getTransformOffset(t).y,r=a(t),o=i(t);n>r?e=r:o>n&&(e=o),null!=e&&x.translate(t,"0.4s","ease-in-out","0s",y.x,e)}),e?(t.bounceTop=e.bounceTop,t.bounceBottom=e.bounceBottom):(t.bounceTop=0,t.bounceBottom=0),t.scrollTo(0)},disable:function(t){var e=t.parentNode||t.offsetParent;e.boundScrollElement===t&&(e.boundScrollElement=null)}};n.module.Scroll=M}(window,window.app||(window.app={module:{},plugin:{}})),function(t,e){function n(t){var e=this,a=!0,o={};i.mixto(e,"model-"+r++),e.addProperty=function(i,r){Object.defineProperty(e,i,{get:function(){return o[i]||t[i]},set:function(r){o[i]&&(o[i].destory(),delete o[i]),null!=r&&(t[i]=r,"object"==typeof r&&(o[i]=new n(r),o[i].on("propertyChange",function(t){e.trigger("propertyChange",{target:t.target,value:t.value,name:t.name,path:i+"."+t.path})}))),!a&&e.trigger("propertyChange",{target:e,value:o[i]||t[i],name:i,path:i})}}),e[i]=r},e.update=function(t){if(t instanceof Array)for(var a=0;t.length>a;a++)t[a]instanceof n||this.addProperty(a,t[a]);else for(var i in t){if(e.hasOwnProperty(i))throw Error('property conflict "'+i+'"');!t.hasOwnProperty(i)||t[i]instanceof n||this.addProperty(i,t[i])}},e.destory=function(){for(var t in o)o[t].destory();e.off()},e.on("propertyChange",function(t){e.trigger("change:"+t.path,t.value)}),e.update(t),a=!1}function a(t){var e=this;!t instanceof Array||(e.length=t.length,e.push=function(n){t.push(n),e.length=t.length,e.addProperty(t.length-1,n)},e.pop=function(){var n=t.pop();return e.length=t.length,e[t.length]=null,n},n.call(e,t))}var i=e.module.MessageScope,r=0;e.module.Model=n,e.module.Collection=a}(window,window.app||(window.app={module:{},plugin:{}})),function(t,e){function n(t,e){var n=document.createElement("script"),a=!1;n.async=!0,n.onload=n.onreadystatechange=function(){a||(a=!0,e&&e(t))},n.src=t,c.body.appendChild(n)}function a(t){var e=document.createElement("link");e.type="text/css",e.rel="stylesheet",e.href=t,c.body.appendChild(e)}function i(t,e){return e||(e=c),e.querySelector(t)}function r(t,e,n){var a=t[e];if("string"==typeof a)k.on("template:loaded",function(t){a===t&&(k.off("template:loaded",arguments.callee),n&&n())});else if("object"==typeof a)for(var e in a)r(a,e,function(){var t=!0;for(var e in a)if("function"!=typeof a[e]){t=!1;break}t&&n&&n()});else n&&n()}function o(t,e){return t.compile(e),function(e){return t.render(e)}}function s(t,e){var n=t[e];if("string"==typeof n){var a;L[n]?t[e]=L[n]:n.match(/\.tpl$/g)?(a=new g,a.load(n,function(i){t[e]=L[n]=o(a,i),k.trigger("template:loaded",n)})):(a=new g,t[e]=L[n]=o(a,n))}else if("object"==typeof n)for(var e in n)s(n,e)}var c=t.document,l=t.$,u=e.module,p=u.StateStack,f=u.MessageScope,d=u.Navigation,h=d.instance,g=u.Template,v=u.View,m=u.Page,w=u.Navbar,b=u.Toolbar,y=u.Content,E=u.Scroll,T=u.Animation,_=u.Transition,k=f.get("hooks"),x={},S={},L={},N=e.config={viewport:null,templateEngine:null,enableMessageLog:!1,enableContent:!0,enableNavbar:!1,enableToolbar:!1,enableScroll:!1,enableTransition:!1};k.on("app:start",function(){var t=e.config;w||(t.enableNavbar=!1),b||(t.enableToolbar=!1),E||(t.enableScroll=!1),_||(t.enableTransition=!1),t.enableNavbar===!0&&(t.enableNavbar={}),t.enableToolbar===!0&&(t.enableToolbar={}),t.enableScroll===!0&&(t.enableScroll={}),t.enableTransition===!0&&(t.enableTransition={}),"number"==typeof t.enableContent?t.enableContent={cacheLength:t.enableContent}:t.enableContent instanceof HTMLElement?t.enableContent={wrapEl:t.enableContent}:"object"!=typeof t.enableContent&&(t.enableContent={})});var O="onorientationchange"in t?"orientationchange":"resize";window.addEventListener(O,function(){setTimeout(function(){k.trigger("orientaion:change")},10)},!1);var M,C;k.on("page:define page:defineMeta",function(t){var e=t.name,n=t.route;h.hasRoute(e)||(n?"string"==typeof n&&(n={name:e,text:n}):n={name:e,"default":!0},h.addRoute(n.name,n.text,{"default":n["default"],callback:n.callback,last:n.last}))}),h.on("forward backward",function(t){function i(){var e=m.get(t.name);k.trigger("navigation:switch",t,e,{isSamePage:C&&C.name===e.name,isSameState:M&&p.isEquals(M,t)}),M=t,C=e}var r,o=m.get(t.name);if(o)i();else{var r=S[t.name],s=e.config.pageBasePath||".";if(r.css)for(var c=0;r.css.length>c;c++){var l=s+"/"+r.name+"/"+r.css[c];a(l)}if(r.js){var c=0,u=r.js.length,l=s+"/"+r.name+"/"+r.js[c++];n(l,function(t){u>c?(t=s+"/"+r.name+"/"+r.js[c++],n(t,arguments.callee)):i()})}}}),k.on("navigation:switch",function(t,n,a){var i=N.enableNavbar,r=N.enableToolbar,o=N.enableContent,s=N.enableTransition,c=N.enableScroll,l=t.move,u=t.transition;if(i){var p=i.instance;p.setTitle(n.title),p.removeButton(),n.buttons&&n.buttons.forEach(function(a){var i=a.handler;"back"===a.type&&(a.hide=a.autoHide!==!1&&1>t.index?!0:!1,i||(i=a.handler=function(){e.navigation.pop()})),"string"==typeof i&&(i=n[i]),a.handler=function(){i.apply(n,arguments)},p.setButton(a)}),a.isSamePage||i.titleWrapEl.parentNode!==i.backWrapEl.parentNode||i.titleWrapEl.parentNode!==i.funcWrapEl.parentNode||_.float(i.titleWrapEl.parentNode,"backward"===u?"LI":"RI",50)}if(r){var f=r.instance;n.toolbar?f.show("",{height:n.toolbar}):f.hide()}if(!a.isSamePage){var d=o.instance;if("backward"===l?d.previous():d.next(),c&&(N.viewport.className+=" enableScroll",E.disable(c.wrapEl),c.wrapEl=d.getActive(),E.enable(c.wrapEl,n.scroll)),s){N.viewport.className+=" enableTransition";var h=s.wrapEl.offsetWidth*("backward"===u?1:-1),g=s.wrapEl.className+=" "+u;d.getActive(),_.move(s.wrapEl,h,0,function(){s.wrapEl.className=g.replace(" "+u,""),s.wrapEl.style.left=-T.getTransformOffset(s.wrapEl).x+"px",d.setClassName()})}else d.setClassName()}}),k.on("navigation:switch orientaion:change",function(){var t=N.enableNavbar,e=N.enableToolbar,n=N.enableContent,a=N.viewport.offsetHeight;t&&(a-=t.wrapEl.offsetHeight),e&&(a-=e.wrapEl.offsetHeight),n.wrapEl.style.height=a+"px"}),k.on("app:start",function(){var t,e=N.enableNavbar,n=N.enableToolbar,a=N.enableContent,r=N.enableTransition,o=N.enableScroll;N.viewport||(N.viewport=i(".viewport"))||c.body,a.wrapEl||(a.wrapEl=i("section.content",N.viewport))||N.viewport,a.cacheLength||(a.cacheLength=5),t=a.instance=new y(a.wrapEl,{cacheLength:a.cacheLength}),e&&(N.viewport.className+=" enableNavbar",e.wrapEl||(e.wrapEl=i("header.navbar",N.viewport)),e.titleWrapEl||(e.titleWrapEl=i("header.navbar > ul > li:first-child",N.viewport)),e.backWrapEl||(e.backWrapEl=i("header.navbar > ul > li:nth-child(2)",N.viewport)),e.funcWrapEl||(e.funcWrapEl=i("header.navbar > ul > li:last-child",N.viewport)),e.instance=new w(e.wrapEl,e)),n&&(N.viewport.className+=" enableToolbar",n.wrapEl||(n.wrapEl=i("footer.toolbar",N.viewport)),n.instance=new b(n.wrapEl,n)),o&&(o.wrapEl=t.getActive()),r&&(r.wrapEl=t.getActive().parentNode)}),k.on("app:start",function(){for(var t in e.plugin){var n=e.plugin[t];n.onAppStart&&n.onAppStart()}}),k.on("navigation:switch",function(t,n){for(var a in e.plugin){var i,r=e.plugin[a];if(n.plugins&&(i=n.plugins[a]),r){if(t.plugins||(t.plugins={}),t.plugins[a]||(t.plugins[a]={}),"object"==typeof i)for(var o in i)t.plugins[a][o]=i[o];r.onNavigationSwitch&&r.onNavigationSwitch(n,t.plugins[a])}}}),k.on("view:render",function(t){if(t.plugins)for(var n in t.plugins){var a=e.plugin[n],i=t.plugins[n];i===!0&&(i=t.plugins[n]={}),a&&i&&a.onViewRender&&a.onViewRender(t,i)}}),k.on("view:destory",function(t){if(t.plugins)for(var n in t.plugins){var a=e.plugin[n],i=t.plugins[n];a&&i&&a.onViewTeardown&&a.onViewTeardown(t,i)}}),k.on("page:define",function(t){if(t.plugins)for(var n in t.plugins){var a=e.plugin[n],i=t.plugins[n];a&&i&&a.onPageDefine&&a.onPageDefine(t,i)}}),k.on("page:startup",function(t,n){if(n.plugins)for(var a in n.plugins){var i=e.plugin[a],r=t.plugins[a];i&&r&&i.onPageStartup&&i.onPageStartup(n,r)}}),k.on("page:teardown",function(t,n){if(n.plugins)for(var a in n.plugins){var i=e.plugin[a],r=t.plugins[a];i&&n.plugins[a]&&i.onPageTeardown&&i.onPageTeardown(n,r)}}),k.on("view:extend",function(t){t.prototype.template&&s(t.prototype,"template")}),k.on("page:define",function(t){t.template&&s(t,"template")}),k.on("view:extend",function(t){var e=t.prototype.render,n=t.prototype.destory,a={};t.prototype.render=function(){var t=this,n=arguments;k.trigger("view:render",t,arguments),a[t.name]?e.apply(t,n):r(t,"template",function(){a[t.name]=!0,e.apply(t,n)})},t.prototype.destory=function(){k.trigger("view:destory",this,arguments),n.apply(this,arguments)}}),k.on("page:define",function(t){var e=t.startup,n=t.teardown;t.startup=function(n){k.trigger("page:startup",n,t),e.call(t)},t.teardown=function(e){k.trigger("page:teardown",e,t),n.call(t)},t.html=function(t){N.enableContent.instance.html(t)},Object.defineProperty(t,"el",{get:function(){return N.enableContent.instance.getActive()
}}),l&&Object.defineProperty(t,"$el",{get:function(){return l(N.enableContent.instance.getActive())}})}),k.on("navigation:switch",function(t,e){var n,a=e.el.getAttribute("data-fragment"),i=t.fragment,o={};a!==i&&((n=x[a])&&(n.page.teardown(n.state),delete x[a]),x[i]={state:t,page:e},e.el.setAttribute("data-fragment",i),o[e.name]?e.startup(t):r(e,"template",function(){o[e.name]=!0,e.startup(t)}))}),k.on("app:start",function(){var t=N.enableScroll;t&&Object.defineProperty(e,"scroll",{get:function(){return t.wrapEl}})}),e.start=function(){k.trigger("app:start"),h.start()},e.setTemplate=function(t,e){"string"==typeof e?L[t]=o(new g,e):"function"==typeof e&&(L[t]=e)},e.extendView=function(t){var e=v.extend(t);return k.trigger("view:extend",e),e},e.getView=function(t){return new(v.get(t))},e.definePage=function(t){var e=m.define(t);return k.trigger("page:define",e),e},e.definePageMeta=function(t){S[t.name]=t,k.trigger("page:defineMeta",t)},e.getPage=function(t){return m.get(t)},e.navigation={push:function(t,e){h.push(t,e)},pop:function(){h.pop()},getParameter:function(t){var e=h.getStack(),n=e.getState();return n.params[t]||n.args[t]||n.datas[t]},getData:function(t){var e=h.getStack(),n=e.getState();return n.datas[t]},setData:function(t,e){var n=h.getStack(),a=n.getState();a.datas[t]=e},setTitle:function(t){e.config.enableNavbar&&e.config.enableNavbar.instance.setTitle(t)},setButton:function(t){e.config.enableNavbar&&e.config.enableNavbar.instance.setButton(t)},setToolbar:function(t){if(e.config.enableToolbar){var n=e.config.enableToolbar;"string"==typeof t?n.wrapEl.innerHTML=t:(n.wrapEl.innerHTML="",n.wrapEl.appendChild(t))}}}}(window,window.app||(window.app={module:{},plugin:{}}));