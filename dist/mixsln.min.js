(function(t,e){function n(t){return t+="",0>t.indexOf("px")&&0>t.indexOf("%")&&"0"!==t&&(t+="px"),t}function a(t){return t+="",0>t.indexOf("deg")&"0"!==t&&(t+="deg"),t}function o(t,e){return e||(e="-"),t.replace(/[a-z][A-Z]/g,"$1"+e+"$2").toLowerCase()}function i(t){var e=/ms|s|m|h$/.exec(t)[0],n={ms:1,s:1e3,m:6e4,h:36e5};return parseFloat(t)*n[e]}var r=/^matrix3d\(\d+, \d+, \d+, \d+, \d+, \d+, \d+, \d+, \d+, \d+, \d+, \d+, ([-\d.]+), ([-\d.]+), [-\d.]+, \d+\)/,s=/^matrix\(\d+, \d+, \d+, \d+, ([-\d.]+), ([-\d.]+)\)$/,l=/^(translate|rotate|scale)(X|Y|Z|3d)?|(matrix)(3d)?|(perspective)|(skew)(X|Y)?$/i,c=(/android/gi.test(navigator.appVersion),/iphone|ipad/gi.test(navigator.appVersion),"WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix),u={translate:function(t,e,n,a,o,i,r){this.doTransition(t,{translate:[o,i]},{duration:e,timingFunction:n,delay:a,callback:r})},doTransition:function(t,e,r){function s(e){b||(t.removeEventListener("webkitTransitionEnd",s,!1),e&&e.srcElement!==t||(b=!0,setTimeout(r.callback,10)))}var u,p=[r.duration,r.timingFunction||"ease",r.delay||"0s"].join(" "),f="",h=[],d={};for(var g in e){var v=e[g];if(u=g.match(l)){v instanceof Array||(v=[v]);var m=u[1]||u[3]||u[5]||u[6],w=u[2]||u[4]||u[7]||"";"translate"===m&&""===w&&c&&(w="3d",v.push(0)),"translate"===m?v=v.map(n):("rotate"===m||"skew"===m)&&(v=v.map(a)),f+=m+w+"("+v.join(",")+")"}else h.push(o(g)+" "+p),d[g]=v;f&&h.push("-webkit-transform "+p)}var b=!1;r.callback&&t.addEventListener("webkitTransitionEnd",s,!1),setTimeout(s,1.2*i(r.duration)),setTimeout(function(){t.style.webkitTransition=h.join(", "),f.length&&(t.style.webkitTransform=f);for(var e in d)t.style[e]=d[e]},10)},genCubicBezier:function(t,e){return[[(t/3+(t+e)/3-t)/(e-t),(t*t/3+2*t*e/3-t*t)/(e*e-t*t)],[(e/3+(t+e)/3-t)/(e-t),(e*e/3+2*t*e/3-t*t)/(e*e-t*t)]]},makeTranslateString:function(t,e){return t=n(t),e=n(e),c?"translate3d("+t+", "+e+", 0)":"translate("+t+", "+e+")"},getTransformOffset:function(t){var e,n,a={x:0,y:0},o=getComputedStyle(t).webkitTransform;return"none"!==o&&(n=o.indexOf("matrix3d")>-1?r:s,(e=o.match(n))&&(a.x=parseInt(e[1])||0,a.y=parseInt(e[2])||0)),a}};e.module.Animation=u})(window,window.app||(window.app={module:{},plugin:{}})),function(t,e){function n(t,e){e||(e={}),this._wrapEl=t,this._cacheLength=Math.max(e.cacheLength,1),this._cacheIndex=0;for(var n="",a=0;this._cacheLength>a;a++)n+='<div class="inactive" index="'+a+'"></div>';this._wrapEl.innerHTML='<div class="wrap">'+n+"</div>",this.setClassName()}var a={setClassName:function(){this.getActive().className="active",this._cacheLength>2?(this.getPrevious().className="inactive prev",this.getNext().className="inactive next"):this._cacheLength>1&&(this.getPrevious().className="inactive")},getActive:function(){var t=this._cacheIndex;return this._wrapEl.querySelector(".wrap > div:nth-child("+(t+1)+")")},getNext:function(){var t=(this._cacheIndex+1)%this._cacheLength;return this._wrapEl.querySelector(".wrap > div:nth-child("+(t+1)+")")},getPrevious:function(){var t=(this._cacheIndex-1+this._cacheLength)%this._cacheLength;return this._wrapEl.querySelector(".wrap > div:nth-child("+(t+1)+")")},next:function(){this._cacheLength>2&&(this.getPrevious().className="inactive"),this._cacheIndex=(this._cacheIndex+1)%this._cacheLength},previous:function(){this._cacheLength>2&&(this.getNext().className="inactive"),this._cacheIndex=(this._cacheIndex-1+this._cacheLength)%this._cacheLength},html:function(t){this.getActive().innerHTML=t}};for(var o in a)n.prototype[o]=a[o];e.module.Content=n}(window,window.app||(window.app={module:{},plugin:{}})),function(t){function e(t,e){for(var n=t;n;){if(n.contains(e)||n==e)return n;n=n.parentNode}return null}function n(t,e,n){var a=l.createEvent("HTMLEvents");if(a.initEvent(e,!0,!0),"object"==typeof n)for(var o in n)a[o]=n[o];t.dispatchEvent(a)}function a(t,e,n,a,o,i,r,s){var l=Math.atan2(s-i,r-o)-Math.atan2(a-e,n-t),c=Math.sqrt((Math.pow(s-i,2)+Math.pow(r-o,2))/(Math.pow(a-e,2)+Math.pow(n-t,2))),u=[o-c*t*Math.cos(l)+c*e*Math.sin(l),i-c*e*Math.cos(l)-c*t*Math.sin(l)];return{rotate:l,scale:c,translate:u,matrix:[[c*Math.cos(l),-c*Math.sin(l),u[0]],[c*Math.sin(l),c*Math.cos(l),u[1]],[0,0,1]]}}function o(t){0===Object.keys(p).length&&(c.addEventListener("touchmove",i,!1),c.addEventListener("touchend",r,!1),c.addEventListener("touchcancel",s,!1));for(var a=0;t.changedTouches.length>a;a++){var o=t.changedTouches[a],l={};for(var f in o)l[f]=o[f];var h={startTouch:l,startTime:Date.now(),status:"tapping",element:t.srcElement,pressingHandler:setTimeout(function(e){return function(){"tapping"===h.status&&(h.status="pressing",n(e,"press",{touchEvent:t})),clearTimeout(h.pressingHandler),h.pressingHandler=null}}(t.srcElement),500)};p[o.identifier]=h}if(2==Object.keys(p).length){var d=[];for(var f in p)d.push(p[f].element);n(e(d[0],d[1]),"dualtouchstart",{touches:u.call(t.touches),touchEvent:t})}}function i(t){for(var o=0;t.changedTouches.length>o;o++){var i=t.changedTouches[o],r=p[i.identifier];if(!r)return;var s=i.clientX-r.startTouch.clientX,l=i.clientY-r.startTouch.clientY,c=Math.sqrt(Math.pow(s,2)+Math.pow(l,2));"tapping"===r.status&&c>10&&(r.status="panning",n(r.element,"panstart",{touch:i,touchEvent:t}),Math.abs(s)>Math.abs(l)?(n(r.element,"horizontalpanstart",{touch:i,touchEvent:t}),r.isVertical=!1):(n(r.element,"verticalpanstart",{touch:i,touchEvent:t}),r.isVertical=!0)),"panning"===r.status&&(r.panTime=Date.now(),n(r.element,"pan",{displacementX:s,displacementY:l,touch:i,touchEvent:t}),r.isVertical?n(r.element,"verticalpan",{displacementY:l,touch:i,touchEvent:t}):n(r.element,"horizontalpan",{displacementX:s,touch:i,touchEvent:t}))}if(2==Object.keys(p).length){for(var u,f=[],h=[],d=[],o=0;t.touches.length>o;o++){var i=t.touches[o],r=p[i.identifier];f.push([r.startTouch.clientX,r.startTouch.clientY]),h.push([i.clientX,i.clientY])}for(var g in p)d.push(p[g].element);u=a(f[0][0],f[0][1],f[1][0],f[1][1],h[0][0],h[0][1],h[1][0],h[1][1]),n(e(d[0],d[1]),"dualtouch",{transform:u,touches:t.touches,touchEvent:t})}}function r(t){if(2==Object.keys(p).length){var a=[];for(var o in p)a.push(p[o].element);n(e(a[0],a[1]),"dualtouchend",{touches:u.call(t.touches),touchEvent:t})}for(var l=0;t.changedTouches.length>l;l++){var h=t.changedTouches[l],d=h.identifier,g=p[d];if(g){if(g.pressingHandler&&(clearTimeout(g.pressingHandler),g.pressingHandler=null),"tapping"===g.status&&(g.timestamp=Date.now(),n(g.element,"tap",{touch:h,touchEvent:t}),f&&300>g.timestamp-f.timestamp&&n(g.element,"doubletap",{touch:h,touchEvent:t}),this.lastTap=g),"panning"===g.status){n(g.element,"panend",{touch:h,touchEvent:t});var v=Date.now()-g.startTime,m=(h.clientX-g.startTouch.clientX)/v,w=(h.clientY-g.startTouch.clientY)/v,b=h.clientX-g.startTouch.clientX,y=h.clientY-g.startTouch.clientY;300>v&&(n(g.element,"flick",{duration:v,velocityX:m,velocityY:w,displacementX:b,displacementY:y,touch:h,touchEvent:t}),g.isVertical?n(g.element,"verticalflick",{duration:v,velocityY:w,displacementY:y,touch:h,touchEvent:t}):n(g.element,"horizontalflick",{duration:v,velocityX:m,displacementX:b,touch:h,touchEvent:t}))}"pressing"===g.status&&n(g.element,"pressend",{touch:h,touchEvent:t}),delete p[d]}}0===Object.keys(p).length&&(c.removeEventListener("touchmove",i,!1),c.removeEventListener("touchend",r,!1),c.removeEventListener("touchcancel",s,!1))}function s(t){if(2==Object.keys(p).length){var a=[];for(var o in p)a.push(p[o].element);n(e(a[0],a[1]),"dualtouchend",{touches:u.call(t.touches),touchEvent:t})}for(var l=0;t.changedTouches.length>l;l++){var f=t.changedTouches[l],h=f.identifier,d=p[h];d&&(d.pressingHandler&&(clearTimeout(d.pressingHandler),d.pressingHandler=null),"panning"===d.status&&n(d.element,"panend",{touch:f,touchEvent:t}),"pressing"===d.status&&n(d.element,"pressend",{touch:f,touchEvent:t}),delete p[h])}0===Object.keys(p).length&&(c.removeEventListener("touchmove",i,!1),c.removeEventListener("touchend",r,!1),c.removeEventListener("touchcancel",s,!1))}var l=t.document,c=l.documentElement,u=Array.prototype.slice,p={},f=null;c.addEventListener("touchstart",o,!1)}(window,window.app||(window.app={module:{},plugin:{}})),function(t,e){function n(){this._handlers={}}function a(t){var e=this;this._scope=t,this._event=new n,this._cache={},this._handler=function(t){for(var n=t.type,a=t.args,o=e._cache[n],i=0;o.length>i;i+=2)o[i].apply(o[i+1],a)},r[t]=this}var o={addEventListener:function(t,e){var n,a=this._handlers;n=a[t]||(a[t]=[]),n.push(e)},removeEventListener:function(t,e){var n=this._handlers;n[t]&&(n[t]=n[t].filter(function(t){return t!=e}),n[t].length||delete n[t])},dispatchEvent:function(t){var e=this._handlers,n=t.type;e.hasOwnProperty(n)&&e[n].forEach(function(e){e(t)}),this["on"+n]&&this["on"+n](t)}};for(var i in o)n.prototype[i]=o[i];var r={},s=/\s+/,l=/\s*\&\&\s*/,c=/\s*\|\|\s*/,u={_wrapAND:function(t){function e(){for(var e in o)if(!o[e])return;a.trigger(t),n()}function n(){for(var t in o)o[t]=!1}var a=this,o={},i=t.split(l);i.forEach(function(t){o[t]=!1,a.on(t,function(){o[t]=!0,e()})})},_wrapOR:function(t){function e(){!r&&a.trigger(t);var e=!0;for(var i in o)e=e&&o[i];e&&n()}function n(){for(var t in o)o[t]=!1;r=!1}var a=this,o={},i=t.split(c),r=!1;i.forEach(function(t){o[t]=!1,a.on(t,function(){o[t]=!0,e()})})},on:function(t,e,n){var a,o,i=this,r=i._cache,u=i._event;if(!e)return i;for(t.match(l)?(t=t.replace(l,"&&"),this._wrapAND(t)):t.match(c)&&(t=t.replace(c,"||"),this._wrapOR(t)),t=t.split(s);o=t.shift();)a=r[o]||(r[o]=[]),a.length||u.addEventListener(o,this._handler),a.push(e,n);return i},off:function(t,e,n){var a,o,i=this,r=i._cache,l=i._event;for(t=t?t.split(s):Object.keys(r);o=t.shift();){!(e||n)&&(r[o]=[]),a=r[o];for(var c=a.length-2;c>=0;c-=2)e&&a[c]!==e||n&&a[c+1]!==n||a.splice(c,2);a.length||(delete r[o],l.removeEventListener(o,this._handler))}return i},once:function(t,e,n){function a(){e.apply(this,arguments),o.off(t,a,n)}var o=this;return o.on(t,a,n)},after:function(t,e,n){function a(){for(var t in i)if(!i[t])return;e.apply(n)}var o=this,i={};return e?(t=t.split(s),t.forEach(function(t){i[t]=!1,o.once(t,function(){i[t]=!0,a()})}),void 0):o},trigger:function(t){var e,n,a=this,o=a._cache,i=a._event;for(t=t.split(s),e=Array.prototype.slice.call(arguments,1);n=t.shift();)a.log(n,e),o[n]&&i.dispatchEvent({type:n,args:e});return a},log:function(t,n){e.config&&e.config.enableMessageLog&&console.log("[Message]",{scope:this._scope,event:t,args:n})}};for(var i in u)a.prototype[i]=u[i];a.mixto=function(t,e){var n;n="string"==typeof e?r[e]||new a(e):e,t.prototype&&(t=t.prototype);for(var o in u)void function(e){t[o]=function(){e.apply(n,arguments)}}(u[o])},a.get=function(t){return r[t]||(r[t]=new a(t))},e.module.EventSource=EventSource,e.module.MessageScope=a}(window,window.app||(window.app={module:{},plugin:{}})),function(t,e){function n(t,e){null!=e.id&&t.setAttribute("id",e.id),null!=e["class"]&&(t.className=e["class"]),null!=e.text&&(t.innerHTML=e.text),null!=e.bg&&(t.style.background=e.bg),null!=e.icon&&(t.innerHTML='<img src="'+e.icon+'" border="0" />'),t.style.display=e.hide===!0?"none":"",e.onChange&&e.onChange.call(t,e),e.handler&&(t.handler&&t.removeEventListener("click",t.handler,!1),t.addEventListener("click",t.handler=e.handler,!1))}function a(t,e){e||(e={}),this.wrapEl=t,e.animWrapEl?this.animWrapEl=e.animWrapEl:this.wrapEl.appendChild(this.animWrapEl=o.createElement("ul")),e.titleWrapEl?this.titleWrapEl=e.titleWrapEl:this.animWrapEl.appendChild(this.titleWrapEl=o.createElement("li")),e.titleWrapEl?this._backWrapEl=e.backWrapEl:this.animWrapEl.appendChild(this.backWrapEl=o.createElement("li")),e.funcWrapEl?this._funcWrapEl=e.funcWrapEl:this.animWrapEl.appendChild(this.funcWrapEl=o.createElement("li"))}var o=t.document,i={setTitle:function(t){this.titleWrapEl&&(this.titleWrapEl.innerHTML=t)},setButton:function(t){var e,a;"back"===t.type?(e=this.backWrapEl,a=e.querySelector("button")):"func"===t.type?(e=this.funcWrapEl,a=e.querySelector("#"+t.id)):t.id&&(a=this.wrapEl.querySelector("#"+t.id),a&&(e=a.parentNode)),!a&&e&&(a=o.createElement("button"),a.className=t.type,e.appendChild(a)),n(a,t)},getButton:function(t){return this.funcWrapEl.querySelector("button#"+t)},removeButton:function(t){if(t){if("string"==typeof t)var e=this.getButton(t);else if(t instanceof HTMLElement)var e=t;e&&(e.handler&&e.removeEventListener("click",e.handler),e.parentNode.removeChild(e))}else for(var n=this.funcWrapEl.querySelectorAll("button"),a=0;n.length>a;a++)this.removeButton(n[a])}};for(var r in i)a.prototype[r]=i[r];e.module.Navbar=a}(window,window.app||(window.app={module:{},plugin:{}})),function(t,e){function n(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])}function a(t,e){function a(){}a.prototype=e.prototype;var o=new a;n(o,t.prototype),o.constructor=t,t.prototype=o}function o(){}var i=e.module.MessageScope,r={},s={ready:function(){},startup:function(){},teardown:function(){},show:function(){},hide:function(){}};for(var l in s)o.prototype[l]=s[l];o.fn={},o.define=function(t){function e(){o.apply(this,arguments),this.initialize&&this.initialize.apply(this,arguments),i.mixto(this,"page."+this.name)}return a(e,o),n(e.prototype,o.fn),n(e.prototype,t),r[t.name]=new e},o.get=function(t){return r[t]},e.module.Page=o}(window,window.app||(window.app={module:{},plugin:{}})),function(t,e){function n(){}t.document;var a={load:function(t,n){function a(t){n&&n(t)}var o;e&&e.config&&(o=e.config.templateEngine),o&&o.load&&"string"==typeof t?o.load(t,a):a(t)},compile:function(t){var n,a=this;return e&&e.config&&(n=e.config.templateEngine),a.originTemplate=t,a.compiledTemplate=n&&n.compile&&"string"==typeof t?n.compile(t):function(){return t},a.compiledTemplate},render:function(t){var n,a=this,o=a.compiledTemplate;return e&&e.config&&(n=e.config.templateEngine),a.content=n&&n.render&&"object"==typeof t&&o?n.render(o,t):o(t),a.content}};for(var o in a)n.prototype[o]=a[o];e.module.Template=n}(window,window.app||(window.app={module:{},plugin:{}})),function(t,e){function n(t,e){e||(e={}),this._wrapEl=t,this.set(e)}t.document;var a={set:function(t){t||(t={}),t.html&&(this._wrapEl.innerHTML=t.html),t.el&&((this._wrapEl.innerHTML="")||this._wrapEl.appendChild(t.el)),t.height&&(this._wrapEl.style.height=t.height+"px")},show:function(t){t&&this.set(t),this._wrapEl.style.display=""},hide:function(){this._wrapEl.style.display="none"}};for(var o in a)n.prototype[o]=a[o];e.module.Toolbar=n}(window,window.app||(window.app={module:{},plugin:{}})),function(t,e){function n(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])}function a(t,e){function a(){}a.prototype=e.prototype;var o=new a;n(o,t.prototype),o.constructor=t,t.prototype=o}function o(){var e=t.$;if("string"==typeof this.el){var n=this.el.split(/\s*\>\s*/),a=this.el=document.createElement("div");n.forEach(function(t){var e;if(e=t.match(/^(\w+)?(?:\#([^.]+))?(?:\.(.+))?$/i)){var n=document.createElement(e[1]||"div");e[2]&&n.setAttribute("id",e[2]),e[3]&&(n.className=e[3]),a.appendChild(n)}else a.innerHTML=t;a=a.childNodes[0]}),this.el=this.el.removeChild(this.el.childNodes[0])}e&&(this.$el=e(this.el))}var i=(t.document,{}),r={render:function(){},destory:function(){}};for(var s in r)o.prototype[s]=r[s];o.fn={},o.extend=function(t){function e(){o.apply(this,arguments),this.initialize&&this.initialize.apply(this,arguments)}return a(e,o),n(e.prototype,o.fn),n(e.prototype,t),i[t.name]=e},o.get=function(t){return i[t]},e.module.View=o}(window,window.app||(window.app={module:{},plugin:{}})),function(t,e){function n(t,e,n,o){var i=(this.TYPE,a.getTransformOffset(t)),r={translate:{x:i.x,y:i.y}},s={translate:{x:i.x,y:i.y}};e=e.split(""),n(r,s,e[0],e[1]);for(var l in r)"translate"===l?(t.style.webkitTransition="",t.style.webkitTransform=a.makeTranslateString(r[l].x,r[l].y)):t.style[l]=r[l];s.translate=[s.translate.x,s.translate.y],t.style.webkitBackfaceVisibility="hidden",t.style.webkitTransformStyle="preserve-3d",a.doTransition(t,s,{duration:"0.4s",timingFunction:"ease",callback:function(){t.style.webkitBackfaceVisibility="",t.style.webkitTransformStyle="",t.style.webkitTransition="",o&&o()}})}var a=(t.document,e.module.Animation),o={L:"x",R:"x",T:"y",B:"y"},i={L:-1,R:1,T:-1,B:1},r={TYPE:{LEFT_IN:"LI",LEFT_OUT:"LO",RIGHT_IN:"RI",RIGHT_OUT:"RO",TOP_IN:"TI",TOP_OUT:"TO",BOTTOM_IN:"BI",BOTTOM_OUT:"BO"},move:function(t,e,n,o){var i=a.getTransformOffset(t);t.style.webkitBackfaceVisibility="hidden",t.style.webkitTransformStyle="preserve-3d",a.translate(t,"0.4s","ease","0s",i.x+e,i.y+n,function(){t.style.webkitBackfaceVisibility="",t.style.webkitTransformStyle="",t.style.webkitTransition="",o&&o()})},slide:function(t,e,a,r){n(t,e,function(t,e,n,r){var s=o[n],l=i[n];"I"===r?t.translate[s]+=l*a:e.translate[s]+=l*a},r)},"float":function(t,e,a,r){n(t,e,function(t,e,n,r){var s=o[n],l=i[n];"I"===r?(t.translate[s]+=l*a,t.opacity=0,e.opacity=1):(e.translate[s]+=l*a,t.opacity=1,e.opacity=0)},r)},fadeIn:function(t,e){n(t,"FI",function(t,e,n,a){"I"===a?(t.opacity=0,e.opacity=1):(t.opacity=1,e.opacity=0)},e)},fadeOut:function(t){n(t,"FO",function(t,e,n,a){"I"===a?(t.opacity=0,e.opacity=1):(t.opacity=1,e.opacity=0)},callback)},zoomIn:function(){},zoomOut:function(){}};e.module.Transition=r}(window,window.app||(window.app={module:{},plugin:{}})),function(e,n){function a(t){return 0-(t.bounceTop||0)}function o(t){var e=t.getBoundingClientRect(),n=t.parentNode.getBoundingClientRect(),o=a(t),i=0-e.height+n.height;return Math.min(i+(t.bounceBottom||0),o)}function i(t,e){return e>t.minScrollTop?e-t.minScrollTop:t.maxScrollTop>e?t.maxScrollTop-e:void 0}function r(t,e){return e>t.minScrollTop?e=t.minScrollTop:t.maxScrollTop>e&&(e=t.maxScrollTop),e}function l(t,e,n){var a=y.createEvent("HTMLEvents");a.initEvent(e,!0,!0);for(var o in n)a[o]=n[o];t.dispatchEvent(a)}function c(t){if(!stopBounce){for(var e=t.srcElement;!e.boundScrollEvent;)e=e.parentNode||e.offsetParent;b=e.boundScrollElement,b&&(b.style.webkitBackfaceVisibility="hidden",b.style.webkitTransformStyle="preserve-3d",b.style.webkitTransition="",b.style.webkitTransform=getComputedStyle(b).webkitTransform)}}function u(t){return t.preventDefault(),!1}function p(){}function f(){!stopBounce&&b&&(b.transformOffset=E.getTransformOffset(b),b.minScrollTop=a(b),b.maxScrollTop=o(b),k=2.5,stopBounce=!1,S=!1,l(b,"scrollstart"))}function h(t){if(!stopBounce&&b){var e=b.transformOffset.y+t.displacementY;if(e>b.minScrollTop?(e=b.minScrollTop+(e-b.minScrollTop)/k,k*=1.003,k>4&&(k=4)):b.maxScrollTop>e&&(e=b.maxScrollTop-(b.maxScrollTop-e)/k,k*=1.003,k>4&&(k=4)),i(b,e)){if(e>b.minScrollTop)var n="pulldown";else if(b.maxScrollTop>e)var n="pullup";l(b,n)}b.style.webkitTransition="",b.style.webkitTransform=E.makeTranslateString(b.transformOffset.x,e)}}function d(){if(!stopBounce&&b){var t=E.getTransformOffset(b).y;i(b,t)?v():w()}}function g(e){if(!stopBounce&&b){var n=E.getTransformOffset(b).y,a=.008*(e/Math.abs(e));t=e/a,s=n+t*e/2,l(b,"bouncestart"),E.translate(b,t.toFixed(0)+"ms","cubic-bezier("+E.genCubicBezier(-t,0)+")","0s",b.transformOffset.x,s.toFixed(0),v)}}function v(){if(!stopBounce&&b){var t=E.getTransformOffset(b).y;t=r(b,t),E.translate(b,"0.4s","ease-in-out","0s",b.transformOffset.x,t,function(){l(b,"bounceend"),w()})}}function m(t){if(!stopBounce&&b){var e,n,a,o,i,r,s,l=E.getTransformOffset(b).y;S=!0,l>b.minScrollTop||b.maxScrollTop>l?g(e):(e=t.velocityY,e>1.5&&(e=1.5),-1.5>e&&(e=-1.5),n=.0015*(e/Math.abs(e)),a=e/n,o=l+a*e/2,o>b.minScrollTop?(r=b.minScrollTop-l,s=(e-Math.sqrt(-2*n*r+e*e))/n,i=e-n*s,E.translate(b,s.toFixed(0)+"ms","cubic-bezier("+E.genCubicBezier(-a,-a+s)+")","0s",b.transformOffset.x,b.minScrollTop,function(){g(i)})):b.maxScrollTop>o?(r=b.maxScrollTop-l,s=(e+Math.sqrt(-2*n*r+e*e))/n,i=e-n*s,E.translate(b,s.toFixed(0)+"ms","cubic-bezier("+E.genCubicBezier(-a,-a+s)+")","0s",b.transformOffset.x,b.maxScrollTop,function(){g(i)})):E.translate(b,a.toFixed(0)+"ms","cubic-bezier("+E.genCubicBezier(-a,0)+")","0s",b.transformOffset.x,o.toFixed(0),w))}}function w(){!stopBounce&&b&&(S=!1,setTimeout(function(){S||(b.style.webkitBackfaceVisibility="initial",b.style.webkitTransformStyle="flat",b.style.webkitTransition="",l(b,"scrollend"))},10))}var b,y=e.document,T=y.documentElement,E=n.module.Animation,k=2,S=!1;stopBounce=!1,prevented=!1;var x={enable:function(t,e){var n=t.parentNode||t.offsetParent;prevented||(prevented=!0,T.addEventListener("touchmove",u,!1)),n.boundScrollEvent||(n.boundScrollEvent=!0,n.addEventListener("touchstart",c,!1),n.addEventListener("touchend",p,!1),n.addEventListener("panstart",f,!1),n.addEventListener("pan",h,!1),n.addEventListener("panend",d,!1),n.addEventListener("flick",m,!1)),n.boundScrollElement=t,e?(t.bounceTop=e.bounceTop,t.bounceBottom=e.bounceBottom):(t.bounceTop=0,t.bounceBottom=0);var a=E.getTransformOffset(t).x,o=-t.bounceTop;t.style.webkitTransition="",t.style.webkitTransform=E.makeTranslateString(a,o)},disable:function(t){var e,n=t.parentNode||t.offsetParent;n.boundScrollElement===t&&(e=E.getTransformOffset(t),b=n.boundScrollElement=null,setTimeout(function(){t.style.webkitTransition="",t.style.webkitTransform=E.makeTranslateString(e.x,e.y)},50))},getScrollHeight:function(t){return t.getBoundingClientRect().height-(t.bounceTop||0)-(t.bounceBottom||0)},getScrollTop:function(t){var e=E.getTransformOffset(t);return-(e.y+(t.bounceTop||0))},refresh:function(t){t.style.height="auto",t.style.height=t.offsetHeight+"px",t.offset=E.getTransformOffset(t),t.minScrollTop=a(t),t.maxScrollTop=o(t),this.scrollTo(t,-t.offset.y-t.bounceTop)},offset:function(t,e){var n=t.getBoundingClientRect(),a=e.getBoundingClientRect(),o={top:a.top-((t.bounceTop||0)+n.top),left:a.left-n.left,right:n.right-a.right,width:a.width,height:a.height};return o.bottom=o.top+a.height,o},scrollTo:function(t,e){var n=E.getTransformOffset(t).x,e=-e-(t.bounceTop||0);e=r(t,e),t.style.webkitTransition="",t.style.webkitTransform=E.makeTranslateString(n,e)},scollToElement:function(t,e){var n=this.offset(t,e);this.scrollTo(t,n.top)},getViewHeight:function(t){return t.parentNode.getBoundingClientRect().height},getBoundaryOffset:function(t){var e=E.getTransformOffset(t).y;return i(t,e)},stopBounce:function(t){stopBounce=!0;var e=E.getTransformOffset(t),n=a(t),i=o(t),r=null;e.y>n+(t.bounceTop||0)?r=n+(t.bounceTop||0):e.y<i-(t.bounceBottom||0)&&(r=i-(t.bounceBottom||0)),null!=r&&E.translate(t,"0.4s","ease-in-out","0s",e.x,r)},resumeBounce:function(t){stopBounce=!1;var e,n=E.getTransformOffset(t),i=a(t),r=o(t);n.y>i?e=i:r>n&&(e=r),null!=e&&E.translate(t,"0.4s","ease-in-out","0s",n.x,e)}};n.module.Scroll=x}(window,window.app||(window.app={module:{},plugin:{}})),function(t,e){function n(t){var e=this,a=!0,r={};o.mixto(e,"model-"+i++),e.addProperty=function(o,i){Object.defineProperty(e,o,{get:function(){return r[o]||t[o]},set:function(i){r[o]&&(r[o].destory(),delete r[o]),null!=i&&(t[o]=i,"object"==typeof i&&(r[o]=new n(i),r[o].on("propertyChange",function(t){e.trigger("propertyChange",{target:t.target,value:t.value,name:t.name,path:o+"."+t.path})}))),!a&&e.trigger("propertyChange",{target:e,value:r[o]||t[o],name:o,path:o})}}),e[o]=i},e.update=function(t){if(t instanceof Array)for(var a=0;t.length>a;a++)t[a]instanceof n||this.addProperty(a,t[a]);else for(var o in t){if(e.hasOwnProperty(o))throw Error('property conflict "'+o+'"');!t.hasOwnProperty(o)||t[o]instanceof n||this.addProperty(o,t[o])}},e.destory=function(){for(var t in r)r[t].destory();e.off()},e.on("propertyChange",function(t){e.trigger("change:"+t.path,t.value)}),e.update(t),a=!1}function a(t){var e=this;!t instanceof Array||(e.push=function(n){t.push(n),e.addProperty(t.length-1,n)},e.pop=function(){var n=t.pop();return e[t.length]=null,n},Object.defineProperty(e,"length",{get:function(){return t.length}}),n.call(e,t))}var o=e.module.MessageScope,i=0;e.module.Model=n,e.module.Collection=a}(window,window.app||(window.app={module:{},plugin:{}})),function(t,e){function n(){var t=this;t.move=null,t.transition=null,t.datas=null,t._states=[],t._stateIdx=0,t._stateLimit=100}function a(t){return t.replace(f,"(P<$1>[^\\/]*?)").replace(h,"(P<$1>.*?)")}function o(t){var e=t.match(d),n={};return e&&e.forEach(function(t,e){n[t.replace(d,"$1")]=e}),n}function i(t){if(!t)return{};var e=t.substring(1).split("&"),n={};return e.forEach(function(t){if(t){var e=t.split("=");n[e[0]]=e[1]}}),n}function r(t){return t=t.replace(d,""),RegExp("^("+t+")("+g+".*?)?$")}function s(){return m.hash.slice(1)||""}function l(t){m.hash=t}function c(){var t=this;t._started=!1,t._routes={},t._stack=new n,w.mixto(this,"navigation")}var u={reset:function(){var t=this;t.move=null,t.transition=null,t.datas=null,t.type=null,t._states=[],t._stateIdx=0,t._stateLimit=100},pushState:function(t,e,a,o){var i=this,r=i._states,s=i._stateIdx,l=i._stateLimit,c=r.length,u=i.move,p=i.transition,f=i.datas,h=i.type,d=r[s-1],g=r[s+1],v={name:t,fragment:e,type:h,params:a||{},datas:f||{}};for(var m in o)v.datas[m]=o[m];return null==u&&(p=u=!f&&n.isEquals(d,v)?"backward":"forward"),"backward"===u?0===s&&c>0?r.unshift(v):s>0&&(s--,v=d):"forward"===u&&(s===l-1?(r.shift(),r.push(v),v.referer=location.href.replace(/#[^#]*/,"#"+r[s-1].fragment)):0===s&&0===c?(r.push(v),v.referer=document.referer||""):!f&&n.isEquals(g,v)?(s++,v=g):n.isEquals(r[s],v)?v=r[s]:(s++,r.splice(s),r.push(v),v.referer=location.href.replace(/#[^#]*/,"#"+r[s-1].fragment))),v.move=u,v.transition=p,v.index=s,i.move=null,i.transition=null,i.datas=null,i._stateIdx=s,v},getState:function(){return this._states[this._stateIdx]},getIndex:function(){return this._stateIdx}};for(var p in u)n.prototype[p]=u[p];n.isEquals=function(t,e){return t&&e?t.name!==e.name||t.fragment!==e.fragment?!1:!0:!1};var f=/\:([a-z0-9_-][a-z0-9_-]*)/gi,h=/\*([a-z0-9_-][a-z0-9_-]*)/gi,d=/P\<([a-z0-9_-][a-z0-9_-]*?)\>/gi,g="!",v=t.history,m=t.location,w=e.module.MessageScope,b={getStack:function(){return this._stack},handleEvent:function(){var t,e,n,a=this,o=a._routes,i=!0;if(a._started){e=s();for(var r in o)if(t=o[r],t["default"])n=t;else if(t.routeReg.test(e)&&(i=!1,t.callback(e),t.last))break;i&&n&&n.callback(e)}},addRoute:function(t,e,n){function s(e,a,o){var i=u._stack.pushState(t,e,a,o);n.callback&&n.callback(i),u.trigger(i.move,i)}var l,c,u=this;1===arguments.length&&(n=arguments[0],t=null,e=null),n||(n={}),n["default"]?u._routes[t]={"default":!0,callback:function(t){var e=i(t.split(g)[1]||"");s(t,{},e)}}:t&&e&&(e=a(e),l=o(e),c=r(e),u._routes[t]={routeText:e,routeReg:c,callback:function(t){var e=t.match(c).slice(2),n=i(e.pop()||""),a={};for(var o in l)a[o]=e[l[o]];s(t,a,n)},last:!!n.last})},removeRoute:function(t){this._routes[t]&&delete this._routes[t]},hasRoute:function(t){return!!this._routes[t]},start:function(){return this._started?!1:(this._started=!0,t.addEventListener("hashchange",this,!1),this.handleEvent(),!0)},stop:function(){return this._started?(this._routes={},this._stack.reset(),this._started=!1,t.removeEventListener("hashchange",this,!1),!0):!1},push:function(t,e){var n=this,a=n._stack,o=a.getState(),i=[];if(e||(e={}),a.move="forward",a.transition="forward",null!=t){if(!o||o.fragment!==t||e.data){if(e.type||(e.type="GET"),e.data||(e.data={}),"GET"===e.type.toUpperCase())for(var r in e.data)i.push(r+"="+e.data[r]);"POST"===e.type.toUpperCase()&&(a.datas=e.data),"backward"===e.transition&&(a.transition="backward"),a.type=e.type.toUpperCase(),l(t+(i.length?g+i.join("&"):""))}}else v.forward()},pop:function(t){var e=this,n=e._stack,a=n.getIndex();0!==a&&(n.move="backward",n.transition="backward",t&&"forward"===t.transition&&(n.transition="forward"),v.back())},resolve:function(t,e){var n,a=this._routes[t],o="";return a&&(n=a.routeText,o=n.replace(/\(P<[a-z0-9_-][a-z0-9_-]*?>.*?\)/g,function(t){var n=d.exec(t)[1];return e[n]||"undefined"}).replace("\\","")),o}};for(var p in b)c.prototype[p]=b[p];c.instance=new c,e.module.StateStack=n,e.module.Navigation=c}(window,window.app||(window.app={module:{},plugin:{}})),function(t,e){function n(t,e){return e||(e=p),e.querySelector(t)}function a(t,e){var n=p.createEvent("HTMLEvents");n.initEvent(e,!0,!0),t.dispatchEvent(n)}function o(){if(d)a(window,"scrollend");else{var t=window.scrollY;setTimeout(function(){window.scrollY===t&&a(window,"scrollend")},150)}}function i(t,n){if(t.plugins)for(var a in t.plugins){var o=e.plugin[a],i=t.plugins[a];i===!0&&(i=t.plugins[a]={}),o&&i&&o[n]&&o[n](t,i)}}function r(t,n,a){if(2===arguments.length&&(a=n,n=t,t=null),n.plugins)for(var o in n.plugins){var i=e.plugin[o],r=n.plugins[o];if(i&&r){if(r===!0&&(r=n.plugins[o]={}),t){t.plugins[o]||(t.plugins[o]={});for(var s in r)null==t.plugins[o][s]&&(t.plugins[o][s]=n.plugins[o][s]);r=t.plugins[o]}i[a]&&i[a](n,r)}}}function s(t,e,n){var a=t[e];if("string"==typeof a)N.on("template:loaded",function(t){a===t&&(N.off("template:loaded",arguments.callee),n&&n())});else if("object"==typeof a)for(var e in a)s(a,e,function(){var t=!0;for(var e in a)if("function"!=typeof a[e]){t=!1;break}t&&n&&n()});else n&&n()}function l(t,e){return t.compile(e),function(e){return t.render(e)}}function c(t,e){var n=t[e];if("string"==typeof n){var a;O[n]?t[e]=O[n]:n.match(/\.tpl$/g)?(a=new b,a.load(n,function(o){t[e]=O[n]=l(a,o),N.trigger("template:loaded",n)})):(a=new b,t[e]=O[n]=l(a,n))}else if("object"==typeof n)for(var e in n)c(n,e)}function u(){return w.getStack().getState()}var p=t.document,f=t.$,h=navigator.appVersion,d=/iphone|ipad/gi.test(h),g=e.module,v=g.MessageScope,m=g.Navigation,w=m.instance,b=g.Template,y=g.View,T=g.Page,E=g.Navbar,k=g.Toolbar,S=g.Content,x=g.Scroll,_=(g.Animation,g.Transition),L={},M={},O={},B={},C=e.config={viewport:null,templateEngine:null,resourceCombo:null,resourceBase:"./",enableMessageLog:!1,enableContent:!0,enableNavbar:!1,enableToolbar:!1,enableScroll:!1,enableTransition:!1},N=v.get("hooks");N.on("app:start",function(){var t=e.config;E||(t.enableNavbar=!1),k||(t.enableToolbar=!1),x||(t.enableScroll=!1),_||(t.enableTransition=!1),t.enableNavbar===!0&&(t.enableNavbar={}),t.enableToolbar===!0&&(t.enableToolbar={}),t.enableScroll===!0&&(t.enableScroll={}),t.enableTransition===!0&&(t.enableTransition={}),"number"==typeof t.enableContent?t.enableContent={cacheLength:t.enableContent}:t.enableContent instanceof HTMLElement?t.enableContent={wrapEl:t.enableContent}:"object"!=typeof t.enableContent&&(t.enableContent={})}),"onorientationchange"in t&&window.addEventListener("onorientationchange",function(){setTimeout(function(){N.trigger("orientaion:change")},10)},!1),window.addEventListener("resize",function(){setTimeout(function(){N.trigger("screen:resize")},10)}),N.on("page:define page:defineMeta",function(t){var e=t.name,n=t.route;w.hasRoute(e)||(n?"string"==typeof n&&(n={name:e,text:n}):n={name:e,"default":!0},w.addRoute(n.name,n.text,{"default":n["default"],callback:n.callback,last:n.last}))}),N.on("app:start",function(){var t,e=C.enableNavbar,a=C.enableToolbar,i=C.enableContent,r=C.enableTransition,s=C.enableScroll;C.viewport||(C.viewport=n(".viewport")||p.body),i.wrapEl||(i.wrapEl=n(".content",C.viewport)||C.viewport),i.cacheLength||(i.cacheLength=i.wrapEl===C.viewport?1:5),t=i.instance=new S(i.wrapEl,{cacheLength:i.cacheLength}),e&&(C.viewport.className+=" enableNavbar",e.wrapEl||(e.wrapEl=n(".navbar",C.viewport)),e.instance=new E(e.wrapEl,e)),a&&(C.viewport.className+=" enableToolbar",a.wrapEl||(a.wrapEl=n(".toolbar",C.viewport)),a.instance=new k(a.wrapEl,a)),s?(C.viewport.className+=" enableScroll",s.wrapEl=t.getActive()):window.addEventListener("scroll",o,!1),r&&(C.viewport.className+=" enableTransition",r.wrapEl=t.getActive().parentNode)}),N.on("app:start",function(){for(var t in e.plugin){var n=e.plugin[t];n.onAppStart&&n.onAppStart()}}),N.on("view:render",function(t){i(t,"onViewRender")}),N.on("view:destory",function(t){i(t,"onViewTeardown")}),N.on("page:define",function(t){r(t,"onPageDefine")}),N.on("page:startup",function(t,e){r(t,e,"onPageStartup")}),N.on("page:show",function(t,e){r(t,e,"onPageShow")}),N.on("page:hide",function(t,e){r(t,e,"onPageHide")}),N.on("page:teardown",function(t,e){r(t,e,"onPageTeardown")
}),N.on("view:extend",function(t){t.prototype.template&&c(t.prototype,"template")}),N.on("page:define",function(t){t.template&&c(t,"template")}),N.on("view:extend",function(t){var e=t.prototype.render,n=t.prototype.destory;t.prototype.render=function(){var t=this,n=arguments;s(t,"template",function(){N.trigger("view:render",t,arguments),e.apply(t,n)})},t.prototype.destory=function(){N.trigger("view:destory",this,arguments),n.apply(this,arguments)}}),N.on("page:define",function(t){var e=t.ready,n=t.startup,a=t.teardown,o=t.show,i=t.hide,r=!1,s=!1;t.ready=function(n){r||(N.trigger("page:ready",n,t),e.call(t),r=!0)},t.startup=function(e){N.trigger("page:startup",e,t),n.call(t),s=!0},t.show=function(e){N.trigger("page:show",e,t),o.call(t,s)},t.hide=function(e){N.trigger("page:hide",e,t),i.call(t,s)},t.teardown=function(e){N.trigger("page:teardown",e,t),a.call(t),s=!1},t.html=function(t){C.enableContent.instance.html(t)}}),N.on("app:start",function(){function t(){if(m){var t=m.instance;title=h.pageMeta.title||d.title,buttons=h.pageMeta.buttons||d.buttons,e.navigation.setTitle(title),t.removeButton(),buttons?buttons.forEach(function(t){var n=t.handler;"string"==typeof n&&(n=d[n]),"back"===t.type&&(t.hide=t.autoHide!==!1&&1>h.index,n||(n=function(){e.navigation.pop()})),t.handler=function(t){n&&n.call(d,t,h.index)},e.navigation.setButton(t)}):e.navigation.setButton({type:"back",text:"back",hide:1>h.index?!0:!1,handler:function(){e.navigation.pop()}}),!O&&v&&_.float(t.animWrapEl,"backward"===h.transition?"LI":"RI",50)}}function n(){if(b){var t=b.instance,n=h.pageMeta.toolbar||d.toolbar;b.wrapEl.innerHTML="","number"==typeof n&&(n={height:n}),n?(e.navigation.setToolbar(n),t.show()):t.hide()}}function a(){O||("backward"===h.move?E.previous():E.next())}function o(){var t=S?C.viewport.offsetHeight:window.innerHeight;m&&(t-=m.wrapEl.offsetHeight),b&&(t-=b.wrapEl.offsetHeight),S?y.wrapEl.style.height=t+"px":(y.wrapEl.style.minHeight=t+"px",y.instance.getActive().style.minHeight=t+"px")}function i(){!O&&S&&(x.disable(S.wrapEl),S.wrapEl=E.getActive(),x.enable(S.wrapEl,d.scroll))}function r(){if(!O){var t=h.transition;if(k&&v){var e=k.wrapEl.offsetWidth*("backward"===t?1:-1),n=k.wrapEl.className+=" "+t;_.move(k.wrapEl,e,0,function(){E.setClassName(),k.wrapEl.className=n.replace(" "+t,""),k.wrapEl.style.webkitTransform="",N.trigger("navigation:switchend",h)})}else E.setClassName(),N.trigger("navigation:switchend",h)}}function l(t){for(var n in e.plugin){var a=e.plugin[n];a&&(h.plugins[n]||(h.plugins[n]={}),a[t]&&a[t](h.plugins[n]))}}function c(){var t;(t=M[h.name])&&(t.css&&e.loadResource(t.css,"css"),t.js&&e.loadResource(t.js,"js",function(){d=T.get(h.name),d.ready(),u()}))}function u(){d.el=E.getActive(),f&&(d.$el=f(d.el)),t(),n(),r(),i(),o(),s(d,"template",p)}function p(){v&&v.hide(g);var t=d.el.getAttribute("data-fragment"),e=L[t];"backward"===h.move&&t===h.fragment?d.show(h):(e&&(e.page.teardown(e.state),delete L[t]),L[h.fragment]={state:h,page:d},d.el.setAttribute("data-fragment",h.fragment),d.startup(h),d.show(h)),g=h,v=d}var h,d,g,v,m=C.enableNavbar,b=C.enableToolbar,y=C.enableContent,E=y.instance,k=C.enableTransition,S=C.enableScroll,O=!1;w.on("forward backward",function(){h=arguments[0],h.pageMeta||(h.pageMeta={}),h.plugins||(h.plugins={}),g&&(O=g.name===h.name),O||N.trigger("navigation:switch",h),(d=T.get(h.name))?u():c()}),N.on("navigation:switch",function(){a(),l("onNavigationSwitch")}),N.on("navigation:switchend",function(){l("onNavigationSwitchEnd")}),N.on("page:show && navigation:switchend",function(){l("onDomReady")}),N.on("orientaion:change screen:resize",function(){o()})}),e.start=function(t){for(var n in t)e.config[n]=t[n];N.trigger("app:start"),w.start()},e.setTemplate=function(t,e){"string"==typeof e?O[t]=l(new b,e):"function"==typeof e&&(O[t]=e)},e.extendView=function(t){var e=y.extend(t);return N.trigger("view:extend",e),e},e.getView=function(t){return new(y.get(t))},e.definePage=function(t){var e=T.define(t);return N.trigger("page:define",e),e},e.definePageMeta=function(t){t instanceof Array||(t=[t]),t.forEach(function(t){M[t.name]=t,N.trigger("page:defineMeta",t)})},e.getPage=function(t){return T.get(t)};var H=document.createElement("a");e.loadResource=function(t,n,a){function o(){return"resource-"+Date.now()+"-"+Object.keys(B).length}function i(t){return 0===t.indexOf("http")?t:e.config.resourceBase+t}function r(t,e){H.href=i(t);var a=B[H.href]||(B[H.href]=o());if("js"===n||t.match(/\.js$/)){var r=document.createElement("script"),s=!1;r.id=a,r.async=!0,r.onload=r.onreadystatechange=function(){s||(s=!0,e&&e(t))},r.src=t,p.body.appendChild(r)}else if("css"===n||t.match(/\.css$/)){var l=document.createElement("link");l.id=a,l.type="text/css",l.rel="stylesheet",l.href=t,p.body.appendChild(l),e()}}2===arguments.length&&"function"==typeof arguments[1]&&(a=arguments[1],n=null),"string"==typeof t&&(t=[t]);var s=[],l=C.resourceCombo;t.forEach(function(t){H.href=i(t),B[H.href]||(B[H.href]=o(),s.push(t))}),l&&(s=l(s),"string"==typeof s&&(s=[s])),r(s.shift(),function(){s.length?r(s.shift(),arguments.callee):a&&a()})},e.navigation={push:function(t,e){w.push(t,e)},pop:function(){w.pop()},resolveFragment:function(t,e){w.resolve(t,e)},getReferer:function(){return u().referer},getParameter:function(t){var e=u();return e.params[t]||e.datas[t]},getParameters:function(){var t=u(),e={};for(var n in t.params)e[n]=t.params[n];for(var n in t.datas)e[n]=t.datas[n];return e},setData:function(t,e){u().datas[t]=e},setTitle:function(t){var n=u();e.config.enableNavbar&&e.config.enableNavbar.instance.setTitle(t),n.pageMeta.title=t},setButton:function(t){var n=u();if(e.config.enableNavbar&&e.config.enableNavbar.instance.setButton(t),n.pageMeta.buttons){for(var a=0;n.pageMeta.buttons.length>a;a++){var o=n.pageMeta.buttons[a];if("back"===o.type&&"back"===t.type||o.id===t.id){for(var i in t)o[i]=t[i];return}}n.pageMeta.buttons.push(t)}else n.pageMeta.buttons=[t]},setToolbar:function(t){var n=u();e.config.enableToolbar&&e.config.enableToolbar.instance.set(t),n.pageMeta.toolbar=t}},e.scroll={getScrollHeight:function(){var t=C.enableScroll;return t?x.getScrollHeight(t.wrapEl):p.body.scrollHeight},getScrollTop:function(){var t=C.enableScroll;return t?x.getScrollTop(t.wrapEl):p.body.scrollTop},refresh:function(){var t=C.enableScroll;t&&x.refresh(t.wrapEl)},offset:function(t){var e=C.enableScroll;return e?x.offset(e.wrapEl,t):x.offset(p.body,t)},scrollTo:function(t){var e=C.enableScroll;e?x.scrollTo(e.wrapEl,t):p.body.scrollTop=t},scrollToElement:function(t){var e=C.enableScroll;e?x.scrollToElement(e.wrapEl,t):t.scrollIntoView()},getViewHeight:function(){var t=C.enableScroll;return t?x.getViewHeight(t.wrapEl):window.innerHeight},getBoundaryOffset:function(){var t=C.enableScroll;return t?x.getBoundaryOffset(t.wrapEl):0},stopBounce:function(){var t=C.enableScroll;t&&x.stopBounce(t.wrapEl)},resumeBounce:function(){var t=C.enableScroll;t&&x.resumeBounce(t.wrapEl)},addEventListener:function(t,e,n){var a=C.enableScroll,o=(C.enableContent.instance,a?a.wrapEl:window);o.addEventListener(t,e,n)},removeEventListener:function(t,e){var n=C.enableScroll,a=(C.enableContent.instance,n?n.wrapEl:window);a.removeEventListener(t,e)},getElement:function(){var t=C.enableScroll;return t?t.wrapEl:p.body}}}(window,window.app||(window.app={module:{},plugin:{}}));