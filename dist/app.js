define("#mix/sln/0.1.0/modules/gesture",["mix/core/0.3.0/base/reset","mix/core/0.3.0/base/class"],function(a){function h(a,b,c,d,e,f,g,h){var i=Math.atan2(h-f,g-e)-Math.atan2(d-b,c-a),j=Math.sqrt((Math.pow(h-f,2)+Math.pow(g-e,2))/(Math.pow(d-b,2)+Math.pow(c-a,2))),k=[e-j*a*Math.cos(i)+j*b*Math.sin(i),f-j*b*Math.cos(i)-j*a*Math.sin(i)];return{rotate:i,scale:j,translate:k,matrix:[[j*Math.cos(i),-j*Math.sin(i),k[0]],[j*Math.sin(i),j*Math.cos(i),k[1]],[0,0,1]]}}function i(a,b,c){var d=document.createEvent("HTMLEvents");return d.initEvent(a,!0,!0),b&&(c?Object.each(c,function(a){d[a]=b[a]}):Object.extend(d,b)),d}a("mix/core/0.3.0/base/reset");var d=window,e=d.document,f=["screenX","screenY","clientX","clientY","pageX","pageY"],g=a("mix/core/0.3.0/base/class"),j=g.create({initialize:function(a){var b=this;b._el=a,b._myGestures={},b._lastTapTime=0/0,b._onStart=b._onStart.bind(b),b._onDoing=b._onDoing.bind(b),b._onEnd=b._onEnd.bind(b),b._onTap=b._onTap.bind(b),a.addEventListener("touchstart",b._onStart,!1),a.addEventListener("tap",b._onTap,!1)},getElement:function(){return that._el},_onStart:function(a){var b=this,c=b._el,d=b._myGestures;if(0===Object.keys(d).length&&(e.body.addEventListener("touchmove",b._onDoing,!1),e.body.addEventListener("touchend",b._onEnd,!1)),Object.each(a.changedTouches,function(a){var b={};for(var e in a)b[e]=a[e];var f={startTouch:b,startTime:Date.now(),status:"tapping",pressingHandler:setTimeout(function(){if("tapping"===f.status){f.status="pressing";var a=i("press",b);c.dispatchEvent(a)}clearTimeout(f.pressingHandler),f.pressingHandler=null},500)};d[a.identifier]=f}),2==Object.keys(d).length){var f=i("dualtouchstart");f.touches=JSON.parse(JSON.stringify(a.touches)),c.dispatchEvent(f)}},_onDoing:function(a){var b=this,c=b._el,d=b._myGestures;if(Object.each(a.changedTouches,function(a){var e,g,h,j,b=d[a.identifier];b&&(e=a.clientX-b.startTouch.clientX,g=a.clientY-b.startTouch.clientY,h=Math.sqrt(Math.pow(e,2)+Math.pow(g,2)),"tapping"==b.status&&h>10&&(b.status="panning",j=i("panstart",a,f),c.dispatchEvent(j)),"panning"==b.status&&(j=i("pan",a,f),j.displacementX=e,j.displacementY=g,c.dispatchEvent(j)))}),2==Object.keys(d).length){var j,k,e=[],g=[];Object.each(a.touchs,function(a){var b;(b=d[a.identifier])&&(e.push([b.startTouch.clientX,b.startTouch.clientY]),g.push([a.clientX,a.clientY]))}),j=h(e[0][0],e[0][1],e[1][0],e[1][1],g[0][0],g[0][1],g[1][0],g[1][1]),k=i("dualtouch",j),k.touches=JSON.parse(JSON.stringify(a.touches)),c.dispatchEvent(k)}},_onEnd:function(a){var g,b=this,c=b._el,d=b._myGestures;2==Object.keys(d).length&&(g=i("dualtouchend"),g.touches=JSON.parse(JSON.stringify(a.touches)),c.dispatchEvent(g));for(var h=0;a.changedTouches.length>h;h++){var j=a.changedTouches[h],k=j.identifier,l=d[k];if(l){if(l.pressingHandler&&(clearTimeout(l.pressingHandler),l.pressingHandler=null),"tapping"===l.status&&(g=i("tap",j,f),c.dispatchEvent(g)),"panning"===l.status){g=i("panend",j,f),c.dispatchEvent(g);var m=Date.now()-l.startTime;300>m&&(g=i("flick",j,f),g.duration=m,g.valocityX=(j.clientX-l.startTouch.clientX)/m,g.valocityY=(j.clientY-l.startTouch.clientY)/m,g.displacementX=j.clientX-l.startTouch.clientX,g.displacementY=j.clientY-l.startTouch.clientY,c.dispatchEvent(g))}"pressing"===l.status&&(g=i("pressend",j,f),c.dispatchEvent(g)),delete d[k]}}0==Object.keys(d).length&&(e.body.removeEventListener("touchend",b._onEnd,!1),e.body.removeEventListener("touchmove",b._onDoing,!1))},_onTap:function(a){var b=this,c=b._el,d=b._lastTapTime;if(500>Date.now()-d){var e=document.createEvent("HTMLEvents");e.initEvent("doubletap",!0,!0),Object.each(f,function(b){e[b]=a[b]}),c.dispatchEvent(e)}b._lastTapTime=Date.now()}});return function(a){return new j(a)}}),define("#mix/sln/0.1.0/modules/scroll",["./gesture","mix/core/0.3.0/base/reset","mix/core/0.3.0/base/class"],function(a){function p(a,b){return[[(a/3+(a+b)/3-a)/(b-a),(a*a/3+2*a*b/3-a*a)/(b*b-a*a)],[(b/3+(a+b)/3-a)/(b-a),(b*b/3+2*a*b/3-a*a)/(b*b-a*a)]]}function q(a){var b=a.parentNode,c=getComputedStyle(b);return 0-a.scrollHeight+b.offsetHeight-parseInt(c.paddingTop)-parseInt(c.paddingBottom)-parseInt(c.marginTop)-parseInt(c.marginBottom)}function r(a){var b,c;if(b=getComputedStyle(a).webkitTransform,"none"!==b){if(c=b.match(/^matrix3d\(\d+, \d+, \d+, \d+, \d+, \d+, \d+, \d+, \d+, \d+, \d+, \d+, ([\d-]+), ([-\d]+), [\d-]+, \d+\)/))return parseInt(c[2])||0;if(c=b.match(/^matrix\(\d+, \d+, \d+, \d+, ([-\d]+), ([-\d]+)\)$/))return parseInt(c[2])||0}return 0}function s(a,b){return"translate("+a+"px, "+b+"px)"}function t(a,b,c){function e(d){d.srcElement===a&&d.propertyName==b&&(a.style.webkitTransition="none",a.removeEventListener("webkitTransitionEnd",e,!1),c&&c())}a.parentNode,a.addEventListener("webkitTransitionEnd",e,!1)}function u(a,b,c,d,e,f,g){var h="-webkit-transform";a.parentNode,a.style.webkitTransition=[h,b,c,d].join(" "),a.style.webkitTransform=s(e,f),t(a,h,g)}a("mix/core/0.3.0/base/reset");var d=window,e=d.document,f=d.navigator,g=a("mix/core/0.3.0/base/class"),h=a("./gesture"),k=f.appVersion,o=(/android/gi.test(k),/iphone|ipad/gi.test(k),"WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix,!1),w=g.create({initialize:function(a){var b=this;b._el=a,b._gesture=h(a),b._originalY=null,b._currentY=null,b._onTouchStart=b._onTouchStart.bind(b),b._onPanStart=b._onPanStart.bind(b),b._onPan=b._onPan.bind(b),b._onPanEnd=b._onPanEnd.bind(b),b._onFlick=b._onFlick.bind(b),a.style.webkitBackfaceVisibility="hidden",a.style.webkitTransformStyle="preserve-3d",a.addEventListener("touchstart",b._onTouchStart,!1),a.addEventListener("panstart",b._onPanStart,!1),a.addEventListener("pan",b._onPan,!1),a.addEventListener("panend",b._onPanEnd,!1),a.addEventListener("flick",b._onFlick,!1),o||(o=!0,e.body.addEventListener("touchmove",function(a){a.preventDefault()},!1))},getElement:function(){return that._el},_onTouchStart:function(){var b=this,c=b._el;c.style.webkitTransition="none",c.style.webkitTransform=getComputedStyle(c).webkitTransform,c.style.height="auto",c.style.height=c.offsetHeight+"px"},_onPanStart:function(){var b=this,c=b._el;b._originalY=r(c)},_onPan:function(a){var f,b=this,c=b._el,d=q(c),e=b._originalY;f=b._currentY=e+a.displacementY,c.style.webkitTransform=f>0?s(0,f/2):d>f?s(0,(d-f)/2+f):s(0,f)},_onPanEnd:function(){var b=this,c=b._el,d=b._currentY,e=q(c),f=null;d>0&&(f=0),e>d&&(f=e),null!=f&&u(c,"0.4s","ease-out","0s",0,f)},_onFlick:function(a){var b=this,c=b._el,d=b._currentY,e=q(c);if(!(e>d||d>0)){var f=r(c),g=a.valocityY;g>1.5&&(g=1.5),-1.5>g&&(g=-1.5);var h=.0015*(g/Math.abs(g)),i=g/h,j=f+i*g/2;if(j>0||e>j){var k=j>0?1:-1,l=j>0?0:e;j=l,i=(k*Math.sqrt(2*h*(j-f)+g*g)-g)/h,v=g-h*i,u(c,i.toFixed(0)+"ms","cubic-bezier("+p(-g/h,-g/h+i)+")","0s",0,j.toFixed(0),function(){g=v,f=j,h=.0045*(g/Math.abs(g)),i=g/h,j=f+i*g/2,u(c,i.toFixed(0)+"ms","cubic-bezier("+p(-i,0)+")","0s",0,j.toFixed(0),function(){u(c,"0.4s","ease-out","0s",0,l)})})}else u(c,i.toFixed(0)+"ms","cubic-bezier("+p(-i,0)+")","0s",0,j.toFixed(0))}}});return function(a){return new w(a)}}),define("#mix/sln/0.1.0/app",["./modules/gesture","./modules/scroll","./modules/page","mix/core/0.3.0/base/reset","mix/core/0.3.0/base/class","mix/core/0.3.0/url/router","mix/core/0.3.0/url/navigate","mix/core/0.3.0/base/message","mix/sln/0.1.0/app"],function(a){function n(){var a=e.querySelector('*[is="x-back"]');a.style.visibility="hidden",a.addEventListener("click",function(a){return i.backward(),a.preventDefault(),!1}),i.on("forward backward",function(){var c="";1>i.getStateIndex()&&(c="hidden"),a.style.visibility!==c&&(a.style.visibility=c)})}function o(){var a=e.querySelector('*[is="x-scroll"]');m.ui.scroll(a)}var d=window,e=d.document,h=(a("mix/core/0.3.0/base/reset"),a("mix/core/0.3.0/base/class"),a("mix/core/0.3.0/url/router").singleton),i=a("mix/core/0.3.0/url/navigate").singleton,j=a("./modules/gesture"),k=a("./modules/scroll"),l=a("./modules/page"),m={theme:"ios",routePrefix:0,routePrefixSep:"/"};Object.extend(m,{init:function(a){var c=a.name,d=a.routes||{};delete a.name,delete a.routes;var e=new l(c,{routePrefix:m.routePrefix,routePrefixSep:m.routePrefixSep,routes:d});Object.extend(e,a)},router:h,navigate:i,ui:{gesture:j,scroll:k}}),n(),o(),d.app=m}),require("mix/sln/0.1.0/app");